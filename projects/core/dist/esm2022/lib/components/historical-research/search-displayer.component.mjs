import { NgIf } from "@angular/common";
import { Component, EventEmitter, Output, TemplateRef, ViewChild, input, } from "@angular/core";
import { FontIconComponent } from "@ta/icons";
import { BottomSheetTemplateGenericComponent, } from "@ta/menu";
import { ButtonComponent } from "@ta/ui";
import { TaBaseComponent } from "@ta/utils";
import { SearchHistoryDisplayerComponent } from "./search-history-displayer/search-history-displayer.component";
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/bottom-sheet";
export class SearchDisplayerComponent extends TaBaseComponent {
    get mobileDetection() {
        return this.breakpoints.isMobile;
    }
    constructor(_bottomSheet) {
        super();
        this._bottomSheet = _bottomSheet;
        this.container = input("button");
        this.placeholder = input("");
        this.searchHistory = input();
        this.valueCompleted = new EventEmitter();
    }
    openDialog() {
        if (!this.searchHistory()?.type) {
            return;
        }
        this._bottomSheet.open(BottomSheetTemplateGenericComponent, {
            data: {
                template: this.searchTemplate,
                context: {
                    options: { isDropDown: false },
                },
            },
        });
    }
    action(result) {
        this._bottomSheet.dismiss();
        if (result) {
            this.valueCompleted.emit(result);
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: SearchDisplayerComponent, deps: [{ token: i1.MatBottomSheet }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: SearchDisplayerComponent, isStandalone: true, selector: "ta-search-displayer", inputs: { container: { classPropertyName: "container", publicName: "container", isSignal: true, isRequired: false, transformFunction: null }, placeholder: { classPropertyName: "placeholder", publicName: "placeholder", isSignal: true, isRequired: false, transformFunction: null }, searchHistory: { classPropertyName: "searchHistory", publicName: "searchHistory", isSignal: true, isRequired: false, transformFunction: null } }, outputs: { valueCompleted: "valueCompleted" }, viewQueries: [{ propertyName: "searchTemplate", first: true, predicate: ["searchTemplate"], descendants: true, read: TemplateRef }], usesInheritance: true, ngImport: i0, template: "@if (this.mobileDetection) { @if (this.container() === 'button') {\n<ta-button [options]=\"{ circular: true }\" (action)=\"this.openDialog()\">\n  <ta-font-icon [name]=\"'search'\"></ta-font-icon>\n</ta-button>\n} @else if (this.container() === 'link') {\n<div (click)=\"this.openDialog()\">\n  <ta-font-icon [name]=\"'search'\"></ta-font-icon>\n</div>\n} } @if (!this.mobileDetection) {\n<ng-template\n  [ngTemplateOutlet]=\"searchTemplate\"\n  [ngTemplateOutletContext]=\"{ options: { isDropDown: true } }\"\n></ng-template>\n}\n\n<ng-template #searchTemplate let-options=\"options\">\n  <ta-search-history-displayer\n    [placeholder]=\"this.placeholder()\"\n    [searchHistory]=\"this.searchHistory()\"\n    [isDropDown]=\"options.isDropDown\"\n    (valueCompleted)=\"this.action($event)\"\n  ></ta-search-history-displayer>\n</ng-template>\n", styles: [""], dependencies: [{ kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }, { kind: "component", type: SearchHistoryDisplayerComponent, selector: "ta-search-history-displayer", inputs: ["searchHistory", "placeholder", "isDropDown"], outputs: ["valueCompleted"] }, { kind: "component", type: ButtonComponent, selector: "ta-button", inputs: ["state", "type", "size", "icon", "options", "stopPropagationActivation"], outputs: ["action"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: SearchDisplayerComponent, decorators: [{
            type: Component,
            args: [{ selector: "ta-search-displayer", standalone: true, imports: [
                        NgIf,
                        FontIconComponent,
                        SearchHistoryDisplayerComponent,
                        ButtonComponent,
                    ], template: "@if (this.mobileDetection) { @if (this.container() === 'button') {\n<ta-button [options]=\"{ circular: true }\" (action)=\"this.openDialog()\">\n  <ta-font-icon [name]=\"'search'\"></ta-font-icon>\n</ta-button>\n} @else if (this.container() === 'link') {\n<div (click)=\"this.openDialog()\">\n  <ta-font-icon [name]=\"'search'\"></ta-font-icon>\n</div>\n} } @if (!this.mobileDetection) {\n<ng-template\n  [ngTemplateOutlet]=\"searchTemplate\"\n  [ngTemplateOutletContext]=\"{ options: { isDropDown: true } }\"\n></ng-template>\n}\n\n<ng-template #searchTemplate let-options=\"options\">\n  <ta-search-history-displayer\n    [placeholder]=\"this.placeholder()\"\n    [searchHistory]=\"this.searchHistory()\"\n    [isDropDown]=\"options.isDropDown\"\n    (valueCompleted)=\"this.action($event)\"\n  ></ta-search-history-displayer>\n</ng-template>\n" }]
        }], ctorParameters: () => [{ type: i1.MatBottomSheet }], propDecorators: { valueCompleted: [{
                type: Output
            }], searchTemplate: [{
                type: ViewChild,
                args: ["searchTemplate", { read: TemplateRef }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLWRpc3BsYXllci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvaGlzdG9yaWNhbC1yZXNlYXJjaC9zZWFyY2gtZGlzcGxheWVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9oaXN0b3JpY2FsLXJlc2VhcmNoL3NlYXJjaC1kaXNwbGF5ZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3ZDLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLE1BQU0sRUFDTixXQUFXLEVBQ1gsU0FBUyxFQUNULEtBQUssR0FDTixNQUFNLGVBQWUsQ0FBQztBQUd2QixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFDOUMsT0FBTyxFQUNMLG1DQUFtQyxHQUVwQyxNQUFNLFVBQVUsQ0FBQztBQUNsQixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFFNUMsT0FBTyxFQUFFLCtCQUErQixFQUFFLE1BQU0sK0RBQStELENBQUM7OztBQWNoSCxNQUFNLE9BQU8sd0JBQXlCLFNBQVEsZUFBZTtJQWUzRCxJQUFJLGVBQWU7UUFDakIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQztJQUNuQyxDQUFDO0lBRUQsWUFBb0IsWUFBNEI7UUFDOUMsS0FBSyxFQUFFLENBQUM7UUFEVSxpQkFBWSxHQUFaLFlBQVksQ0FBZ0I7UUFsQmhELGNBQVMsR0FBRyxLQUFLLENBQW9CLFFBQVEsQ0FBQyxDQUFDO1FBRS9DLGdCQUFXLEdBQUcsS0FBSyxDQUFTLEVBQUUsQ0FBQyxDQUFDO1FBRWhDLGtCQUFhLEdBQUcsS0FBSyxFQUVqQixDQUFDO1FBR0wsbUJBQWMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO0lBV3BDLENBQUM7SUFFTSxVQUFVO1FBQ2YsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQztZQUNoQyxPQUFPO1FBQ1QsQ0FBQztRQUNELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUdwQixtQ0FBbUMsRUFBRTtZQUNyQyxJQUFJLEVBQUU7Z0JBQ0osUUFBUSxFQUFFLElBQUksQ0FBQyxjQUFjO2dCQUM3QixPQUFPLEVBQUU7b0JBQ1AsT0FBTyxFQUFFLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRTtpQkFDL0I7YUFDRjtTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTSxNQUFNLENBQUMsTUFBVztRQUN2QixJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzVCLElBQUksTUFBTSxFQUFFLENBQUM7WUFDWCxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQyxDQUFDO0lBQ0gsQ0FBQzsrR0E3Q1Usd0JBQXdCO21HQUF4Qix3QkFBd0IscW9CQVlFLFdBQVcsb0RDN0NsRCxnMUJBdUJBLDBEREtJLGlCQUFpQixtRkFDakIsK0JBQStCLDZKQUMvQixlQUFlOzs0RkFHTix3QkFBd0I7a0JBWnBDLFNBQVM7K0JBQ0UscUJBQXFCLGNBR25CLElBQUksV0FDUDt3QkFDUCxJQUFJO3dCQUNKLGlCQUFpQjt3QkFDakIsK0JBQStCO3dCQUMvQixlQUFlO3FCQUNoQjttRkFZRCxjQUFjO3NCQURiLE1BQU07Z0JBSVAsY0FBYztzQkFEYixTQUFTO3VCQUFDLGdCQUFnQixFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5nSWYgfSBmcm9tIFwiQGFuZ3VsYXIvY29tbW9uXCI7XG5pbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgT3V0cHV0LFxuICBUZW1wbGF0ZVJlZixcbiAgVmlld0NoaWxkLFxuICBpbnB1dCxcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE1hdEJvdHRvbVNoZWV0IH0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsL2JvdHRvbS1zaGVldFwiO1xuXG5pbXBvcnQgeyBGb250SWNvbkNvbXBvbmVudCB9IGZyb20gXCJAdGEvaWNvbnNcIjtcbmltcG9ydCB7XG4gIEJvdHRvbVNoZWV0VGVtcGxhdGVHZW5lcmljQ29tcG9uZW50LFxuICBCb3R0b21TaGVldFRlbXBsYXRlR2VuZXJpY1BhcmFtcyxcbn0gZnJvbSBcIkB0YS9tZW51XCI7XG5pbXBvcnQgeyBCdXR0b25Db21wb25lbnQgfSBmcm9tIFwiQHRhL3VpXCI7XG5pbXBvcnQgeyBUYUJhc2VDb21wb25lbnQgfSBmcm9tIFwiQHRhL3V0aWxzXCI7XG5cbmltcG9ydCB7IFNlYXJjaEhpc3RvcnlEaXNwbGF5ZXJDb21wb25lbnQgfSBmcm9tIFwiLi9zZWFyY2gtaGlzdG9yeS1kaXNwbGF5ZXIvc2VhcmNoLWhpc3RvcnktZGlzcGxheWVyLmNvbXBvbmVudFwiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6IFwidGEtc2VhcmNoLWRpc3BsYXllclwiLFxuICB0ZW1wbGF0ZVVybDogXCIuL3NlYXJjaC1kaXNwbGF5ZXIuY29tcG9uZW50Lmh0bWxcIixcbiAgc3R5bGVVcmxzOiBbXCIuL3NlYXJjaC1kaXNwbGF5ZXIuY29tcG9uZW50LnNjc3NcIl0sXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBOZ0lmLFxuICAgIEZvbnRJY29uQ29tcG9uZW50LFxuICAgIFNlYXJjaEhpc3RvcnlEaXNwbGF5ZXJDb21wb25lbnQsXG4gICAgQnV0dG9uQ29tcG9uZW50LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBTZWFyY2hEaXNwbGF5ZXJDb21wb25lbnQgZXh0ZW5kcyBUYUJhc2VDb21wb25lbnQge1xuICBjb250YWluZXIgPSBpbnB1dDxcImJ1dHRvblwiIHwgXCJsaW5rXCI+KFwiYnV0dG9uXCIpO1xuXG4gIHBsYWNlaG9sZGVyID0gaW5wdXQ8c3RyaW5nPihcIlwiKTtcblxuICBzZWFyY2hIaXN0b3J5ID0gaW5wdXQ8e1xuICAgIHR5cGU6IHN0cmluZztcbiAgfT4oKTtcblxuICBAT3V0cHV0KClcbiAgdmFsdWVDb21wbGV0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgQFZpZXdDaGlsZChcInNlYXJjaFRlbXBsYXRlXCIsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSlcbiAgc2VhcmNoVGVtcGxhdGUhOiBUZW1wbGF0ZVJlZjx2b2lkPjtcblxuICBnZXQgbW9iaWxlRGV0ZWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmJyZWFrcG9pbnRzLmlzTW9iaWxlO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfYm90dG9tU2hlZXQ6IE1hdEJvdHRvbVNoZWV0KSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBvcGVuRGlhbG9nKCkge1xuICAgIGlmICghdGhpcy5zZWFyY2hIaXN0b3J5KCk/LnR5cGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fYm90dG9tU2hlZXQub3BlbjxcbiAgICAgIEJvdHRvbVNoZWV0VGVtcGxhdGVHZW5lcmljQ29tcG9uZW50LFxuICAgICAgQm90dG9tU2hlZXRUZW1wbGF0ZUdlbmVyaWNQYXJhbXNcbiAgICA+KEJvdHRvbVNoZWV0VGVtcGxhdGVHZW5lcmljQ29tcG9uZW50LCB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLnNlYXJjaFRlbXBsYXRlLFxuICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgb3B0aW9uczogeyBpc0Ryb3BEb3duOiBmYWxzZSB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhY3Rpb24ocmVzdWx0OiBhbnkpIHtcbiAgICB0aGlzLl9ib3R0b21TaGVldC5kaXNtaXNzKCk7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdGhpcy52YWx1ZUNvbXBsZXRlZC5lbWl0KHJlc3VsdCk7XG4gICAgfVxuICB9XG59XG4iLCJAaWYgKHRoaXMubW9iaWxlRGV0ZWN0aW9uKSB7IEBpZiAodGhpcy5jb250YWluZXIoKSA9PT0gJ2J1dHRvbicpIHtcbjx0YS1idXR0b24gW29wdGlvbnNdPVwieyBjaXJjdWxhcjogdHJ1ZSB9XCIgKGFjdGlvbik9XCJ0aGlzLm9wZW5EaWFsb2coKVwiPlxuICA8dGEtZm9udC1pY29uIFtuYW1lXT1cIidzZWFyY2gnXCI+PC90YS1mb250LWljb24+XG48L3RhLWJ1dHRvbj5cbn0gQGVsc2UgaWYgKHRoaXMuY29udGFpbmVyKCkgPT09ICdsaW5rJykge1xuPGRpdiAoY2xpY2spPVwidGhpcy5vcGVuRGlhbG9nKClcIj5cbiAgPHRhLWZvbnQtaWNvbiBbbmFtZV09XCInc2VhcmNoJ1wiPjwvdGEtZm9udC1pY29uPlxuPC9kaXY+XG59IH0gQGlmICghdGhpcy5tb2JpbGVEZXRlY3Rpb24pIHtcbjxuZy10ZW1wbGF0ZVxuICBbbmdUZW1wbGF0ZU91dGxldF09XCJzZWFyY2hUZW1wbGF0ZVwiXG4gIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IG9wdGlvbnM6IHsgaXNEcm9wRG93bjogdHJ1ZSB9IH1cIlxuPjwvbmctdGVtcGxhdGU+XG59XG5cbjxuZy10ZW1wbGF0ZSAjc2VhcmNoVGVtcGxhdGUgbGV0LW9wdGlvbnM9XCJvcHRpb25zXCI+XG4gIDx0YS1zZWFyY2gtaGlzdG9yeS1kaXNwbGF5ZXJcbiAgICBbcGxhY2Vob2xkZXJdPVwidGhpcy5wbGFjZWhvbGRlcigpXCJcbiAgICBbc2VhcmNoSGlzdG9yeV09XCJ0aGlzLnNlYXJjaEhpc3RvcnkoKVwiXG4gICAgW2lzRHJvcERvd25dPVwib3B0aW9ucy5pc0Ryb3BEb3duXCJcbiAgICAodmFsdWVDb21wbGV0ZWQpPVwidGhpcy5hY3Rpb24oJGV2ZW50KVwiXG4gID48L3RhLXNlYXJjaC1oaXN0b3J5LWRpc3BsYXllcj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=