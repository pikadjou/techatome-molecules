<ta-loader [isLoading]="this.requestState.isLoading()">
  <ta-error [message]="this.requestState.getErrorMessage()" [code]="this.requestState.getErrorStatus()">
    <ng-container *ngLet="this.list$ | async as list">
      <ta-empty [isEmpty]="!list || list.length === 0">
        <ng-container *ngIf="!this.showTemplate">
          <ta-choice-list *ngIf="list" [list]="list" (selected)="this.hover($event)"></ta-choice-list>
        </ng-container>
        <ng-container *ngIf="this.showTemplate">
          <div class="align-center">
            <ta-font-icon name="arrow-back" (click)="this.showTemplate = null"></ta-font-icon>
            <ta-title [level]="4">{{ this.showTemplate.code }}</ta-title>
          </div>
          <hr />
          <ta-choice-detail
            [template]="this.showTemplate"
            (selected)="this.select($event)"
            class="full-width"
          ></ta-choice-detail>
        </ng-container>
      </ta-empty>
    </ng-container>
  </ta-error>
</ta-loader>
