import { NgFor } from "@angular/common";
import { Component } from "@angular/core";
import { tap } from "rxjs/operators";
import { ToastComponent } from "@ta/ui";
import { TaBaseComponent } from "@ta/utils";
import { NotificationInlineComponent } from "../inline/notification-inline.component";
import * as i0 from "@angular/core";
import * as i1 from "../../../services/notification.service";
export class NotificationBoxComponent extends TaBaseComponent {
    constructor(_notificationService) {
        super();
        this._notificationService = _notificationService;
        this.list = [];
        this._registerSubscription(this._notificationService.newNotification$
            .pipe(tap((notification) => {
            this.list.push(notification);
        }), tap((notification) => {
            setTimeout(() => {
                this.list = this.list.filter((item) => item !== notification);
            }, 3000);
        }))
            .subscribe());
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: NotificationBoxComponent, deps: [{ token: i1.TaNotificationService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: NotificationBoxComponent, isStandalone: true, selector: "ta-notification-box", usesInheritance: true, ngImport: i0, template: "<div class=\"notification-box_container flex-column g-space-sm\">\n  @for (item of this.list; track item) {\n  <div>\n    <ta-toast [code]=\"item.code\">\n      <ta-notification-inline\n        [message]=\"item.message\"\n        [code]=\"item.code\"\n        [showClose]=\"false\"\n      ></ta-notification-inline>\n    </ta-toast>\n  </div>\n  }\n</div>\n", styles: [".notification-box_container{position:fixed;bottom:calc(24px + env(safe-area-inset-bottom));width:90%;right:5%;z-index:5000}@media (min-width: 768px){.notification-box_container{width:auto;min-width:200px;max-width:500px}}\n"], dependencies: [{ kind: "component", type: NotificationInlineComponent, selector: "ta-notification-inline", inputs: ["message", "code", "showClose"], outputs: ["askClose"] }, { kind: "component", type: ToastComponent, selector: "ta-toast", inputs: ["code"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: NotificationBoxComponent, decorators: [{
            type: Component,
            args: [{ selector: "ta-notification-box", standalone: true, imports: [NgFor, NotificationInlineComponent, ToastComponent], template: "<div class=\"notification-box_container flex-column g-space-sm\">\n  @for (item of this.list; track item) {\n  <div>\n    <ta-toast [code]=\"item.code\">\n      <ta-notification-inline\n        [message]=\"item.message\"\n        [code]=\"item.code\"\n        [showClose]=\"false\"\n      ></ta-notification-inline>\n    </ta-toast>\n  </div>\n  }\n</div>\n", styles: [".notification-box_container{position:fixed;bottom:calc(24px + env(safe-area-inset-bottom));width:90%;right:5%;z-index:5000}@media (min-width: 768px){.notification-box_container{width:auto;min-width:200px;max-width:500px}}\n"] }]
        }], ctorParameters: () => [{ type: i1.TaNotificationService }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9uLWJveC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvcG9wdXAvYm94L25vdGlmaWNhdGlvbi1ib3guY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb21wb25lbnRzL3BvcHVwL2JveC9ub3RpZmljYXRpb24tYm94LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN4QyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVyQyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ3hDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFJNUMsT0FBTyxFQUFFLDJCQUEyQixFQUFFLE1BQU0seUNBQXlDLENBQUM7OztBQVN0RixNQUFNLE9BQU8sd0JBQXlCLFNBQVEsZUFBZTtJQUczRCxZQUFvQixvQkFBMkM7UUFDN0QsS0FBSyxFQUFFLENBQUM7UUFEVSx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXVCO1FBRnhELFNBQUksR0FBbUQsRUFBRSxDQUFDO1FBSy9ELElBQUksQ0FBQyxxQkFBcUIsQ0FDeEIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGdCQUFnQjthQUN2QyxJQUFJLENBQ0gsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFLEVBQUU7WUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUFDLEVBQ0YsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFLEVBQUU7WUFDbkIsVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDZCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEtBQUssWUFBWSxDQUFDLENBQUM7WUFDaEUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQ0g7YUFDQSxTQUFTLEVBQUUsQ0FDZixDQUFDO0lBQ0osQ0FBQzsrR0FwQlUsd0JBQXdCO21HQUF4Qix3QkFBd0Isc0dDbkJyQyx1V0FhQSx5UkRJbUIsMkJBQTJCLG9JQUFFLGNBQWM7OzRGQUVqRCx3QkFBd0I7a0JBUHBDLFNBQVM7K0JBQ0UscUJBQXFCLGNBR25CLElBQUksV0FDUCxDQUFDLEtBQUssRUFBRSwyQkFBMkIsRUFBRSxjQUFjLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZ0ZvciB9IGZyb20gXCJAYW5ndWxhci9jb21tb25cIjtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5cbmltcG9ydCB7IHRhcCB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xuXG5pbXBvcnQgeyBUb2FzdENvbXBvbmVudCB9IGZyb20gXCJAdGEvdWlcIjtcbmltcG9ydCB7IFRhQmFzZUNvbXBvbmVudCB9IGZyb20gXCJAdGEvdXRpbHNcIjtcblxuaW1wb3J0IHsgRU5vdGlmaWNhdGlvbkNvZGUgfSBmcm9tIFwiLi4vLi4vLi4vZW51bVwiO1xuaW1wb3J0IHsgVGFOb3RpZmljYXRpb25TZXJ2aWNlIH0gZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL25vdGlmaWNhdGlvbi5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25JbmxpbmVDb21wb25lbnQgfSBmcm9tIFwiLi4vaW5saW5lL25vdGlmaWNhdGlvbi1pbmxpbmUuY29tcG9uZW50XCI7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogXCJ0YS1ub3RpZmljYXRpb24tYm94XCIsXG4gIHRlbXBsYXRlVXJsOiBcIi4vbm90aWZpY2F0aW9uLWJveC5jb21wb25lbnQuaHRtbFwiLFxuICBzdHlsZVVybHM6IFtcIi4vbm90aWZpY2F0aW9uLWJveC5jb21wb25lbnQuc2Nzc1wiXSxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW05nRm9yLCBOb3RpZmljYXRpb25JbmxpbmVDb21wb25lbnQsIFRvYXN0Q29tcG9uZW50XSxcbn0pXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uQm94Q29tcG9uZW50IGV4dGVuZHMgVGFCYXNlQ29tcG9uZW50IHtcbiAgcHVibGljIGxpc3Q6IHsgbWVzc2FnZTogc3RyaW5nOyBjb2RlOiBFTm90aWZpY2F0aW9uQ29kZSB9W10gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9ub3RpZmljYXRpb25TZXJ2aWNlOiBUYU5vdGlmaWNhdGlvblNlcnZpY2UpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fcmVnaXN0ZXJTdWJzY3JpcHRpb24oXG4gICAgICB0aGlzLl9ub3RpZmljYXRpb25TZXJ2aWNlLm5ld05vdGlmaWNhdGlvbiRcbiAgICAgICAgLnBpcGUoXG4gICAgICAgICAgdGFwKChub3RpZmljYXRpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKG5vdGlmaWNhdGlvbik7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGFwKChub3RpZmljYXRpb24pID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmxpc3QgPSB0aGlzLmxpc3QuZmlsdGVyKChpdGVtKSA9PiBpdGVtICE9PSBub3RpZmljYXRpb24pO1xuICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICAuc3Vic2NyaWJlKClcbiAgICApO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwibm90aWZpY2F0aW9uLWJveF9jb250YWluZXIgZmxleC1jb2x1bW4gZy1zcGFjZS1zbVwiPlxuICBAZm9yIChpdGVtIG9mIHRoaXMubGlzdDsgdHJhY2sgaXRlbSkge1xuICA8ZGl2PlxuICAgIDx0YS10b2FzdCBbY29kZV09XCJpdGVtLmNvZGVcIj5cbiAgICAgIDx0YS1ub3RpZmljYXRpb24taW5saW5lXG4gICAgICAgIFttZXNzYWdlXT1cIml0ZW0ubWVzc2FnZVwiXG4gICAgICAgIFtjb2RlXT1cIml0ZW0uY29kZVwiXG4gICAgICAgIFtzaG93Q2xvc2VdPVwiZmFsc2VcIlxuICAgICAgPjwvdGEtbm90aWZpY2F0aW9uLWlubGluZT5cbiAgICA8L3RhLXRvYXN0PlxuICA8L2Rpdj5cbiAgfVxuPC9kaXY+XG4iXX0=