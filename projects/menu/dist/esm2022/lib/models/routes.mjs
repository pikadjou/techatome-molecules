export var TaMainRoute;
(function (TaMainRoute) {
    TaMainRoute["HOME"] = "HOME";
    TaMainRoute["USERLOGIN"] = "USERLOGIN";
    TaMainRoute["USERLOGOUT"] = "USERLOGOUT";
    TaMainRoute["NOTIFICATIONS"] = "NOTIFICATIONS";
    TaMainRoute["REDIRECT"] = "REDIRECT";
})(TaMainRoute || (TaMainRoute = {}));
export class TaRoutesCore {
    constructor() {
        this.routes = [
            {
                key: TaMainRoute.HOME,
                url: '',
            },
            {
                key: TaMainRoute.USERLOGIN,
                url: 'login',
            },
            {
                key: TaMainRoute.USERLOGOUT,
                url: 'logout',
            },
            {
                key: TaMainRoute.NOTIFICATIONS,
                url: 'notifications',
            },
            {
                key: TaMainRoute.REDIRECT,
                url: 'redirect',
            },
        ];
    }
    addRoute(route) {
        this.routes.push(route);
    }
    addRoutes(routes) {
        routes.forEach(route => this.addRoute(route));
    }
    getHome() {
        return this.getAbsoluteUrl([TaMainRoute.HOME]);
    }
    getLogin() {
        return this.getAbsoluteUrl([TaMainRoute.USERLOGIN]);
    }
    getLogout() {
        return this.getAbsoluteUrl([TaMainRoute.USERLOGOUT]);
    }
    getUrl(eNums, params = {}, strict = false) {
        const url = this._replaceParams(this._getUrl(eNums), params);
        return strict ? this._removeParams(url) : url;
    }
    getAbsoluteUrl(eNums, params = {}, strict = false) {
        const url = this._replaceParams(this._getUrl(eNums, true), params);
        return strict ? this._removeParams(url) : url;
    }
    addQueryParamsToUrl(route, params = {}) {
        const keys = Object.keys(params);
        for (let key of keys) {
            route.params[key] = params[key];
        }
        return route.toString();
    }
    getPermission(eNums) {
        const route = this._getRouteByENum(eNums);
        if (route === null) {
            return true;
        }
        else {
            return route.canActivate === undefined ? true : route.canActivate;
        }
    }
    _replaceParams(url, params) {
        if (!params || Object.keys(params).length === 0) {
            return url;
        }
        // Create regex using the keys of the replacement object.
        const regex = new RegExp(':(' + Object.keys(params).join('|') + ')', 'g');
        // Replace the string by the value in object
        return url.replace(regex, (m, $1) => params[$1] || m);
    }
    _removeParams(url) {
        const regex = new RegExp('/:([a-zA-Z0-9_]*)', 'g');
        return url.replace(regex, '');
    }
    _getRouteByENum(eNums) {
        let route = null;
        for (const eNum of eNums) {
            route = this._getByENum(route === null ? this.routes : route.children, eNum);
            if (route === null) {
                return null;
            }
        }
        return route;
    }
    _getUrl(eNums, absolute = false) {
        let route = null;
        let url = '';
        for (const eNum of eNums) {
            route = this._getByENum(route === null ? this.routes : route.children, eNum);
            if (route === null) {
                break;
            }
            url += (url === '' ? '' : '/') + route.url;
        }
        return route === null ? '' : absolute === false ? route.url : '/' + url;
    }
    _getByENum(routes, eNum) {
        if (!routes) {
            return null;
        }
        for (const route of routes) {
            if (route.key === eNum) {
                return route;
            }
        }
        return null;
    }
}
export const TaRoutes = new TaRoutesCore();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9tb2RlbHMvcm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sQ0FBTixJQUFZLFdBTVg7QUFORCxXQUFZLFdBQVc7SUFDckIsNEJBQWEsQ0FBQTtJQUNiLHNDQUF1QixDQUFBO0lBQ3ZCLHdDQUF5QixDQUFBO0lBQ3pCLDhDQUErQixDQUFBO0lBQy9CLG9DQUFxQixDQUFBO0FBQ3ZCLENBQUMsRUFOVyxXQUFXLEtBQVgsV0FBVyxRQU10QjtBQVFELE1BQU0sT0FBTyxZQUFZO0lBd0J2QjtRQXZCTyxXQUFNLEdBQWE7WUFDeEI7Z0JBQ0UsR0FBRyxFQUFFLFdBQVcsQ0FBQyxJQUFJO2dCQUNyQixHQUFHLEVBQUUsRUFBRTthQUNSO1lBQ0Q7Z0JBQ0UsR0FBRyxFQUFFLFdBQVcsQ0FBQyxTQUFTO2dCQUMxQixHQUFHLEVBQUUsT0FBTzthQUNiO1lBQ0Q7Z0JBQ0UsR0FBRyxFQUFFLFdBQVcsQ0FBQyxVQUFVO2dCQUMzQixHQUFHLEVBQUUsUUFBUTthQUNkO1lBQ0Q7Z0JBQ0UsR0FBRyxFQUFFLFdBQVcsQ0FBQyxhQUFhO2dCQUM5QixHQUFHLEVBQUUsZUFBZTthQUNyQjtZQUNEO2dCQUNFLEdBQUcsRUFBRSxXQUFXLENBQUMsUUFBUTtnQkFDekIsR0FBRyxFQUFFLFVBQVU7YUFDaEI7U0FDRixDQUFDO0lBRWEsQ0FBQztJQUVULFFBQVEsQ0FBQyxLQUFhO1FBQzNCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFDTSxTQUFTLENBQUMsTUFBZ0I7UUFDL0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBQ00sT0FBTztRQUNaLE9BQU8sSUFBSSxDQUFDLGNB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Q0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7SUFDMUUsQ0FBQztJQUVPLFVBQVUsQ0FBQyxNQUFtQyxFQUFFLElBQVk7UUFDbEUsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ1osT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBQ0QsS0FBSyxNQUFNLEtBQUssSUFBSSxNQUFNLEVBQUUsQ0FBQztZQUMzQixJQUFJLEtBQUssQ0FBQyxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUM7Z0JBQ3ZCLE9BQU8sS0FBSyxDQUFDO1lBQ2YsQ0FBQztRQUNILENBQUM7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7Q0FDRjtBQUNELE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWN0aXZhdGVkUm91dGVTbmFwc2hvdCB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbmV4cG9ydCBlbnVtIFRhTWFpblJvdXRlIHtcbiAgSE9NRSA9ICdIT01FJyxcbiAgVVNFUkxPR0lOID0gJ1VTRVJMT0dJTicsXG4gIFVTRVJMT0dPVVQgPSAnVVNFUkxPR09VVCcsXG4gIE5PVElGSUNBVElPTlMgPSAnTk9USUZJQ0FUSU9OUycsXG4gIFJFRElSRUNUID0gJ1JFRElSRUNUJyxcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSVJvdXRlIHtcbiAga2V5OiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICBjYW5BY3RpdmF0ZT86IGJvb2xlYW47XG4gIGNoaWxkcmVuPzogSVJvdXRlW107XG59XG5cbmV4cG9ydCBjbGFzcyBUYVJvdXRlc0NvcmUge1xuICBwdWJsaWMgcm91dGVzOiBJUm91dGVbXSA9IFtcbiAgICB7XG4gICAgICBrZXk6IFRhTWFpblJvdXRlLkhPTUUsXG4gICAgICB1cmw6ICcnLFxuICAgIH0sXG4gICAge1xuICAgICAga2V5OiBUYU1haW5Sb3V0ZS5VU0VSTE9HSU4sXG4gICAgICB1cmw6ICdsb2dpbicsXG4gICAgfSxcbiAgICB7XG4gICAgICBrZXk6IFRhTWFpblJvdXRlLlVTRVJMT0dPVVQsXG4gICAgICB1cmw6ICdsb2dvdXQnLFxuICAgIH0sXG4gICAge1xuICAgICAga2V5OiBUYU1haW5Sb3V0ZS5OT1RJRklDQVRJT05TLFxuICAgICAgdXJsOiAnbm90aWZpY2F0aW9ucycsXG4gICAgfSxcbiAgICB7XG4gICAgICBrZXk6IFRhTWFpblJvdXRlLlJFRElSRUNULFxuICAgICAgdXJsOiAncmVkaXJlY3QnLFxuICAgIH0sXG4gIF07XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIHB1YmxpYyBhZGRSb3V0ZShyb3V0ZTogSVJvdXRlKSB7XG4gICAgdGhpcy5yb3V0ZXMucHVzaChyb3V0ZSk7XG4gIH1cbiAgcHVibGljIGFkZFJvdXRlcyhyb3V0ZXM6IElSb3V0ZVtdKSB7XG4gICAgcm91dGVzLmZvckVhY2gocm91dGUgPT4gdGhpcy5hZGRSb3V0ZShyb3V0ZSkpO1xuICB9XG4gIHB1YmxpYyBnZXRIb21lKCkge1xuICAgIHJldHVybiB0aGlzLmdldEFic29sdXRlVXJsKFtUYU1haW5Sb3V0ZS5IT01FXSk7XG4gIH1cbiAgcHVibGljIGdldExvZ2luKCkge1xuICAgIHJldHVybiB0aGlzLmdldEFic29sdXRlVXJsKFtUYU1haW5Sb3V0ZS5VU0VSTE9HSU5dKTtcbiAgfVxuICBwdWJsaWMgZ2V0TG9nb3V0KCkge1xuICAgIHJldHVybiB0aGlzLmdldEFic29sdXRlVXJsKFtUYU1haW5Sb3V0ZS5VU0VSTE9HT1VUXSk7XG4gIH1cbiAgcHVibGljIGdldFVybChlTnVtczogc3RyaW5nW10sIHBhcmFtczoge30gPSB7fSwgc3RyaWN0ID0gZmFsc2UpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVybCA9IHRoaXMuX3JlcGxhY2VQYXJhbXModGhpcy5fZ2V0VXJsKGVOdW1zKSwgcGFyYW1zKTtcbiAgICByZXR1cm4gc3RyaWN0ID8gdGhpcy5fcmVtb3ZlUGFyYW1zKHVybCkgOiB1cmw7XG4gIH1cbiAgcHVibGljIGdldEFic29sdXRlVXJsKGVOdW1zOiBzdHJpbmdbXSwgcGFyYW1zOiB7fSA9IHt9LCBzdHJpY3QgPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdXJsID0gdGhpcy5fcmVwbGFjZVBhcmFtcyh0aGlzLl9nZXRVcmwoZU51bXMsIHRydWUpLCBwYXJhbXMpO1xuICAgIHJldHVybiBzdHJpY3QgPyB0aGlzLl9yZW1vdmVQYXJhbXModXJsKSA6IHVybDtcbiAgfVxuICBwdWJsaWMgYWRkUXVlcnlQYXJhbXNUb1VybChyb3V0ZTogQWN0aXZhdGVkUm91dGVTbmFwc2hvdCwgcGFyYW1zOiB7IFtpbmRleDogc3RyaW5nXTogYW55IH0gPSB7fSk6IHN0cmluZyB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHBhcmFtcyk7XG5cbiAgICBmb3IgKGxldCBrZXkgb2Yga2V5cykge1xuICAgICAgcm91dGUucGFyYW1zW2tleV0gPSBwYXJhbXNba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHJvdXRlLnRvU3RyaW5nKCk7XG4gIH1cbiAgcHVibGljIGdldFBlcm1pc3Npb24oZU51bXM6IGFueVtdKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgcm91dGUgPSB0aGlzLl9nZXRSb3V0ZUJ5RU51bShlTnVtcyk7XG4gICAgaWYgKHJvdXRlID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJvdXRlLmNhbkFjdGl2YXRlID09PSB1bmRlZmluZWQgPyB0cnVlIDogcm91dGUuY2FuQWN0aXZhdGU7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVwbGFjZVBhcmFtcyh1cmw6IHN0cmluZywgcGFyYW1zOiBhbnkpOiBzdHJpbmcge1xuICAgIGlmICghcGFyYW1zIHx8IE9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgICAvLyBDcmVhdGUgcmVnZXggdXNpbmcgdGhlIGtleXMgb2YgdGhlIHJlcGxhY2VtZW50IG9iamVjdC5cbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoJzooJyArIE9iamVjdC5rZXlzKHBhcmFtcykuam9pbignfCcpICsgJyknLCAnZycpO1xuICAgIC8vIFJlcGxhY2UgdGhlIHN0cmluZyBieSB0aGUgdmFsdWUgaW4gb2JqZWN0XG4gICAgcmV0dXJuIHVybC5yZXBsYWNlKHJlZ2V4LCAobSwgJDEpID0+IHBhcmFtc1skMV0gfHwgbSk7XG4gIH1cbiAgcHJpdmF0ZSBfcmVtb3ZlUGFyYW1zKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoJy86KFthLXpBLVowLTlfXSopJywgJ2cnKTtcbiAgICByZXR1cm4gdXJsLnJlcGxhY2UocmVnZXgsICcnKTtcbiAgfVxuICBwcml2YXRlIF9nZXRSb3V0ZUJ5RU51bShlTnVtczogYW55W10pOiBJUm91dGUgfCBudWxsIHtcbiAgICBsZXQgcm91dGU6IElSb3V0ZSB8IG51bGwgPSBudWxsO1xuICAgIGZvciAoY29uc3QgZU51bSBvZiBlTnVtcykge1xuICAgICAgcm91dGUgPSB0aGlzLl9nZXRCeUVOdW0ocm91dGUgPT09IG51bGwgPyB0aGlzLnJvdXRlcyA6IHJvdXRlLmNoaWxkcmVuLCBlTnVtKTtcbiAgICAgIGlmIChyb3V0ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJvdXRlO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0VXJsKGVOdW1zOiBhbnlbXSwgYWJzb2x1dGUgPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgbGV0IHJvdXRlOiBJUm91dGUgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgdXJsID0gJyc7XG4gICAgZm9yIChjb25zdCBlTnVtIG9mIGVOdW1zKSB7XG4gICAgICByb3V0ZSA9IHRoaXMuX2dldEJ5RU51bShyb3V0ZSA9PT0gbnVsbCA/IHRoaXMucm91dGVzIDogcm91dGUuY2hpbGRyZW4sIGVOdW0pO1xuICAgICAgaWYgKHJvdXRlID09PSBudWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdXJsICs9ICh1cmwgPT09ICcnID8gJycgOiAnLycpICsgcm91dGUudXJsO1xuICAgIH1cbiAgICByZXR1cm4gcm91dGUgPT09IG51bGwgPyAnJyA6IGFic29sdXRlID09PSBmYWxzZSA/IHJvdXRlLnVybCA6ICcvJyArIHVybDtcbiAgfVxuXG4gIHByaXZhdGUgX2dldEJ5RU51bShyb3V0ZXM6IElSb3V0ZVtdIHwgbnVsbCB8IHVuZGVmaW5lZCwgZU51bTogc3RyaW5nKTogSVJvdXRlIHwgbnVsbCB7XG4gICAgaWYgKCFyb3V0ZXMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJvdXRlIG9mIHJvdXRlcykge1xuICAgICAgaWYgKHJvdXRlLmtleSA9PT0gZU51bSkge1xuICAgICAgICByZXR1cm4gcm91dGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5leHBvcnQgY29uc3QgVGFSb3V0ZXMgPSBuZXcgVGFSb3V0ZXNDb3JlKCk7XG4iXX0=