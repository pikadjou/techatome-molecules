import { BehaviorSubject } from "rxjs";
import { Menu, MenuBase } from "../models/public-api";
export class FilterHelper {
    get filter() {
        return this._filter;
    }
    set filter(filter) {
        this._filter = filter;
        this.refresh$.next(this._filter);
    }
    constructor(items) {
        this.refresh$ = new BehaviorSubject("");
        this._filter = "";
        this._items = items;
    }
    getMenu() {
        return new Menu({
            elements: this._items.map((item) => {
                const key = this._getKey(item.label);
                return new MenuBase({
                    key: key,
                    label: item.label,
                    callback: () => (this.filter = key),
                    defaultOpen: item.defaultOpen,
                    order: item.order,
                    visible$: item.visible$,
                    translationData: item.translationData,
                    options: item.options,
                });
            }),
            direction: "responsive",
        });
    }
    updateMenuDatas(data) {
        for (const item of data) {
            const itemToModify = this._items.find((x) => this._getKey(x.label) === item.key);
            if (itemToModify) {
                itemToModify.translationData = item.translationData;
                itemToModify.options = item.options;
                if (item.visible$) {
                    itemToModify.visible$ = item.visible$;
                }
            }
        }
    }
    _getKey(label) {
        const lastDot = label.lastIndexOf(".");
        if (lastDot !== -1) {
            return label.substring(lastDot + 1);
        }
        else {
            return label;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9oZWxwZXJzL2ZpbHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFjLE1BQU0sTUFBTSxDQUFDO0FBRW5ELE9BQU8sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFdEQsTUFBTSxPQUFPLFlBQVk7SUFHdkIsSUFBSSxNQUFNO1FBQ1IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3RCLENBQUM7SUFDRCxJQUFJLE1BQU0sQ0FBQyxNQUFjO1FBQ3ZCLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1FBRXRCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBV0QsWUFDRSxLQU9HO1FBNUJFLGFBQVEsR0FBRyxJQUFJLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQVVsQyxZQUFPLEdBQVcsRUFBRSxDQUFDO1FBb0IzQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBQ00sT0FBTztRQUNaLE9BQU8sSUFBSSxJQUFJLENBQUM7WUFDZCxRQUFRLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtnQkFDakMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3JDLE9BQU8sSUFBSSxRQUFRLENBQUM7b0JBQ2xCLEdBQUcsRUFBRSxHQUFHO29CQUNSLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSztvQkFDakIsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7b0JBQ25DLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztvQkFDN0IsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO29CQUNqQixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7b0JBQ3ZCLGVBQWUsRUFBRSxJQUFJLENBQUMsZUFBZTtvQkFDckMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO2lCQUN0QixDQUFDLENBQUM7WUFDTCxDQUFDLENBQUM7WUFDRixTQUFTLEVBQUUsWUFBWTtTQUN4QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU0sZUFBZSxDQUNwQixJQUtHO1FBRUgsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUN4QixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDbkMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQzFDLENBQUM7WUFDRixJQUFJLFlBQVksRUFBRSxDQUFDO2dCQUNqQixZQUFZLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUM7Z0JBQ3BELFlBQVksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDcEMsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7b0JBQ2xCLFlBQVksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQkFDeEMsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVPLE9BQU8sQ0FBQyxLQUFhO1FBQzNCLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkMsSUFBSSxPQUFPLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNuQixPQUFPLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLENBQUM7YUFBTSxDQUFDO1lBQ04sT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSBcInJ4anNcIjtcblxuaW1wb3J0IHsgTWVudSwgTWVudUJhc2UgfSBmcm9tIFwiLi4vbW9kZWxzL3B1YmxpYy1hcGlcIjtcblxuZXhwb3J0IGNsYXNzIEZpbHRlckhlbHBlciB7XG4gIHB1YmxpYyByZWZyZXNoJCA9IG5ldyBCZWhhdmlvclN1YmplY3QoXCJcIik7XG5cbiAgZ2V0IGZpbHRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlsdGVyO1xuICB9XG4gIHNldCBmaWx0ZXIoZmlsdGVyOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9maWx0ZXIgPSBmaWx0ZXI7XG5cbiAgICB0aGlzLnJlZnJlc2gkLm5leHQodGhpcy5fZmlsdGVyKTtcbiAgfVxuICBwcml2YXRlIF9maWx0ZXI6IHN0cmluZyA9IFwiXCI7XG5cbiAgcHJpdmF0ZSBfaXRlbXM6IHtcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIGRlZmF1bHRPcGVuOiBib29sZWFuO1xuICAgIG9yZGVyPzogbnVtYmVyO1xuICAgIHZpc2libGUkPzogT2JzZXJ2YWJsZTxib29sZWFuPjtcbiAgICB0cmFuc2xhdGlvbkRhdGE/OiB7fTtcbiAgICBvcHRpb25zPzogeyBub3RpZmljYXRpb25CYWRnZTogeyBsYWJlbDogbnVtYmVyOyBzdHlsZT86IHN0cmluZyB9IH07XG4gIH1bXTtcbiAgY29uc3RydWN0b3IoXG4gICAgaXRlbXM6IHtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICBkZWZhdWx0T3BlbjogYm9vbGVhbjtcbiAgICAgIG9yZGVyPzogbnVtYmVyO1xuICAgICAgdmlzaWJsZSQ/OiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuICAgICAgdHJhbnNsYXRpb25EYXRhPzoge307XG4gICAgICBvcHRpb25zPzogeyBub3RpZmljYXRpb25CYWRnZTogeyBsYWJlbDogbnVtYmVyOyBzdHlsZT86IHN0cmluZyB9IH07XG4gICAgfVtdXG4gICkge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gIH1cbiAgcHVibGljIGdldE1lbnUoKSB7XG4gICAgcmV0dXJuIG5ldyBNZW51KHtcbiAgICAgIGVsZW1lbnRzOiB0aGlzLl9pdGVtcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5fZ2V0S2V5KGl0ZW0ubGFiZWwpO1xuICAgICAgICByZXR1cm4gbmV3IE1lbnVCYXNlKHtcbiAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcbiAgICAgICAgICBjYWxsYmFjazogKCkgPT4gKHRoaXMuZmlsdGVyID0ga2V5KSxcbiAgICAgICAgICBkZWZhdWx0T3BlbjogaXRlbS5kZWZhdWx0T3BlbixcbiAgICAgICAgICBvcmRlcjogaXRlbS5vcmRlcixcbiAgICAgICAgICB2aXNpYmxlJDogaXRlbS52aXNpYmxlJCxcbiAgICAgICAgICB0cmFuc2xhdGlvbkRhdGE6IGl0ZW0udHJhbnNsYXRpb25EYXRhLFxuICAgICAgICAgIG9wdGlvbnM6IGl0ZW0ub3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICB9KSxcbiAgICAgIGRpcmVjdGlvbjogXCJyZXNwb25zaXZlXCIsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlTWVudURhdGFzKFxuICAgIGRhdGE6IHtcbiAgICAgIGtleTogc3RyaW5nO1xuICAgICAgdHJhbnNsYXRpb25EYXRhPzogb2JqZWN0O1xuICAgICAgb3B0aW9ucz86IHsgbm90aWZpY2F0aW9uQmFkZ2U6IHsgbGFiZWw6IG51bWJlcjsgc3R5bGU/OiBzdHJpbmcgfSB9O1xuICAgICAgdmlzaWJsZSQ/OiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuICAgIH1bXVxuICApIHtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YSkge1xuICAgICAgY29uc3QgaXRlbVRvTW9kaWZ5ID0gdGhpcy5faXRlbXMuZmluZChcbiAgICAgICAgKHgpID0+IHRoaXMuX2dldEtleSh4LmxhYmVsKSA9PT0gaXRlbS5rZXlcbiAgICAgICk7XG4gICAgICBpZiAoaXRlbVRvTW9kaWZ5KSB7XG4gICAgICAgIGl0ZW1Ub01vZGlmeS50cmFuc2xhdGlvbkRhdGEgPSBpdGVtLnRyYW5zbGF0aW9uRGF0YTtcbiAgICAgICAgaXRlbVRvTW9kaWZ5Lm9wdGlvbnMgPSBpdGVtLm9wdGlvbnM7XG4gICAgICAgIGlmIChpdGVtLnZpc2libGUkKSB7XG4gICAgICAgICAgaXRlbVRvTW9kaWZ5LnZpc2libGUkID0gaXRlbS52aXNpYmxlJDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2dldEtleShsYWJlbDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsYXN0RG90ID0gbGFiZWwubGFzdEluZGV4T2YoXCIuXCIpO1xuICAgIGlmIChsYXN0RG90ICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGxhYmVsLnN1YnN0cmluZyhsYXN0RG90ICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBsYWJlbDtcbiAgICB9XG4gIH1cbn1cbiJdfQ==