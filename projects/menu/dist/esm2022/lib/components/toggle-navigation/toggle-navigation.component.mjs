import { NgIf, NgClass, NgTemplateOutlet } from '@angular/common';
import { Component, Input } from '@angular/core';
import { RouterModule } from '@angular/router';
import { TranslateModule } from '@ngx-translate/core';
import { FontIconComponent, LocalIconComponent } from '@ta/icons';
import { SwiperLightComponent } from '@ta/ui';
import { getFontIcon, getIcon, hasFontIcon, hasIconImage } from '../../helpers/icon-manager';
import { CamTranslationMenu } from '../../translation.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@ngx-translate/core";
/*
 ** @deprecated
 */
export class ToggleNavigationComponent {
    constructor() {
        this.activeKey = '';
        this.notifEnabled = false;
        CamTranslationMenu.getInstance();
    }
    get containerCss() {
        return this.container ?? '';
    }
    ngOnInit() {
        if (this.menu.elements.find(element => element.options?.notificationBadge?.label)) {
            this.notifEnabled = true;
        }
        const activeItem = this.menu.elements.find(item => item.defaultOpen);
        if (activeItem) {
            this.callback(activeItem);
        }
    }
    hasFontIcon(item) {
        return hasFontIcon(item);
    }
    hasIconImage(item) {
        return hasIconImage(item);
    }
    getIcon(item) {
        return getIcon(item);
    }
    getFontIcon(item) {
        return getFontIcon(item);
    }
    getLink(item) {
        if (item.link && item.link !== '')
            return item.link;
        return ''; // TODO this._navigationService.currentPageUrl;
    }
    callback(item) {
        if (item.disabled) {
            return;
        }
        this.activeKey = item.key;
        if (item.callback) {
            item.callback();
        }
    }
    isActive(item) {
        return item.key === this.activeKey;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: ToggleNavigationComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: ToggleNavigationComponent, isStandalone: true, selector: "ta-toggle-navigation", inputs: { menu: "menu", container: "container" }, ngImport: i0, template: "<div class=\"toggle-container\" [ngClass]=\"this.containerCss\" [class.switch-container]=\"this.container === 'switch'\">\n  <ta-swiper-light\n    [items]=\"this.menu.elements\"\n    [template]=\"template\"\n    [forced]=\"true\"\n    swiperClasses=\"g-space-lg pt-space-md\"\n  ></ta-swiper-light>\n</div>\n\n<ng-template #template let-element=\"element\">\n  @if (element.callback || element.disabled) {\n    <div\n      (click)=\"this.callback(element)\"\n      class=\"toggle-element\"\n      [class.active]=\"this.isActive(element)\"\n      [class.disabled]=\"element.disabled\"\n    >\n      <ng-template\n        [ngTemplateOutlet]=\"Item\"\n        [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n      >\n      </ng-template>\n    </div>\n  } @else {\n    <div\n      class=\"toggle-element\"\n      routerLinkActive=\"active\"\n      [routerLinkActiveOptions]=\"{ exact: element.exact }\"\n      [routerLink]=\"[this.getLink(element)]\"\n      [queryParamsHandling]=\"element.queryParamsHandling\"\n      [replaceUrl]=\"element.replaceUrl\"\n      [ngClass]=\"{ disabled: element.disabled }\"\n    >\n      <ng-template\n        [ngTemplateOutlet]=\"Item\"\n        [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n      >\n      </ng-template>\n    </div>\n  }\n</ng-template>\n\n<ng-template #Item let-item=\"item\" [typedTemplate]=\"this.typeItem\">\n  <div class=\"label flex-row align-center mb-space-xs\">\n    @if (this.hasFontIcon(item) || this.hasIconImage(item)) {\n      <div class=\"icon\">\n        @if (this.hasFontIcon(item)) {\n          <span class=\"icon-material\">\n            <ta-font-icon [name]=\"this.getFontIcon(item)\"></ta-font-icon>\n          </span>\n        } @else if (this.hasIconImage(item)) {\n          <span class=\"icon-image\">\n            <ta-local-icon [type]=\"this.getIcon(item)\" size=\"xs\"></ta-local-icon>\n          </span>\n        }\n      </div>\n    }\n    @if (item.label) {\n      <div class=\"text-truncate\">\n        {{ item.label | translate }}\n      </div>\n    }\n    @if (item.options?.notificationBadge !== null) {\n      <div class=\"badge ml-space-xs\">\n        {{ item.options?.notificationBadge?.label }}\n      </div>\n    }\n    @if (item.translationData?.length) {\n      <div>({{ item.translationData?.length }})</div>\n    }\n  </div>\n</ng-template>\n", styles: [".toggle-container{border-bottom:1px solid var(--ta-neutral-300)}.toggle-container.switch-container{overflow:hidden}.toggle-container .badge{width:20px;height:20px;background-color:var(--ta-brand-700);color:var(--ta-brand-50);border-radius:50%;display:flex;justify-content:center;align-items:center}.toggle-container .toggle-element{color:var(--ta-neutral-800);font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-bold-weight);cursor:pointer}.toggle-container .toggle-element .icon{margin:auto;color:var(--ta-brand-700)}.toggle-container .toggle-element.active .icon{color:var(--ta-icon-brand-primary)}.toggle-container.switch{border-radius:var(--ta-space-xs)}.toggle-container.switch .toggle-element{background:var(--ta-surface-secondary)}.toggle-container.switch .toggle-element.disabled{opacity:.5}.toggle-container.switch .toggle-element.active{background:var(--ta-brand-700);color:var(--ta-neutral-50)}.toggle-container.tab .toggle-element.disabled{opacity:.5}.toggle-container.tab .toggle-element.active{color:var(--ta-text-brand-primary);border-bottom:2px solid var(--ta-border-brand)}.label{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight)}\n"], dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: RouterModule }, { kind: "directive", type: i1.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i1.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i2.TranslatePipe, name: "translate" }, { kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }, { kind: "component", type: LocalIconComponent, selector: "ta-local-icon", inputs: ["type", "size", "rotation"] }, { kind: "component", type: SwiperLightComponent, selector: "ta-swiper-light", inputs: ["items", "template", "swiperClasses", "containerClasses", "forced"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: ToggleNavigationComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-toggle-navigation', standalone: true, imports: [NgIf, NgClass, NgTemplateOutlet, RouterModule, TranslateModule, FontIconComponent, LocalIconComponent, SwiperLightComponent], template: "<div class=\"toggle-container\" [ngClass]=\"this.containerCss\" [class.switch-container]=\"this.container === 'switch'\">\n  <ta-swiper-light\n    [items]=\"this.menu.elements\"\n    [template]=\"template\"\n    [forced]=\"true\"\n    swiperClasses=\"g-space-lg pt-space-md\"\n  ></ta-swiper-light>\n</div>\n\n<ng-template #template let-element=\"element\">\n  @if (element.callback || element.disabled) {\n    <div\n      (click)=\"this.callback(element)\"\n      class=\"toggle-element\"\n      [class.active]=\"this.isActive(element)\"\n      [class.disabled]=\"element.disabled\"\n    >\n      <ng-template\n        [ngTemplateOutlet]=\"Item\"\n        [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n      >\n      </ng-template>\n    </div>\n  } @else {\n    <div\n      class=\"toggle-element\"\n      routerLinkActive=\"active\"\n      [routerLinkActiveOptions]=\"{ exact: element.exact }\"\n      [routerLink]=\"[this.getLink(element)]\"\n      [queryParamsHandling]=\"element.queryParamsHandling\"\n      [replaceUrl]=\"element.replaceUrl\"\n      [ngClass]=\"{ disabled: element.disabled }\"\n    >\n      <ng-template\n        [ngTemplateOutlet]=\"Item\"\n        [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n      >\n      </ng-template>\n    </div>\n  }\n</ng-template>\n\n<ng-template #Item let-item=\"item\" [typedTemplate]=\"this.typeItem\">\n  <div class=\"label flex-row align-center mb-space-xs\">\n    @if (this.hasFontIcon(item) || this.hasIconImage(item)) {\n      <div class=\"icon\">\n        @if (this.hasFontIcon(item)) {\n          <span class=\"icon-material\">\n            <ta-font-icon [name]=\"this.getFontIcon(item)\"></ta-font-icon>\n          </span>\n        } @else if (this.hasIconImage(item)) {\n          <span class=\"icon-image\">\n            <ta-local-icon [type]=\"this.getIcon(item)\" size=\"xs\"></ta-local-icon>\n          </span>\n        }\n      </div>\n    }\n    @if (item.label) {\n      <div class=\"text-truncate\">\n        {{ item.label | translate }}\n      </div>\n    }\n    @if (item.options?.notificationBadge !== null) {\n      <div class=\"badge ml-space-xs\">\n        {{ item.options?.notificationBadge?.label }}\n      </div>\n    }\n    @if (item.translationData?.length) {\n      <div>({{ item.translationData?.length }})</div>\n    }\n  </div>\n</ng-template>\n", styles: [".toggle-container{border-bottom:1px solid var(--ta-neutral-300)}.toggle-container.switch-container{overflow:hidden}.toggle-container .badge{width:20px;height:20px;background-color:var(--ta-brand-700);color:var(--ta-brand-50);border-radius:50%;display:flex;justify-content:center;align-items:center}.toggle-container .toggle-element{color:var(--ta-neutral-800);font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-bold-weight);cursor:pointer}.toggle-container .toggle-element .icon{margin:auto;color:var(--ta-brand-700)}.toggle-container .toggle-element.active .icon{color:var(--ta-icon-brand-primary)}.toggle-container.switch{border-radius:var(--ta-space-xs)}.toggle-container.switch .toggle-element{background:var(--ta-surface-secondary)}.toggle-container.switch .toggle-element.disabled{opacity:.5}.toggle-container.switch .toggle-element.active{background:var(--ta-brand-700);color:var(--ta-neutral-50)}.toggle-container.tab .toggle-element.disabled{opacity:.5}.toggle-container.tab .toggle-element.active{color:var(--ta-text-brand-primary);border-bottom:2px solid var(--ta-border-brand)}.label{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight)}\n"] }]
        }], ctorParameters: () => [], propDecorators: { menu: [{
                type: Input
            }], container: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9nZ2xlLW5hdmlnYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb21wb25lbnRzL3RvZ2dsZS1uYXZpZ2F0aW9uL3RvZ2dsZS1uYXZpZ2F0aW9uLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy90b2dnbGUtbmF2aWdhdGlvbi90b2dnbGUtbmF2aWdhdGlvbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFdEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUU5QyxPQUFPLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFLN0YsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7Ozs7QUFFL0Q7O0dBRUc7QUFRSCxNQUFNLE9BQU8seUJBQXlCO0lBV3BDO1FBSk8sY0FBUyxHQUFXLEVBQUUsQ0FBQztRQUV2QixpQkFBWSxHQUFZLEtBQUssQ0FBQztRQUduQyxrQkFBa0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNuQyxDQUFDO0lBRUQsSUFBSSxZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ2xGLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO1FBQzNCLENBQUM7UUFFRCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDckUsSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDNUIsQ0FBQztJQUNILENBQUM7SUFFTSxXQUFXLENBQUMsSUFBc0M7UUFDdkQsT0FBTyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVNLFlBQVksQ0FBQyxJQUFzQztRQUN4RCxPQUFPLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRU0sT0FBTyxDQUFDLElBQXNDO1FBQ25ELE9BQU8sT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFFTSxXQUFXLENBQUMsSUFBc0M7UUFDdkQsT0FBTyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVNLE9BQU8sQ0FBQyxJQUFzQztRQUNuRCxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFO1lBQUUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBRXBELE9BQU8sRUFBRSxDQUFDLENBQUMsK0NBQStDO0lBQzVELENBQUM7SUFFTSxRQUFRLENBQUMsSUFBYztRQUM1QixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNsQixPQUFPO1FBQ1QsQ0FBQztRQUNELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUMxQixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNsQixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDbEIsQ0FBQztJQUNILENBQUM7SUFFTSxRQUFRLENBQUMsSUFBYztRQUM1QixPQUFPLElBQUksQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUNyQyxDQUFDOytHQWhFVSx5QkFBeUI7bUdBQXpCLHlCQUF5QixrSUN6QnRDLDgwRUE0RUEsaTJDRHJEa0IsT0FBTyxvRkFBRSxnQkFBZ0IsbUpBQUUsWUFBWSxnZkFBRSxlQUFlLDRGQUFFLGlCQUFpQixtRkFBRSxrQkFBa0IsZ0dBQUUsb0JBQW9COzs0RkFFMUgseUJBQXlCO2tCQVByQyxTQUFTOytCQUNBLHNCQUFzQixjQUdsQixJQUFJLFdBQ1AsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsaUJBQWlCLEVBQUUsa0JBQWtCLEVBQUUsb0JBQW9CLENBQUM7d0RBSXRJLElBQUk7c0JBREgsS0FBSztnQkFJTixTQUFTO3NCQURSLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZ0lmLCBOZ0NsYXNzLCBOZ1RlbXBsYXRlT3V0bGV0IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IFRyYW5zbGF0ZU1vZHVsZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuXG5pbXBvcnQgeyBGb250SWNvbkNvbXBvbmVudCwgTG9jYWxJY29uQ29tcG9uZW50IH0gZnJvbSAnQHRhL2ljb25zJztcbmltcG9ydCB7IFN3aXBlckxpZ2h0Q29tcG9uZW50IH0gZnJvbSAnQHRhL3VpJztcblxuaW1wb3J0IHsgZ2V0Rm9udEljb24sIGdldEljb24sIGhhc0ZvbnRJY29uLCBoYXNJY29uSW1hZ2UgfSBmcm9tICcuLi8uLi9oZWxwZXJzL2ljb24tbWFuYWdlcic7XG5pbXBvcnQgeyBNZW51QWN0aW9uIH0gZnJvbSAnLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9hY3Rpb24nO1xuaW1wb3J0IHsgTWVudUJhc2UgfSBmcm9tICcuLi8uLi9tb2RlbHMvbWVudS9pdGVtL2Jhc2UnO1xuaW1wb3J0IHsgTWVudUljb24gfSBmcm9tICcuLi8uLi9tb2RlbHMvbWVudS9pdGVtL2ljb24nO1xuaW1wb3J0IHsgTWVudSB9IGZyb20gJy4uLy4uL21vZGVscy9tZW51L21lbnUnO1xuaW1wb3J0IHsgQ2FtVHJhbnNsYXRpb25NZW51IH0gZnJvbSAnLi4vLi4vdHJhbnNsYXRpb24uc2VydmljZSc7XG5cbi8qXG4gKiogQGRlcHJlY2F0ZWRcbiAqL1xuQENvbXBvbmVudCh7XG5zZWxlY3RvcjogJ3RhLXRvZ2dsZS1uYXZpZ2F0aW9uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RvZ2dsZS1uYXZpZ2F0aW9uLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vdG9nZ2xlLW5hdmlnYXRpb24uY29tcG9uZW50LnNjc3MnXSxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW05nSWYsIE5nQ2xhc3MsIE5nVGVtcGxhdGVPdXRsZXQsIFJvdXRlck1vZHVsZSwgVHJhbnNsYXRlTW9kdWxlLCBGb250SWNvbkNvbXBvbmVudCwgTG9jYWxJY29uQ29tcG9uZW50LCBTd2lwZXJMaWdodENvbXBvbmVudF0sXG59KVxuZXhwb3J0IGNsYXNzIFRvZ2dsZU5hdmlnYXRpb25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKVxuICBtZW51ITogTWVudTtcblxuICBASW5wdXQoKVxuICBjb250YWluZXIhOiAndGFiJyB8ICdzd2l0Y2gnO1xuXG4gIHB1YmxpYyBhY3RpdmVLZXk6IHN0cmluZyA9ICcnO1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZUl0ZW0hOiB7IGl0ZW06IE1lbnVCYXNlIHwgTWVudUFjdGlvbiB8IE1lbnVJY29uIH07XG4gIHB1YmxpYyBub3RpZkVuYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBDYW1UcmFuc2xhdGlvbk1lbnUuZ2V0SW5zdGFuY2UoKTtcbiAgfVxuXG4gIGdldCBjb250YWluZXJDc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyID8/ICcnO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMubWVudS5lbGVtZW50cy5maW5kKGVsZW1lbnQgPT4gZWxlbWVudC5vcHRpb25zPy5ub3RpZmljYXRpb25CYWRnZT8ubGFiZWwpKSB7XG4gICAgICB0aGlzLm5vdGlmRW5hYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlSXRlbSA9IHRoaXMubWVudS5lbGVtZW50cy5maW5kKGl0ZW0gPT4gaXRlbS5kZWZhdWx0T3Blbik7XG4gICAgaWYgKGFjdGl2ZUl0ZW0pIHtcbiAgICAgIHRoaXMuY2FsbGJhY2soYWN0aXZlSXRlbSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhhc0ZvbnRJY29uKGl0ZW06IE1lbnVJY29uIHwgTWVudUFjdGlvbiB8IE1lbnVCYXNlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0ZvbnRJY29uKGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGhhc0ljb25JbWFnZShpdGVtOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNJY29uSW1hZ2UoaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0SWNvbihpdGVtOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSkge1xuICAgIHJldHVybiBnZXRJY29uKGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGdldEZvbnRJY29uKGl0ZW06IE1lbnVJY29uIHwgTWVudUFjdGlvbiB8IE1lbnVCYXNlKSB7XG4gICAgcmV0dXJuIGdldEZvbnRJY29uKGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGdldExpbmsoaXRlbTogTWVudUljb24gfCBNZW51QWN0aW9uIHwgTWVudUJhc2UpIHtcbiAgICBpZiAoaXRlbS5saW5rICYmIGl0ZW0ubGluayAhPT0gJycpIHJldHVybiBpdGVtLmxpbms7XG5cbiAgICByZXR1cm4gJyc7IC8vIFRPRE8gdGhpcy5fbmF2aWdhdGlvblNlcnZpY2UuY3VycmVudFBhZ2VVcmw7XG4gIH1cblxuICBwdWJsaWMgY2FsbGJhY2soaXRlbTogTWVudUJhc2UpIHtcbiAgICBpZiAoaXRlbS5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZUtleSA9IGl0ZW0ua2V5O1xuICAgIGlmIChpdGVtLmNhbGxiYWNrKSB7XG4gICAgICBpdGVtLmNhbGxiYWNrKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGlzQWN0aXZlKGl0ZW06IE1lbnVCYXNlKSB7XG4gICAgcmV0dXJuIGl0ZW0ua2V5ID09PSB0aGlzLmFjdGl2ZUtleTtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cInRvZ2dsZS1jb250YWluZXJcIiBbbmdDbGFzc109XCJ0aGlzLmNvbnRhaW5lckNzc1wiIFtjbGFzcy5zd2l0Y2gtY29udGFpbmVyXT1cInRoaXMuY29udGFpbmVyID09PSAnc3dpdGNoJ1wiPlxuICA8dGEtc3dpcGVyLWxpZ2h0XG4gICAgW2l0ZW1zXT1cInRoaXMubWVudS5lbGVtZW50c1wiXG4gICAgW3RlbXBsYXRlXT1cInRlbXBsYXRlXCJcbiAgICBbZm9yY2VkXT1cInRydWVcIlxuICAgIHN3aXBlckNsYXNzZXM9XCJnLXNwYWNlLWxnIHB0LXNwYWNlLW1kXCJcbiAgPjwvdGEtc3dpcGVyLWxpZ2h0PlxuPC9kaXY+XG5cbjxuZy10ZW1wbGF0ZSAjdGVtcGxhdGUgbGV0LWVsZW1lbnQ9XCJlbGVtZW50XCI+XG4gIEBpZiAoZWxlbWVudC5jYWxsYmFjayB8fCBlbGVtZW50LmRpc2FibGVkKSB7XG4gICAgPGRpdlxuICAgICAgKGNsaWNrKT1cInRoaXMuY2FsbGJhY2soZWxlbWVudClcIlxuICAgICAgY2xhc3M9XCJ0b2dnbGUtZWxlbWVudFwiXG4gICAgICBbY2xhc3MuYWN0aXZlXT1cInRoaXMuaXNBY3RpdmUoZWxlbWVudClcIlxuICAgICAgW2NsYXNzLmRpc2FibGVkXT1cImVsZW1lbnQuZGlzYWJsZWRcIlxuICAgID5cbiAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJJdGVtXCJcbiAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cIntcbiAgICAgICAgICBpdGVtOiBlbGVtZW50LFxuICAgICAgICB9XCJcbiAgICAgID5cbiAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgPC9kaXY+XG4gIH0gQGVsc2Uge1xuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwidG9nZ2xlLWVsZW1lbnRcIlxuICAgICAgcm91dGVyTGlua0FjdGl2ZT1cImFjdGl2ZVwiXG4gICAgICBbcm91dGVyTGlua0FjdGl2ZU9wdGlvbnNdPVwieyBleGFjdDogZWxlbWVudC5leGFjdCB9XCJcbiAgICAgIFtyb3V0ZXJMaW5rXT1cIlt0aGlzLmdldExpbmsoZWxlbWVudCldXCJcbiAgICAgIFtxdWVyeVBhcmFtc0hhbmRsaW5nXT1cImVsZW1lbnQucXVlcnlQYXJhbXNIYW5kbGluZ1wiXG4gICAgICBbcmVwbGFjZVVybF09XCJlbGVtZW50LnJlcGxhY2VVcmxcIlxuICAgICAgW25nQ2xhc3NdPVwieyBkaXNhYmxlZDogZWxlbWVudC5kaXNhYmxlZCB9XCJcbiAgICA+XG4gICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiSXRlbVwiXG4gICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7XG4gICAgICAgICAgaXRlbTogZWxlbWVudCxcbiAgICAgICAgfVwiXG4gICAgICA+XG4gICAgICA8L25nLXRlbXBsYXRlPlxuICAgIDwvZGl2PlxuICB9XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI0l0ZW0gbGV0LWl0ZW09XCJpdGVtXCIgW3R5cGVkVGVtcGxhdGVdPVwidGhpcy50eXBlSXRlbVwiPlxuICA8ZGl2IGNsYXNzPVwibGFiZWwgZmxleC1yb3cgYWxpZ24tY2VudGVyIG1iLXNwYWNlLXhzXCI+XG4gICAgQGlmICh0aGlzLmhhc0ZvbnRJY29uKGl0ZW0pIHx8IHRoaXMuaGFzSWNvbkltYWdlKGl0ZW0pKSB7XG4gICAgICA8ZGl2IGNsYXNzPVwiaWNvblwiPlxuICAgICAgICBAaWYgKHRoaXMuaGFzRm9udEljb24oaXRlbSkpIHtcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb24tbWF0ZXJpYWxcIj5cbiAgICAgICAgICAgIDx0YS1mb250LWljb24gW25hbWVdPVwidGhpcy5nZXRGb250SWNvbihpdGVtKVwiPjwvdGEtZm9udC1pY29uPlxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgfSBAZWxzZSBpZiAodGhpcy5oYXNJY29uSW1hZ2UoaXRlbSkpIHtcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb24taW1hZ2VcIj5cbiAgICAgICAgICAgIDx0YS1sb2NhbC1pY29uIFt0eXBlXT1cInRoaXMuZ2V0SWNvbihpdGVtKVwiIHNpemU9XCJ4c1wiPjwvdGEtbG9jYWwtaWNvbj5cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIH1cbiAgICBAaWYgKGl0ZW0ubGFiZWwpIHtcbiAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXRydW5jYXRlXCI+XG4gICAgICAgIHt7IGl0ZW0ubGFiZWwgfCB0cmFuc2xhdGUgfX1cbiAgICAgIDwvZGl2PlxuICAgIH1cbiAgICBAaWYgKGl0ZW0ub3B0aW9ucz8ubm90aWZpY2F0aW9uQmFkZ2UgIT09IG51bGwpIHtcbiAgICAgIDxkaXYgY2xhc3M9XCJiYWRnZSBtbC1zcGFjZS14c1wiPlxuICAgICAgICB7eyBpdGVtLm9wdGlvbnM/Lm5vdGlmaWNhdGlvbkJhZGdlPy5sYWJlbCB9fVxuICAgICAgPC9kaXY+XG4gICAgfVxuICAgIEBpZiAoaXRlbS50cmFuc2xhdGlvbkRhdGE/Lmxlbmd0aCkge1xuICAgICAgPGRpdj4oe3sgaXRlbS50cmFuc2xhdGlvbkRhdGE/Lmxlbmd0aCB9fSk8L2Rpdj5cbiAgICB9XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==