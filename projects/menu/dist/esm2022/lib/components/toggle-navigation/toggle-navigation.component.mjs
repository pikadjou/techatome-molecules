import { NgClass, NgIf, NgTemplateOutlet } from "@angular/common";
import { Component, input } from "@angular/core";
import { RouterModule } from "@angular/router";
import { TranslateModule } from "@ngx-translate/core";
import { FontIconComponent, LocalIconComponent } from "@ta/icons";
import { SwiperLightComponent } from "@ta/ui";
import { getFontIcon, getIcon, hasFontIcon, hasIconImage, } from "../../helpers/icon-manager";
import { TaTranslationMenu } from "../../translation.service";
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@ngx-translate/core";
/*
 ** @deprecated
 */
export class ToggleNavigationComponent {
    constructor() {
        this.menu = input.required();
        this.container = input.required();
        this.activeKey = "";
        this.notifEnabled = false;
        TaTranslationMenu.getInstance();
    }
    get containerCss() {
        return this.container() ?? "";
    }
    ngOnInit() {
        if (this.menu().elements.find((element) => element.options?.notificationBadge?.label)) {
            this.notifEnabled = true;
        }
        const activeItem = this.menu().elements.find((item) => item.defaultOpen);
        if (activeItem) {
            this.callback(activeItem);
        }
    }
    hasFontIcon(item) {
        return hasFontIcon(item);
    }
    hasIconImage(item) {
        return hasIconImage(item);
    }
    getIcon(item) {
        return getIcon(item);
    }
    getFontIcon(item) {
        return getFontIcon(item);
    }
    getLink(item) {
        if (item.link && item.link !== "")
            return item.link;
        return ""; // TODO this._navigationService.currentPageUrl;
    }
    callback(item) {
        if (item.disabled) {
            return;
        }
        this.activeKey = item.key;
        if (item.callback) {
            item.callback();
        }
    }
    isActive(item) {
        return item.key === this.activeKey;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: ToggleNavigationComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: ToggleNavigationComponent, isStandalone: true, selector: "ta-toggle-navigation", inputs: { menu: { classPropertyName: "menu", publicName: "menu", isSignal: true, isRequired: true, transformFunction: null }, container: { classPropertyName: "container", publicName: "container", isSignal: true, isRequired: true, transformFunction: null } }, ngImport: i0, template: "<div\n  class=\"toggle-container\"\n  [ngClass]=\"this.containerCss\"\n  [class.switch-container]=\"this.container() === 'switch'\"\n>\n  <ta-swiper-light\n    [items]=\"this.menu().elements\"\n    [template]=\"template\"\n    [forced]=\"true\"\n    swiperClasses=\"g-space-lg pt-space-md\"\n  ></ta-swiper-light>\n</div>\n\n<ng-template #template let-element=\"element\">\n  @if (element.callback || element.disabled) {\n  <div\n    (click)=\"this.callback(element)\"\n    class=\"toggle-element\"\n    [class.active]=\"this.isActive(element)\"\n    [class.disabled]=\"element.disabled\"\n  >\n    <ng-template\n      [ngTemplateOutlet]=\"Item\"\n      [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n    >\n    </ng-template>\n  </div>\n  } @else {\n  <div\n    class=\"toggle-element\"\n    routerLinkActive=\"active\"\n    [routerLinkActiveOptions]=\"{ exact: element.exact }\"\n    [routerLink]=\"[this.getLink(element)]\"\n    [queryParamsHandling]=\"element.queryParamsHandling\"\n    [replaceUrl]=\"element.replaceUrl\"\n    [ngClass]=\"{ disabled: element.disabled }\"\n  >\n    <ng-template\n      [ngTemplateOutlet]=\"Item\"\n      [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n    >\n    </ng-template>\n  </div>\n  }\n</ng-template>\n\n<ng-template #Item let-item=\"item\" [typedTemplate]=\"this.typeItem\">\n  <div class=\"label flex-row align-center mb-space-xs\">\n    @if (this.hasFontIcon(item) || this.hasIconImage(item)) {\n    <div class=\"icon\">\n      @if (this.hasFontIcon(item)) {\n      <span class=\"icon-material\">\n        <ta-font-icon [name]=\"this.getFontIcon(item)\"></ta-font-icon>\n      </span>\n      } @else if (this.hasIconImage(item)) {\n      <span class=\"icon-image\">\n        <ta-local-icon [type]=\"this.getIcon(item)\" size=\"xs\"></ta-local-icon>\n      </span>\n      }\n    </div>\n    } @if (item.label) {\n    <div class=\"text-truncate\">\n      {{ item.label | translate }}\n    </div>\n    } @if (item.options?.notificationBadge !== null) {\n    <div class=\"badge ml-space-xs\">\n      {{ item.options?.notificationBadge?.label }}\n    </div>\n    } @if (item.translationData?.length) {\n    <div>({{ item.translationData?.length }})</div>\n    }\n  </div>\n</ng-template>\n", styles: [".toggle-container{border-bottom:1px solid var(--ta-neutral-300)}.toggle-container.switch-container{overflow:hidden}.toggle-container .badge{width:20px;height:20px;background-color:var(--ta-brand-700);color:var(--ta-brand-50);border-radius:50%;display:flex;justify-content:center;align-items:center}.toggle-container .toggle-element{color:var(--ta-neutral-800);font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-bold-weight);cursor:pointer}.toggle-container .toggle-element .icon{margin:auto;color:var(--ta-brand-700)}.toggle-container .toggle-element.active .icon{color:var(--ta-icon-brand-primary)}.toggle-container.switch{border-radius:var(--ta-space-xs)}.toggle-container.switch .toggle-element{background:var(--ta-surface-secondary)}.toggle-container.switch .toggle-element.disabled{opacity:.5}.toggle-container.switch .toggle-element.active{background:var(--ta-brand-700);color:var(--ta-neutral-50)}.toggle-container.tab .toggle-element.disabled{opacity:.5}.toggle-container.tab .toggle-element.active{color:var(--ta-text-brand-primary);border-bottom:2px solid var(--ta-border-brand)}.label{font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-default-weight)}\n"], dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: RouterModule }, { kind: "directive", type: i1.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i1.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i2.TranslatePipe, name: "translate" }, { kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }, { kind: "component", type: LocalIconComponent, selector: "ta-local-icon", inputs: ["type", "size", "rotation"] }, { kind: "component", type: SwiperLightComponent, selector: "ta-swiper-light", inputs: ["items", "template", "swiperClasses", "containerClasses", "forced"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: ToggleNavigationComponent, decorators: [{
            type: Component,
            args: [{ selector: "ta-toggle-navigation", standalone: true, imports: [
                        NgIf,
                        NgClass,
                        NgTemplateOutlet,
                        RouterModule,
                        TranslateModule,
                        FontIconComponent,
                        LocalIconComponent,
                        SwiperLightComponent,
                    ], template: "<div\n  class=\"toggle-container\"\n  [ngClass]=\"this.containerCss\"\n  [class.switch-container]=\"this.container() === 'switch'\"\n>\n  <ta-swiper-light\n    [items]=\"this.menu().elements\"\n    [template]=\"template\"\n    [forced]=\"true\"\n    swiperClasses=\"g-space-lg pt-space-md\"\n  ></ta-swiper-light>\n</div>\n\n<ng-template #template let-element=\"element\">\n  @if (element.callback || element.disabled) {\n  <div\n    (click)=\"this.callback(element)\"\n    class=\"toggle-element\"\n    [class.active]=\"this.isActive(element)\"\n    [class.disabled]=\"element.disabled\"\n  >\n    <ng-template\n      [ngTemplateOutlet]=\"Item\"\n      [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n    >\n    </ng-template>\n  </div>\n  } @else {\n  <div\n    class=\"toggle-element\"\n    routerLinkActive=\"active\"\n    [routerLinkActiveOptions]=\"{ exact: element.exact }\"\n    [routerLink]=\"[this.getLink(element)]\"\n    [queryParamsHandling]=\"element.queryParamsHandling\"\n    [replaceUrl]=\"element.replaceUrl\"\n    [ngClass]=\"{ disabled: element.disabled }\"\n  >\n    <ng-template\n      [ngTemplateOutlet]=\"Item\"\n      [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n    >\n    </ng-template>\n  </div>\n  }\n</ng-template>\n\n<ng-template #Item let-item=\"item\" [typedTemplate]=\"this.typeItem\">\n  <div class=\"label flex-row align-center mb-space-xs\">\n    @if (this.hasFontIcon(item) || this.hasIconImage(item)) {\n    <div class=\"icon\">\n      @if (this.hasFontIcon(item)) {\n      <span class=\"icon-material\">\n        <ta-font-icon [name]=\"this.getFontIcon(item)\"></ta-font-icon>\n      </span>\n      } @else if (this.hasIconImage(item)) {\n      <span class=\"icon-image\">\n        <ta-local-icon [type]=\"this.getIcon(item)\" size=\"xs\"></ta-local-icon>\n      </span>\n      }\n    </div>\n    } @if (item.label) {\n    <div class=\"text-truncate\">\n      {{ item.label | translate }}\n    </div>\n    } @if (item.options?.notificationBadge !== null) {\n    <div class=\"badge ml-space-xs\">\n      {{ item.options?.notificationBadge?.label }}\n    </div>\n    } @if (item.translationData?.length) {\n    <div>({{ item.translationData?.length }})</div>\n    }\n  </div>\n</ng-template>\n", styles: [".toggle-container{border-bottom:1px solid var(--ta-neutral-300)}.toggle-container.switch-container{overflow:hidden}.toggle-container .badge{width:20px;height:20px;background-color:var(--ta-brand-700);color:var(--ta-brand-50);border-radius:50%;display:flex;justify-content:center;align-items:center}.toggle-container .toggle-element{color:var(--ta-neutral-800);font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-bold-weight);cursor:pointer}.toggle-container .toggle-element .icon{margin:auto;color:var(--ta-brand-700)}.toggle-container .toggle-element.active .icon{color:var(--ta-icon-brand-primary)}.toggle-container.switch{border-radius:var(--ta-space-xs)}.toggle-container.switch .toggle-element{background:var(--ta-surface-secondary)}.toggle-container.switch .toggle-element.disabled{opacity:.5}.toggle-container.switch .toggle-element.active{background:var(--ta-brand-700);color:var(--ta-neutral-50)}.toggle-container.tab .toggle-element.disabled{opacity:.5}.toggle-container.tab .toggle-element.active{color:var(--ta-text-brand-primary);border-bottom:2px solid var(--ta-border-brand)}.label{font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-default-weight)}\n"] }]
        }], ctorParameters: () => [] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9nZ2xlLW5hdmlnYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb21wb25lbnRzL3RvZ2dsZS1uYXZpZ2F0aW9uL3RvZ2dsZS1uYXZpZ2F0aW9uLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy90b2dnbGUtbmF2aWdhdGlvbi90b2dnbGUtbmF2aWdhdGlvbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUUvQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFdEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUU5QyxPQUFPLEVBQ0wsV0FBVyxFQUNYLE9BQU8sRUFDUCxXQUFXLEVBQ1gsWUFBWSxHQUNiLE1BQU0sNEJBQTRCLENBQUM7QUFLcEMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7Ozs7QUFFOUQ7O0dBRUc7QUFpQkgsTUFBTSxPQUFPLHlCQUF5QjtJQVNwQztRQVJBLFNBQUksR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFRLENBQUM7UUFFOUIsY0FBUyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQW9CLENBQUM7UUFFeEMsY0FBUyxHQUFXLEVBQUUsQ0FBQztRQUV2QixpQkFBWSxHQUFZLEtBQUssQ0FBQztRQUduQyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNsQyxDQUFDO0lBRUQsSUFBSSxZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFFRCxRQUFRO1FBQ04sSUFDRSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FDdkIsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxDQUN2RCxFQUNELENBQUM7WUFDRCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztRQUMzQixDQUFDO1FBRUQsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN6RSxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM1QixDQUFDO0lBQ0gsQ0FBQztJQUVNLFdBQVcsQ0FBQyxJQUFzQztRQUN2RCxPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBRU0sWUFBWSxDQUFDLElBQXNDO1FBQ3hELE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFTSxPQUFPLENBQUMsSUFBc0M7UUFDbkQsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVNLFdBQVcsQ0FBQyxJQUFzQztRQUN2RCxPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBRU0sT0FBTyxDQUFDLElBQXNDO1FBQ25ELElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLEVBQUU7WUFBRSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7UUFFcEQsT0FBTyxFQUFFLENBQUMsQ0FBQywrQ0FBK0M7SUFDNUQsQ0FBQztJQUVNLFFBQVEsQ0FBQyxJQUFjO1FBQzVCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2xCLE9BQU87UUFDVCxDQUFDO1FBQ0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQzFCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNsQixDQUFDO0lBQ0gsQ0FBQztJQUVNLFFBQVEsQ0FBQyxJQUFjO1FBQzVCLE9BQU8sSUFBSSxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3JDLENBQUM7K0dBbEVVLHlCQUF5QjttR0FBekIseUJBQXlCLG1WQ3hDdEMsd3VFQTZFQSxpd0NEOUNJLE9BQU8sb0ZBQ1AsZ0JBQWdCLG1KQUNoQixZQUFZLGdmQUNaLGVBQWUsNEZBQ2YsaUJBQWlCLG1GQUNqQixrQkFBa0IsZ0dBQ2xCLG9CQUFvQjs7NEZBR1gseUJBQXlCO2tCQWhCckMsU0FBUzsrQkFDRSxzQkFBc0IsY0FHcEIsSUFBSSxXQUNQO3dCQUNQLElBQUk7d0JBQ0osT0FBTzt3QkFDUCxnQkFBZ0I7d0JBQ2hCLFlBQVk7d0JBQ1osZUFBZTt3QkFDZixpQkFBaUI7d0JBQ2pCLGtCQUFrQjt3QkFDbEIsb0JBQW9CO3FCQUNyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5nQ2xhc3MsIE5nSWYsIE5nVGVtcGxhdGVPdXRsZXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29tbW9uXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIGlucHV0LCBPbkluaXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgUm91dGVyTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL3JvdXRlclwiO1xuXG5pbXBvcnQgeyBUcmFuc2xhdGVNb2R1bGUgfSBmcm9tIFwiQG5neC10cmFuc2xhdGUvY29yZVwiO1xuXG5pbXBvcnQgeyBGb250SWNvbkNvbXBvbmVudCwgTG9jYWxJY29uQ29tcG9uZW50IH0gZnJvbSBcIkB0YS9pY29uc1wiO1xuaW1wb3J0IHsgU3dpcGVyTGlnaHRDb21wb25lbnQgfSBmcm9tIFwiQHRhL3VpXCI7XG5cbmltcG9ydCB7XG4gIGdldEZvbnRJY29uLFxuICBnZXRJY29uLFxuICBoYXNGb250SWNvbixcbiAgaGFzSWNvbkltYWdlLFxufSBmcm9tIFwiLi4vLi4vaGVscGVycy9pY29uLW1hbmFnZXJcIjtcbmltcG9ydCB7IE1lbnVBY3Rpb24gfSBmcm9tIFwiLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9hY3Rpb25cIjtcbmltcG9ydCB7IE1lbnVCYXNlIH0gZnJvbSBcIi4uLy4uL21vZGVscy9tZW51L2l0ZW0vYmFzZVwiO1xuaW1wb3J0IHsgTWVudUljb24gfSBmcm9tIFwiLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9pY29uXCI7XG5pbXBvcnQgeyBNZW51IH0gZnJvbSBcIi4uLy4uL21vZGVscy9tZW51L21lbnVcIjtcbmltcG9ydCB7IFRhVHJhbnNsYXRpb25NZW51IH0gZnJvbSBcIi4uLy4uL3RyYW5zbGF0aW9uLnNlcnZpY2VcIjtcblxuLypcbiAqKiBAZGVwcmVjYXRlZFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6IFwidGEtdG9nZ2xlLW5hdmlnYXRpb25cIixcbiAgdGVtcGxhdGVVcmw6IFwiLi90b2dnbGUtbmF2aWdhdGlvbi5jb21wb25lbnQuaHRtbFwiLFxuICBzdHlsZVVybHM6IFtcIi4vdG9nZ2xlLW5hdmlnYXRpb24uY29tcG9uZW50LnNjc3NcIl0sXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBOZ0lmLFxuICAgIE5nQ2xhc3MsXG4gICAgTmdUZW1wbGF0ZU91dGxldCxcbiAgICBSb3V0ZXJNb2R1bGUsXG4gICAgVHJhbnNsYXRlTW9kdWxlLFxuICAgIEZvbnRJY29uQ29tcG9uZW50LFxuICAgIExvY2FsSWNvbkNvbXBvbmVudCxcbiAgICBTd2lwZXJMaWdodENvbXBvbmVudCxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgVG9nZ2xlTmF2aWdhdGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIG1lbnUgPSBpbnB1dC5yZXF1aXJlZDxNZW51PigpO1xuXG4gIGNvbnRhaW5lciA9IGlucHV0LnJlcXVpcmVkPFwidGFiXCIgfCBcInN3aXRjaFwiPigpO1xuXG4gIHB1YmxpYyBhY3RpdmVLZXk6IHN0cmluZyA9IFwiXCI7XG4gIHB1YmxpYyByZWFkb25seSB0eXBlSXRlbSE6IHsgaXRlbTogTWVudUJhc2UgfCBNZW51QWN0aW9uIHwgTWVudUljb24gfTtcbiAgcHVibGljIG5vdGlmRW5hYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIFRhVHJhbnNsYXRpb25NZW51LmdldEluc3RhbmNlKCk7XG4gIH1cblxuICBnZXQgY29udGFpbmVyQ3NzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcigpID8/IFwiXCI7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLm1lbnUoKS5lbGVtZW50cy5maW5kKFxuICAgICAgICAoZWxlbWVudCkgPT4gZWxlbWVudC5vcHRpb25zPy5ub3RpZmljYXRpb25CYWRnZT8ubGFiZWxcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHRoaXMubm90aWZFbmFibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBhY3RpdmVJdGVtID0gdGhpcy5tZW51KCkuZWxlbWVudHMuZmluZCgoaXRlbSkgPT4gaXRlbS5kZWZhdWx0T3Blbik7XG4gICAgaWYgKGFjdGl2ZUl0ZW0pIHtcbiAgICAgIHRoaXMuY2FsbGJhY2soYWN0aXZlSXRlbSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhhc0ZvbnRJY29uKGl0ZW06IE1lbnVJY29uIHwgTWVudUFjdGlvbiB8IE1lbnVCYXNlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0ZvbnRJY29uKGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGhhc0ljb25JbWFnZShpdGVtOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNJY29uSW1hZ2UoaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0SWNvbihpdGVtOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSkge1xuICAgIHJldHVybiBnZXRJY29uKGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGdldEZvbnRJY29uKGl0ZW06IE1lbnVJY29uIHwgTWVudUFjdGlvbiB8IE1lbnVCYXNlKSB7XG4gICAgcmV0dXJuIGdldEZvbnRJY29uKGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGdldExpbmsoaXRlbTogTWVudUljb24gfCBNZW51QWN0aW9uIHwgTWVudUJhc2UpIHtcbiAgICBpZiAoaXRlbS5saW5rICYmIGl0ZW0ubGluayAhPT0gXCJcIikgcmV0dXJuIGl0ZW0ubGluaztcblxuICAgIHJldHVybiBcIlwiOyAvLyBUT0RPIHRoaXMuX25hdmlnYXRpb25TZXJ2aWNlLmN1cnJlbnRQYWdlVXJsO1xuICB9XG5cbiAgcHVibGljIGNhbGxiYWNrKGl0ZW06IE1lbnVCYXNlKSB7XG4gICAgaWYgKGl0ZW0uZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmVLZXkgPSBpdGVtLmtleTtcbiAgICBpZiAoaXRlbS5jYWxsYmFjaykge1xuICAgICAgaXRlbS5jYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc0FjdGl2ZShpdGVtOiBNZW51QmFzZSkge1xuICAgIHJldHVybiBpdGVtLmtleSA9PT0gdGhpcy5hY3RpdmVLZXk7XG4gIH1cbn1cbiIsIjxkaXZcbiAgY2xhc3M9XCJ0b2dnbGUtY29udGFpbmVyXCJcbiAgW25nQ2xhc3NdPVwidGhpcy5jb250YWluZXJDc3NcIlxuICBbY2xhc3Muc3dpdGNoLWNvbnRhaW5lcl09XCJ0aGlzLmNvbnRhaW5lcigpID09PSAnc3dpdGNoJ1wiXG4+XG4gIDx0YS1zd2lwZXItbGlnaHRcbiAgICBbaXRlbXNdPVwidGhpcy5tZW51KCkuZWxlbWVudHNcIlxuICAgIFt0ZW1wbGF0ZV09XCJ0ZW1wbGF0ZVwiXG4gICAgW2ZvcmNlZF09XCJ0cnVlXCJcbiAgICBzd2lwZXJDbGFzc2VzPVwiZy1zcGFjZS1sZyBwdC1zcGFjZS1tZFwiXG4gID48L3RhLXN3aXBlci1saWdodD5cbjwvZGl2PlxuXG48bmctdGVtcGxhdGUgI3RlbXBsYXRlIGxldC1lbGVtZW50PVwiZWxlbWVudFwiPlxuICBAaWYgKGVsZW1lbnQuY2FsbGJhY2sgfHwgZWxlbWVudC5kaXNhYmxlZCkge1xuICA8ZGl2XG4gICAgKGNsaWNrKT1cInRoaXMuY2FsbGJhY2soZWxlbWVudClcIlxuICAgIGNsYXNzPVwidG9nZ2xlLWVsZW1lbnRcIlxuICAgIFtjbGFzcy5hY3RpdmVdPVwidGhpcy5pc0FjdGl2ZShlbGVtZW50KVwiXG4gICAgW2NsYXNzLmRpc2FibGVkXT1cImVsZW1lbnQuZGlzYWJsZWRcIlxuICA+XG4gICAgPG5nLXRlbXBsYXRlXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJJdGVtXCJcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7XG4gICAgICAgICAgaXRlbTogZWxlbWVudCxcbiAgICAgICAgfVwiXG4gICAgPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIDwvZGl2PlxuICB9IEBlbHNlIHtcbiAgPGRpdlxuICAgIGNsYXNzPVwidG9nZ2xlLWVsZW1lbnRcIlxuICAgIHJvdXRlckxpbmtBY3RpdmU9XCJhY3RpdmVcIlxuICAgIFtyb3V0ZXJMaW5rQWN0aXZlT3B0aW9uc109XCJ7IGV4YWN0OiBlbGVtZW50LmV4YWN0IH1cIlxuICAgIFtyb3V0ZXJMaW5rXT1cIlt0aGlzLmdldExpbmsoZWxlbWVudCldXCJcbiAgICBbcXVlcnlQYXJhbXNIYW5kbGluZ109XCJlbGVtZW50LnF1ZXJ5UGFyYW1zSGFuZGxpbmdcIlxuICAgIFtyZXBsYWNlVXJsXT1cImVsZW1lbnQucmVwbGFjZVVybFwiXG4gICAgW25nQ2xhc3NdPVwieyBkaXNhYmxlZDogZWxlbWVudC5kaXNhYmxlZCB9XCJcbiAgPlxuICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiSXRlbVwiXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwie1xuICAgICAgICAgIGl0ZW06IGVsZW1lbnQsXG4gICAgICAgIH1cIlxuICAgID5cbiAgICA8L25nLXRlbXBsYXRlPlxuICA8L2Rpdj5cbiAgfVxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNJdGVtIGxldC1pdGVtPVwiaXRlbVwiIFt0eXBlZFRlbXBsYXRlXT1cInRoaXMudHlwZUl0ZW1cIj5cbiAgPGRpdiBjbGFzcz1cImxhYmVsIGZsZXgtcm93IGFsaWduLWNlbnRlciBtYi1zcGFjZS14c1wiPlxuICAgIEBpZiAodGhpcy5oYXNGb250SWNvbihpdGVtKSB8fCB0aGlzLmhhc0ljb25JbWFnZShpdGVtKSkge1xuICAgIDxkaXYgY2xhc3M9XCJpY29uXCI+XG4gICAgICBAaWYgKHRoaXMuaGFzRm9udEljb24oaXRlbSkpIHtcbiAgICAgIDxzcGFuIGNsYXNzPVwiaWNvbi1tYXRlcmlhbFwiPlxuICAgICAgICA8dGEtZm9udC1pY29uIFtuYW1lXT1cInRoaXMuZ2V0Rm9udEljb24oaXRlbSlcIj48L3RhLWZvbnQtaWNvbj5cbiAgICAgIDwvc3Bhbj5cbiAgICAgIH0gQGVsc2UgaWYgKHRoaXMuaGFzSWNvbkltYWdlKGl0ZW0pKSB7XG4gICAgICA8c3BhbiBjbGFzcz1cImljb24taW1hZ2VcIj5cbiAgICAgICAgPHRhLWxvY2FsLWljb24gW3R5cGVdPVwidGhpcy5nZXRJY29uKGl0ZW0pXCIgc2l6ZT1cInhzXCI+PC90YS1sb2NhbC1pY29uPlxuICAgICAgPC9zcGFuPlxuICAgICAgfVxuICAgIDwvZGl2PlxuICAgIH0gQGlmIChpdGVtLmxhYmVsKSB7XG4gICAgPGRpdiBjbGFzcz1cInRleHQtdHJ1bmNhdGVcIj5cbiAgICAgIHt7IGl0ZW0ubGFiZWwgfCB0cmFuc2xhdGUgfX1cbiAgICA8L2Rpdj5cbiAgICB9IEBpZiAoaXRlbS5vcHRpb25zPy5ub3RpZmljYXRpb25CYWRnZSAhPT0gbnVsbCkge1xuICAgIDxkaXYgY2xhc3M9XCJiYWRnZSBtbC1zcGFjZS14c1wiPlxuICAgICAge3sgaXRlbS5vcHRpb25zPy5ub3RpZmljYXRpb25CYWRnZT8ubGFiZWwgfX1cbiAgICA8L2Rpdj5cbiAgICB9IEBpZiAoaXRlbS50cmFuc2xhdGlvbkRhdGE/Lmxlbmd0aCkge1xuICAgIDxkaXY+KHt7IGl0ZW0udHJhbnNsYXRpb25EYXRhPy5sZW5ndGggfX0pPC9kaXY+XG4gICAgfVxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=