import { NgClass, NgIf, NgTemplateOutlet } from "@angular/common";
import { Component, Input } from "@angular/core";
import { RouterModule } from "@angular/router";
import { TranslateModule } from "@ngx-translate/core";
import { FontIconComponent, LocalIconComponent } from "@ta/icons";
import { SwiperLightComponent } from "@ta/ui";
import { getFontIcon, getIcon, hasFontIcon, hasIconImage, } from "../../helpers/icon-manager";
import { TaTranslationMenu } from "../../translation.service";
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@ngx-translate/core";
/*
 ** @deprecated
 */
export class ToggleNavigationComponent {
    constructor() {
        this.activeKey = "";
        this.notifEnabled = false;
        TaTranslationMenu.getInstance();
    }
    get containerCss() {
        return this.container ?? "";
    }
    ngOnInit() {
        if (this.menu.elements.find((element) => element.options?.notificationBadge?.label)) {
            this.notifEnabled = true;
        }
        const activeItem = this.menu.elements.find((item) => item.defaultOpen);
        if (activeItem) {
            this.callback(activeItem);
        }
    }
    hasFontIcon(item) {
        return hasFontIcon(item);
    }
    hasIconImage(item) {
        return hasIconImage(item);
    }
    getIcon(item) {
        return getIcon(item);
    }
    getFontIcon(item) {
        return getFontIcon(item);
    }
    getLink(item) {
        if (item.link && item.link !== "")
            return item.link;
        return ""; // TODO this._navigationService.currentPageUrl;
    }
    callback(item) {
        if (item.disabled) {
            return;
        }
        this.activeKey = item.key;
        if (item.callback) {
            item.callback();
        }
    }
    isActive(item) {
        return item.key === this.activeKey;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: ToggleNavigationComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: ToggleNavigationComponent, isStandalone: true, selector: "ta-toggle-navigation", inputs: { menu: "menu", container: "container" }, ngImport: i0, template: "<div\n  class=\"toggle-container\"\n  [ngClass]=\"this.containerCss\"\n  [class.switch-container]=\"this.container === 'switch'\"\n>\n  <ta-swiper-light\n    [items]=\"this.menu.elements\"\n    [template]=\"template\"\n    [forced]=\"true\"\n    swiperClasses=\"g-space-lg pt-space-md\"\n  ></ta-swiper-light>\n</div>\n\n<ng-template #template let-element=\"element\">\n  @if (element.callback || element.disabled) {\n  <div\n    (click)=\"this.callback(element)\"\n    class=\"toggle-element\"\n    [class.active]=\"this.isActive(element)\"\n    [class.disabled]=\"element.disabled\"\n  >\n    <ng-template\n      [ngTemplateOutlet]=\"Item\"\n      [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n    >\n    </ng-template>\n  </div>\n  } @else {\n  <div\n    class=\"toggle-element\"\n    routerLinkActive=\"active\"\n    [routerLinkActiveOptions]=\"{ exact: element.exact }\"\n    [routerLink]=\"[this.getLink(element)]\"\n    [queryParamsHandling]=\"element.queryParamsHandling\"\n    [replaceUrl]=\"element.replaceUrl\"\n    [ngClass]=\"{ disabled: element.disabled }\"\n  >\n    <ng-template\n      [ngTemplateOutlet]=\"Item\"\n      [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n    >\n    </ng-template>\n  </div>\n  }\n</ng-template>\n\n<ng-template #Item let-item=\"item\" [typedTemplate]=\"this.typeItem\">\n  <div class=\"label flex-row align-center mb-space-xs\">\n    @if (this.hasFontIcon(item) || this.hasIconImage(item)) {\n    <div class=\"icon\">\n      @if (this.hasFontIcon(item)) {\n      <span class=\"icon-material\">\n        <ta-font-icon [name]=\"this.getFontIcon(item)\"></ta-font-icon>\n      </span>\n      } @else if (this.hasIconImage(item)) {\n      <span class=\"icon-image\">\n        <ta-local-icon [type]=\"this.getIcon(item)\" size=\"xs\"></ta-local-icon>\n      </span>\n      }\n    </div>\n    } @if (item.label) {\n    <div class=\"text-truncate\">\n      {{ item.label | translate }}\n    </div>\n    } @if (item.options?.notificationBadge !== null) {\n    <div class=\"badge ml-space-xs\">\n      {{ item.options?.notificationBadge?.label }}\n    </div>\n    } @if (item.translationData?.length) {\n    <div>({{ item.translationData?.length }})</div>\n    }\n  </div>\n</ng-template>\n", styles: [".toggle-container{border-bottom:1px solid var(--ta-neutral-300)}.toggle-container.switch-container{overflow:hidden}.toggle-container .badge{width:20px;height:20px;background-color:var(--ta-brand-700);color:var(--ta-brand-50);border-radius:50%;display:flex;justify-content:center;align-items:center}.toggle-container .toggle-element{color:var(--ta-neutral-800);font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-bold-weight);cursor:pointer}.toggle-container .toggle-element .icon{margin:auto;color:var(--ta-brand-700)}.toggle-container .toggle-element.active .icon{color:var(--ta-icon-brand-primary)}.toggle-container.switch{border-radius:var(--ta-space-xs)}.toggle-container.switch .toggle-element{background:var(--ta-surface-secondary)}.toggle-container.switch .toggle-element.disabled{opacity:.5}.toggle-container.switch .toggle-element.active{background:var(--ta-brand-700);color:var(--ta-neutral-50)}.toggle-container.tab .toggle-element.disabled{opacity:.5}.toggle-container.tab .toggle-element.active{color:var(--ta-text-brand-primary);border-bottom:2px solid var(--ta-border-brand)}.label{font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-default-weight)}\n"], dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: RouterModule }, { kind: "directive", type: i1.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i1.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i2.TranslatePipe, name: "translate" }, { kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }, { kind: "component", type: LocalIconComponent, selector: "ta-local-icon", inputs: ["type", "size", "rotation"] }, { kind: "component", type: SwiperLightComponent, selector: "ta-swiper-light", inputs: ["items", "template", "swiperClasses", "containerClasses", "forced"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: ToggleNavigationComponent, decorators: [{
            type: Component,
            args: [{ selector: "ta-toggle-navigation", standalone: true, imports: [
                        NgIf,
                        NgClass,
                        NgTemplateOutlet,
                        RouterModule,
                        TranslateModule,
                        FontIconComponent,
                        LocalIconComponent,
                        SwiperLightComponent,
                    ], template: "<div\n  class=\"toggle-container\"\n  [ngClass]=\"this.containerCss\"\n  [class.switch-container]=\"this.container === 'switch'\"\n>\n  <ta-swiper-light\n    [items]=\"this.menu.elements\"\n    [template]=\"template\"\n    [forced]=\"true\"\n    swiperClasses=\"g-space-lg pt-space-md\"\n  ></ta-swiper-light>\n</div>\n\n<ng-template #template let-element=\"element\">\n  @if (element.callback || element.disabled) {\n  <div\n    (click)=\"this.callback(element)\"\n    class=\"toggle-element\"\n    [class.active]=\"this.isActive(element)\"\n    [class.disabled]=\"element.disabled\"\n  >\n    <ng-template\n      [ngTemplateOutlet]=\"Item\"\n      [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n    >\n    </ng-template>\n  </div>\n  } @else {\n  <div\n    class=\"toggle-element\"\n    routerLinkActive=\"active\"\n    [routerLinkActiveOptions]=\"{ exact: element.exact }\"\n    [routerLink]=\"[this.getLink(element)]\"\n    [queryParamsHandling]=\"element.queryParamsHandling\"\n    [replaceUrl]=\"element.replaceUrl\"\n    [ngClass]=\"{ disabled: element.disabled }\"\n  >\n    <ng-template\n      [ngTemplateOutlet]=\"Item\"\n      [ngTemplateOutletContext]=\"{\n          item: element,\n        }\"\n    >\n    </ng-template>\n  </div>\n  }\n</ng-template>\n\n<ng-template #Item let-item=\"item\" [typedTemplate]=\"this.typeItem\">\n  <div class=\"label flex-row align-center mb-space-xs\">\n    @if (this.hasFontIcon(item) || this.hasIconImage(item)) {\n    <div class=\"icon\">\n      @if (this.hasFontIcon(item)) {\n      <span class=\"icon-material\">\n        <ta-font-icon [name]=\"this.getFontIcon(item)\"></ta-font-icon>\n      </span>\n      } @else if (this.hasIconImage(item)) {\n      <span class=\"icon-image\">\n        <ta-local-icon [type]=\"this.getIcon(item)\" size=\"xs\"></ta-local-icon>\n      </span>\n      }\n    </div>\n    } @if (item.label) {\n    <div class=\"text-truncate\">\n      {{ item.label | translate }}\n    </div>\n    } @if (item.options?.notificationBadge !== null) {\n    <div class=\"badge ml-space-xs\">\n      {{ item.options?.notificationBadge?.label }}\n    </div>\n    } @if (item.translationData?.length) {\n    <div>({{ item.translationData?.length }})</div>\n    }\n  </div>\n</ng-template>\n", styles: [".toggle-container{border-bottom:1px solid var(--ta-neutral-300)}.toggle-container.switch-container{overflow:hidden}.toggle-container .badge{width:20px;height:20px;background-color:var(--ta-brand-700);color:var(--ta-brand-50);border-radius:50%;display:flex;justify-content:center;align-items:center}.toggle-container .toggle-element{color:var(--ta-neutral-800);font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-bold-weight);cursor:pointer}.toggle-container .toggle-element .icon{margin:auto;color:var(--ta-brand-700)}.toggle-container .toggle-element.active .icon{color:var(--ta-icon-brand-primary)}.toggle-container.switch{border-radius:var(--ta-space-xs)}.toggle-container.switch .toggle-element{background:var(--ta-surface-secondary)}.toggle-container.switch .toggle-element.disabled{opacity:.5}.toggle-container.switch .toggle-element.active{background:var(--ta-brand-700);color:var(--ta-neutral-50)}.toggle-container.tab .toggle-element.disabled{opacity:.5}.toggle-container.tab .toggle-element.active{color:var(--ta-text-brand-primary);border-bottom:2px solid var(--ta-border-brand)}.label{font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-default-weight)}\n"] }]
        }], ctorParameters: () => [], propDecorators: { menu: [{
                type: Input
            }], container: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9nZ2xlLW5hdmlnYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb21wb25lbnRzL3RvZ2dsZS1uYXZpZ2F0aW9uL3RvZ2dsZS1uYXZpZ2F0aW9uLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy90b2dnbGUtbmF2aWdhdGlvbi90b2dnbGUtbmF2aWdhdGlvbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUUvQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFdEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUU5QyxPQUFPLEVBQ0wsV0FBVyxFQUNYLE9BQU8sRUFDUCxXQUFXLEVBQ1gsWUFBWSxHQUNiLE1BQU0sNEJBQTRCLENBQUM7QUFLcEMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7Ozs7QUFFOUQ7O0dBRUc7QUFpQkgsTUFBTSxPQUFPLHlCQUF5QjtJQVdwQztRQUpPLGNBQVMsR0FBVyxFQUFFLENBQUM7UUFFdkIsaUJBQVksR0FBWSxLQUFLLENBQUM7UUFHbkMsaUJBQWlCLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVELElBQUksWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVELFFBQVE7UUFDTixJQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FDckIsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxDQUN2RCxFQUNELENBQUM7WUFDRCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztRQUMzQixDQUFDO1FBRUQsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDdkUsSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDNUIsQ0FBQztJQUNILENBQUM7SUFFTSxXQUFXLENBQUMsSUFBc0M7UUFDdkQsT0FBTyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVNLFlBQVksQ0FBQyxJQUFzQztRQUN4RCxPQUFPLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRU0sT0FBTyxDQUFDLElBQXNDO1FBQ25ELE9BQU8sT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFFTSxXQUFXLENBQUMsSUFBc0M7UUFDdkQsT0FBTyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVNLE9BQU8sQ0FBQyxJQUFzQztRQUNuRCxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFO1lBQUUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBRXBELE9BQU8sRUFBRSxDQUFDLENBQUMsK0NBQStDO0lBQzVELENBQUM7SUFFTSxRQUFRLENBQUMsSUFBYztRQUM1QixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNsQixPQUFPO1FBQ1QsQ0FBQztRQUNELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUMxQixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNsQixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDbEIsQ0FBQztJQUNILENBQUM7SUFFTSxRQUFRLENBQUMsSUFBYztRQUM1QixPQUFPLElBQUksQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUNyQyxDQUFDOytHQXBFVSx5QkFBeUI7bUdBQXpCLHlCQUF5QixrSUN4Q3RDLG91RUE2RUEsaXdDRDlDSSxPQUFPLG9GQUNQLGdCQUFnQixtSkFDaEIsWUFBWSxnZkFDWixlQUFlLDRGQUNmLGlCQUFpQixtRkFDakIsa0JBQWtCLGdHQUNsQixvQkFBb0I7OzRGQUdYLHlCQUF5QjtrQkFoQnJDLFNBQVM7K0JBQ0Usc0JBQXNCLGNBR3BCLElBQUksV0FDUDt3QkFDUCxJQUFJO3dCQUNKLE9BQU87d0JBQ1AsZ0JBQWdCO3dCQUNoQixZQUFZO3dCQUNaLGVBQWU7d0JBQ2YsaUJBQWlCO3dCQUNqQixrQkFBa0I7d0JBQ2xCLG9CQUFvQjtxQkFDckI7d0RBSUQsSUFBSTtzQkFESCxLQUFLO2dCQUlOLFNBQVM7c0JBRFIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5nQ2xhc3MsIE5nSWYsIE5nVGVtcGxhdGVPdXRsZXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29tbW9uXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgUm91dGVyTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL3JvdXRlclwiO1xuXG5pbXBvcnQgeyBUcmFuc2xhdGVNb2R1bGUgfSBmcm9tIFwiQG5neC10cmFuc2xhdGUvY29yZVwiO1xuXG5pbXBvcnQgeyBGb250SWNvbkNvbXBvbmVudCwgTG9jYWxJY29uQ29tcG9uZW50IH0gZnJvbSBcIkB0YS9pY29uc1wiO1xuaW1wb3J0IHsgU3dpcGVyTGlnaHRDb21wb25lbnQgfSBmcm9tIFwiQHRhL3VpXCI7XG5cbmltcG9ydCB7XG4gIGdldEZvbnRJY29uLFxuICBnZXRJY29uLFxuICBoYXNGb250SWNvbixcbiAgaGFzSWNvbkltYWdlLFxufSBmcm9tIFwiLi4vLi4vaGVscGVycy9pY29uLW1hbmFnZXJcIjtcbmltcG9ydCB7IE1lbnVBY3Rpb24gfSBmcm9tIFwiLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9hY3Rpb25cIjtcbmltcG9ydCB7IE1lbnVCYXNlIH0gZnJvbSBcIi4uLy4uL21vZGVscy9tZW51L2l0ZW0vYmFzZVwiO1xuaW1wb3J0IHsgTWVudUljb24gfSBmcm9tIFwiLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9pY29uXCI7XG5pbXBvcnQgeyBNZW51IH0gZnJvbSBcIi4uLy4uL21vZGVscy9tZW51L21lbnVcIjtcbmltcG9ydCB7IFRhVHJhbnNsYXRpb25NZW51IH0gZnJvbSBcIi4uLy4uL3RyYW5zbGF0aW9uLnNlcnZpY2VcIjtcblxuLypcbiAqKiBAZGVwcmVjYXRlZFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6IFwidGEtdG9nZ2xlLW5hdmlnYXRpb25cIixcbiAgdGVtcGxhdGVVcmw6IFwiLi90b2dnbGUtbmF2aWdhdGlvbi5jb21wb25lbnQuaHRtbFwiLFxuICBzdHlsZVVybHM6IFtcIi4vdG9nZ2xlLW5hdmlnYXRpb24uY29tcG9uZW50LnNjc3NcIl0sXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBOZ0lmLFxuICAgIE5nQ2xhc3MsXG4gICAgTmdUZW1wbGF0ZU91dGxldCxcbiAgICBSb3V0ZXJNb2R1bGUsXG4gICAgVHJhbnNsYXRlTW9kdWxlLFxuICAgIEZvbnRJY29uQ29tcG9uZW50LFxuICAgIExvY2FsSWNvbkNvbXBvbmVudCxcbiAgICBTd2lwZXJMaWdodENvbXBvbmVudCxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgVG9nZ2xlTmF2aWdhdGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpXG4gIG1lbnUhOiBNZW51O1xuXG4gIEBJbnB1dCgpXG4gIGNvbnRhaW5lciE6IFwidGFiXCIgfCBcInN3aXRjaFwiO1xuXG4gIHB1YmxpYyBhY3RpdmVLZXk6IHN0cmluZyA9IFwiXCI7XG4gIHB1YmxpYyByZWFkb25seSB0eXBlSXRlbSE6IHsgaXRlbTogTWVudUJhc2UgfCBNZW51QWN0aW9uIHwgTWVudUljb24gfTtcbiAgcHVibGljIG5vdGlmRW5hYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIFRhVHJhbnNsYXRpb25NZW51LmdldEluc3RhbmNlKCk7XG4gIH1cblxuICBnZXQgY29udGFpbmVyQ3NzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lciA/PyBcIlwiO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5tZW51LmVsZW1lbnRzLmZpbmQoXG4gICAgICAgIChlbGVtZW50KSA9PiBlbGVtZW50Lm9wdGlvbnM/Lm5vdGlmaWNhdGlvbkJhZGdlPy5sYWJlbFxuICAgICAgKVxuICAgICkge1xuICAgICAgdGhpcy5ub3RpZkVuYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGl2ZUl0ZW0gPSB0aGlzLm1lbnUuZWxlbWVudHMuZmluZCgoaXRlbSkgPT4gaXRlbS5kZWZhdWx0T3Blbik7XG4gICAgaWYgKGFjdGl2ZUl0ZW0pIHtcbiAgICAgIHRoaXMuY2FsbGJhY2soYWN0aXZlSXRlbSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhhc0ZvbnRJY29uKGl0ZW06IE1lbnVJY29uIHwgTWVudUFjdGlvbiB8IE1lbnVCYXNlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0ZvbnRJY29uKGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGhhc0ljb25JbWFnZShpdGVtOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNJY29uSW1hZ2UoaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0SWNvbihpdGVtOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSkge1xuICAgIHJldHVybiBnZXRJY29uKGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGdldEZvbnRJY29uKGl0ZW06IE1lbnVJY29uIHwgTWVudUFjdGlvbiB8IE1lbnVCYXNlKSB7XG4gICAgcmV0dXJuIGdldEZvbnRJY29uKGl0ZW0pO1xuICB9XG5cbiAgcHVibGljIGdldExpbmsoaXRlbTogTWVudUljb24gfCBNZW51QWN0aW9uIHwgTWVudUJhc2UpIHtcbiAgICBpZiAoaXRlbS5saW5rICYmIGl0ZW0ubGluayAhPT0gXCJcIikgcmV0dXJuIGl0ZW0ubGluaztcblxuICAgIHJldHVybiBcIlwiOyAvLyBUT0RPIHRoaXMuX25hdmlnYXRpb25TZXJ2aWNlLmN1cnJlbnRQYWdlVXJsO1xuICB9XG5cbiAgcHVibGljIGNhbGxiYWNrKGl0ZW06IE1lbnVCYXNlKSB7XG4gICAgaWYgKGl0ZW0uZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmVLZXkgPSBpdGVtLmtleTtcbiAgICBpZiAoaXRlbS5jYWxsYmFjaykge1xuICAgICAgaXRlbS5jYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc0FjdGl2ZShpdGVtOiBNZW51QmFzZSkge1xuICAgIHJldHVybiBpdGVtLmtleSA9PT0gdGhpcy5hY3RpdmVLZXk7XG4gIH1cbn1cbiIsIjxkaXZcbiAgY2xhc3M9XCJ0b2dnbGUtY29udGFpbmVyXCJcbiAgW25nQ2xhc3NdPVwidGhpcy5jb250YWluZXJDc3NcIlxuICBbY2xhc3Muc3dpdGNoLWNvbnRhaW5lcl09XCJ0aGlzLmNvbnRhaW5lciA9PT0gJ3N3aXRjaCdcIlxuPlxuICA8dGEtc3dpcGVyLWxpZ2h0XG4gICAgW2l0ZW1zXT1cInRoaXMubWVudS5lbGVtZW50c1wiXG4gICAgW3RlbXBsYXRlXT1cInRlbXBsYXRlXCJcbiAgICBbZm9yY2VkXT1cInRydWVcIlxuICAgIHN3aXBlckNsYXNzZXM9XCJnLXNwYWNlLWxnIHB0LXNwYWNlLW1kXCJcbiAgPjwvdGEtc3dpcGVyLWxpZ2h0PlxuPC9kaXY+XG5cbjxuZy10ZW1wbGF0ZSAjdGVtcGxhdGUgbGV0LWVsZW1lbnQ9XCJlbGVtZW50XCI+XG4gIEBpZiAoZWxlbWVudC5jYWxsYmFjayB8fCBlbGVtZW50LmRpc2FibGVkKSB7XG4gIDxkaXZcbiAgICAoY2xpY2spPVwidGhpcy5jYWxsYmFjayhlbGVtZW50KVwiXG4gICAgY2xhc3M9XCJ0b2dnbGUtZWxlbWVudFwiXG4gICAgW2NsYXNzLmFjdGl2ZV09XCJ0aGlzLmlzQWN0aXZlKGVsZW1lbnQpXCJcbiAgICBbY2xhc3MuZGlzYWJsZWRdPVwiZWxlbWVudC5kaXNhYmxlZFwiXG4gID5cbiAgICA8bmctdGVtcGxhdGVcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cIkl0ZW1cIlxuICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cIntcbiAgICAgICAgICBpdGVtOiBlbGVtZW50LFxuICAgICAgICB9XCJcbiAgICA+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgPC9kaXY+XG4gIH0gQGVsc2Uge1xuICA8ZGl2XG4gICAgY2xhc3M9XCJ0b2dnbGUtZWxlbWVudFwiXG4gICAgcm91dGVyTGlua0FjdGl2ZT1cImFjdGl2ZVwiXG4gICAgW3JvdXRlckxpbmtBY3RpdmVPcHRpb25zXT1cInsgZXhhY3Q6IGVsZW1lbnQuZXhhY3QgfVwiXG4gICAgW3JvdXRlckxpbmtdPVwiW3RoaXMuZ2V0TGluayhlbGVtZW50KV1cIlxuICAgIFtxdWVyeVBhcmFtc0hhbmRsaW5nXT1cImVsZW1lbnQucXVlcnlQYXJhbXNIYW5kbGluZ1wiXG4gICAgW3JlcGxhY2VVcmxdPVwiZWxlbWVudC5yZXBsYWNlVXJsXCJcbiAgICBbbmdDbGFzc109XCJ7IGRpc2FibGVkOiBlbGVtZW50LmRpc2FibGVkIH1cIlxuICA+XG4gICAgPG5nLXRlbXBsYXRlXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJJdGVtXCJcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7XG4gICAgICAgICAgaXRlbTogZWxlbWVudCxcbiAgICAgICAgfVwiXG4gICAgPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIDwvZGl2PlxuICB9XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI0l0ZW0gbGV0LWl0ZW09XCJpdGVtXCIgW3R5cGVkVGVtcGxhdGVdPVwidGhpcy50eXBlSXRlbVwiPlxuICA8ZGl2IGNsYXNzPVwibGFiZWwgZmxleC1yb3cgYWxpZ24tY2VudGVyIG1iLXNwYWNlLXhzXCI+XG4gICAgQGlmICh0aGlzLmhhc0ZvbnRJY29uKGl0ZW0pIHx8IHRoaXMuaGFzSWNvbkltYWdlKGl0ZW0pKSB7XG4gICAgPGRpdiBjbGFzcz1cImljb25cIj5cbiAgICAgIEBpZiAodGhpcy5oYXNGb250SWNvbihpdGVtKSkge1xuICAgICAgPHNwYW4gY2xhc3M9XCJpY29uLW1hdGVyaWFsXCI+XG4gICAgICAgIDx0YS1mb250LWljb24gW25hbWVdPVwidGhpcy5nZXRGb250SWNvbihpdGVtKVwiPjwvdGEtZm9udC1pY29uPlxuICAgICAgPC9zcGFuPlxuICAgICAgfSBAZWxzZSBpZiAodGhpcy5oYXNJY29uSW1hZ2UoaXRlbSkpIHtcbiAgICAgIDxzcGFuIGNsYXNzPVwiaWNvbi1pbWFnZVwiPlxuICAgICAgICA8dGEtbG9jYWwtaWNvbiBbdHlwZV09XCJ0aGlzLmdldEljb24oaXRlbSlcIiBzaXplPVwieHNcIj48L3RhLWxvY2FsLWljb24+XG4gICAgICA8L3NwYW4+XG4gICAgICB9XG4gICAgPC9kaXY+XG4gICAgfSBAaWYgKGl0ZW0ubGFiZWwpIHtcbiAgICA8ZGl2IGNsYXNzPVwidGV4dC10cnVuY2F0ZVwiPlxuICAgICAge3sgaXRlbS5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxuICAgIDwvZGl2PlxuICAgIH0gQGlmIChpdGVtLm9wdGlvbnM/Lm5vdGlmaWNhdGlvbkJhZGdlICE9PSBudWxsKSB7XG4gICAgPGRpdiBjbGFzcz1cImJhZGdlIG1sLXNwYWNlLXhzXCI+XG4gICAgICB7eyBpdGVtLm9wdGlvbnM/Lm5vdGlmaWNhdGlvbkJhZGdlPy5sYWJlbCB9fVxuICAgIDwvZGl2PlxuICAgIH0gQGlmIChpdGVtLnRyYW5zbGF0aW9uRGF0YT8ubGVuZ3RoKSB7XG4gICAgPGRpdj4oe3sgaXRlbS50cmFuc2xhdGlvbkRhdGE/Lmxlbmd0aCB9fSk8L2Rpdj5cbiAgICB9XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==