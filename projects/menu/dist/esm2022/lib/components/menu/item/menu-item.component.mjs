import { NgClass, NgTemplateOutlet } from "@angular/common";
import { Component, Input, ViewChild } from "@angular/core";
import { MatMenuModule, MatMenuTrigger } from "@angular/material/menu";
import { RouterModule } from "@angular/router";
import { TranslateModule } from "@ngx-translate/core";
import { FontIconComponent } from "@ta/icons";
import { NotificationBadgeComponent } from "@ta/ui";
import { TemplateModalContainer } from "@ta/ui";
import { TaBaseComponent, TypedTemplateDirective } from "@ta/utils";
import { getFontIcon, getIcon, hasFontIcon, hasIconImage, } from "../../../helpers/icon-manager";
import { TaTranslationMenu } from "../../../translation.service";
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
import * as i2 from "@angular/router";
import * as i3 from "@angular/material/menu";
import * as i4 from "@ngx-translate/core";
export class MenuItemComponent extends TaBaseComponent {
    constructor(modal) {
        super();
        this.modal = modal;
        this.styleType = "bloc";
        this.isOpen = false;
        TaTranslationMenu.getInstance();
    }
    ngOnInit() {
        this.isOpen = this.item.defaultOpen;
    }
    getStyleType() {
        return this.styleType + " " + this.item.style;
    }
    hasFontIcon() {
        return hasFontIcon(this.item);
    }
    hasIconImage() {
        return hasIconImage(this.item);
    }
    getIcon() {
        return getIcon(this.item);
    }
    getFontIcon() {
        return getFontIcon(this.item);
    }
    hasChild() {
        return this.item.children.length > 0;
    }
    toggle() {
        this.isOpen = !this.isOpen;
    }
    getTemplate() {
        if (this.item.isMenuPanel) {
            return this.item.template;
        }
        return null;
    }
    trackByFn(index, item) {
        return this.item + "-" + item.key;
    }
    executeCallback() {
        const myTemplate = this.getTemplate();
        if (myTemplate) {
            if (this.breakpoints.isLessThanXS) {
                this.modal.open(TemplateModalContainer, {
                    data: {
                        template: myTemplate,
                    },
                });
            }
            else {
                this.triggerMenu.openMenu();
            }
        }
        else {
            this.item.callback?.();
        }
    }
    getLink() {
        if (this.item.link && this.item.link !== "")
            return this.item.link;
        return "";
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: MenuItemComponent, deps: [{ token: i1.MatDialog }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: MenuItemComponent, isStandalone: true, selector: "ta-menu-item", inputs: { item: "item", styleType: "styleType" }, viewQueries: [{ propertyName: "triggerMenu", first: true, predicate: MatMenuTrigger, descendants: true }], usesInheritance: true, ngImport: i0, template: "@if (!this.hasChild()) {\n<ng-container [style.cursor]=\"this.item.callback ? 'pointer' : 'default'\">\n  @if (this.getLink()) {\n  <a\n    class=\"link\"\n    [ngClass]=\"this.getStyleType()\"\n    routerLinkActive=\"active\"\n    [routerLinkActiveOptions]=\"{ exact: this.item.exact }\"\n    [routerLink]=\"[this.getLink()]\"\n    [replaceUrl]=\"this.item.replaceUrl\"\n  >\n    <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n  </a>\n  } @else {\n  <a\n    (click)=\"this.executeCallback()\"\n    class=\"link\"\n    [ngClass]=\"this.getStyleType()\"\n  >\n    <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n  </a>\n  }\n</ng-container>\n}\n\n<ng-template #Item [typedTemplate]=\"this.typeToken\">\n  <div class=\"item pointer\" [class.disable]=\"item.disabled\">\n    <div class=\"icon\">\n      @if (this.hasFontIcon()) {\n      <span class=\"icon-material\">\n        <ta-font-icon\n          [name]=\"this.getFontIcon()\"\n          size=\"xs\"\n          [ngClass]=\"item.iconsColor\"\n        ></ta-font-icon>\n      </span>\n      }\n    </div>\n\n    <div class=\"title\">{{ item.label | translate }}</div>\n\n    <div class=\"badge-container d-flex\">\n      @if (item.options?.notificationBadge?.label) {\n      <ta-notification-badge\n        [number]=\"item.options?.notificationBadge?.label || 0\"\n        [style]=\"'brand-700'\"\n        fontSize=\"xs\"\n        [relative]=\"true\"\n      ></ta-notification-badge>\n      } @let extraTemplate = item.options?.extraTemplate; @if (extraTemplate) {\n      <ng-template [ngTemplateOutlet]=\"extraTemplate\"></ng-template>\n      }\n    </div>\n    @if (item.endingIcon) {\n    <div class=\"ending-icon-container\">\n      <ta-font-icon\n        [name]=\"item.endingIcon\"\n        [ngClass]=\"item.iconsColor\"\n      ></ta-font-icon>\n    </div>\n    } @let template = this.getTemplate(); @if (template) {\n    <div class=\"trigger-container\">\n      <div class=\"trigger\" [matMenuTriggerFor]=\"menu\" #triggerPanel></div>\n      <mat-menu #menu=\"matMenu\">\n        <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n      </mat-menu>\n    </div>\n    }\n  </div>\n</ng-template>\n", styles: [".link{display:flex;flex-direction:row;text-decoration:none;padding:var(--ta-space-xs)}.link .item{width:100%;text-align:center;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-start}.link .icon,.link .title{padding:0;margin:0;color:var(--ta-text-secondary)}.link .icon{margin-right:var(--ta-space-sm)}.link.active .icon,.link:hover .icon{color:var(--ta-icon-brand-primary)}.link.active .title,.link:hover .title{color:var(--ta-text-primary)}.link.dark .icon,.link.dark .ending-icon{color:get-var(icon,tertiary)}.link.dark .title{color:get-var(text,primary)}.link.dark:hover:not(.disabled):not(.active) .icon,.link.dark:hover:not(.disabled):not(.active) .ending-icon{color:get-var(icon,brand,primary)}.link.dark:hover:not(.disabled):not(.active) .title{color:get-var(text,brand,primary)}.link.dark:hover:not(.disabled):not(.active){background-color:get-var(surface,brand,tertiary);border-radius:get-var(radius,label)}.link.horizontal{justify-content:center}.link.horizontal .item{display:flex;flex:1 1 100%;position:relative}.link.horizontal .item .badge-container{position:absolute;top:-10px;right:0}.link.vertical{padding:var(--ta-space-md) var(--ta-space-md)}.link.vertical .icon,.link.vertical .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.vertical .icon{margin-right:var(--ta-space-md)}@media screen and (max-width: 575px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 576px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 992px){.link.responsive{padding:var(--ta-space-md) var(--ta-space-md)}.link.responsive .icon,.link.responsive .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.responsive .icon{margin-right:var(--ta-space-md)}}.link.responsive.menu-minimized .icon{margin-left:auto!important;margin-right:auto!important}.link.responsive.menu-minimized .title{display:none}.link .disable{opacity:.5}.link .icon-image{margin-bottom:3px}.link .badge-container{position:relative;margin-left:auto}.link .ending-icon-container{display:flex;align-items:center;justify-content:flex-end}.trigger-container{position:relative}.trigger-container .trigger{position:absolute;top:0;right:calc(var(--ta-space-xl) * -1)}\n"], dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: RouterModule }, { kind: "directive", type: i2.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i2.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "ngmodule", type: MatMenuModule }, { kind: "component", type: i3.MatMenu, selector: "mat-menu", inputs: ["backdropClass", "aria-label", "aria-labelledby", "aria-describedby", "xPosition", "yPosition", "overlapTrigger", "hasBackdrop", "class", "classList"], outputs: ["closed", "close"], exportAs: ["matMenu"] }, { kind: "directive", type: i3.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", inputs: ["mat-menu-trigger-for", "matMenuTriggerFor", "matMenuTriggerData", "matMenuTriggerRestoreFocus"], outputs: ["menuOpened", "onMenuOpen", "menuClosed", "onMenuClose"], exportAs: ["matMenuTrigger"] }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i4.TranslatePipe, name: "translate" }, { kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }, { kind: "component", type: NotificationBadgeComponent, selector: "ta-notification-badge", inputs: ["number", "fontSize", "style", "relative"] }, { kind: "directive", type: TypedTemplateDirective, selector: "ng-template[typedTemplate]", inputs: ["typedTemplate"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: MenuItemComponent, decorators: [{
            type: Component,
            args: [{ selector: "ta-menu-item", standalone: true, imports: [
                        NgClass,
                        NgTemplateOutlet,
                        RouterModule,
                        MatMenuModule,
                        TranslateModule,
                        FontIconComponent,
                        NotificationBadgeComponent,
                        TypedTemplateDirective,
                    ], template: "@if (!this.hasChild()) {\n<ng-container [style.cursor]=\"this.item.callback ? 'pointer' : 'default'\">\n  @if (this.getLink()) {\n  <a\n    class=\"link\"\n    [ngClass]=\"this.getStyleType()\"\n    routerLinkActive=\"active\"\n    [routerLinkActiveOptions]=\"{ exact: this.item.exact }\"\n    [routerLink]=\"[this.getLink()]\"\n    [replaceUrl]=\"this.item.replaceUrl\"\n  >\n    <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n  </a>\n  } @else {\n  <a\n    (click)=\"this.executeCallback()\"\n    class=\"link\"\n    [ngClass]=\"this.getStyleType()\"\n  >\n    <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n  </a>\n  }\n</ng-container>\n}\n\n<ng-template #Item [typedTemplate]=\"this.typeToken\">\n  <div class=\"item pointer\" [class.disable]=\"item.disabled\">\n    <div class=\"icon\">\n      @if (this.hasFontIcon()) {\n      <span class=\"icon-material\">\n        <ta-font-icon\n          [name]=\"this.getFontIcon()\"\n          size=\"xs\"\n          [ngClass]=\"item.iconsColor\"\n        ></ta-font-icon>\n      </span>\n      }\n    </div>\n\n    <div class=\"title\">{{ item.label | translate }}</div>\n\n    <div class=\"badge-container d-flex\">\n      @if (item.options?.notificationBadge?.label) {\n      <ta-notification-badge\n        [number]=\"item.options?.notificationBadge?.label || 0\"\n        [style]=\"'brand-700'\"\n        fontSize=\"xs\"\n        [relative]=\"true\"\n      ></ta-notification-badge>\n      } @let extraTemplate = item.options?.extraTemplate; @if (extraTemplate) {\n      <ng-template [ngTemplateOutlet]=\"extraTemplate\"></ng-template>\n      }\n    </div>\n    @if (item.endingIcon) {\n    <div class=\"ending-icon-container\">\n      <ta-font-icon\n        [name]=\"item.endingIcon\"\n        [ngClass]=\"item.iconsColor\"\n      ></ta-font-icon>\n    </div>\n    } @let template = this.getTemplate(); @if (template) {\n    <div class=\"trigger-container\">\n      <div class=\"trigger\" [matMenuTriggerFor]=\"menu\" #triggerPanel></div>\n      <mat-menu #menu=\"matMenu\">\n        <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n      </mat-menu>\n    </div>\n    }\n  </div>\n</ng-template>\n", styles: [".link{display:flex;flex-direction:row;text-decoration:none;padding:var(--ta-space-xs)}.link .item{width:100%;text-align:center;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-start}.link .icon,.link .title{padding:0;margin:0;color:var(--ta-text-secondary)}.link .icon{margin-right:var(--ta-space-sm)}.link.active .icon,.link:hover .icon{color:var(--ta-icon-brand-primary)}.link.active .title,.link:hover .title{color:var(--ta-text-primary)}.link.dark .icon,.link.dark .ending-icon{color:get-var(icon,tertiary)}.link.dark .title{color:get-var(text,primary)}.link.dark:hover:not(.disabled):not(.active) .icon,.link.dark:hover:not(.disabled):not(.active) .ending-icon{color:get-var(icon,brand,primary)}.link.dark:hover:not(.disabled):not(.active) .title{color:get-var(text,brand,primary)}.link.dark:hover:not(.disabled):not(.active){background-color:get-var(surface,brand,tertiary);border-radius:get-var(radius,label)}.link.horizontal{justify-content:center}.link.horizontal .item{display:flex;flex:1 1 100%;position:relative}.link.horizontal .item .badge-container{position:absolute;top:-10px;right:0}.link.vertical{padding:var(--ta-space-md) var(--ta-space-md)}.link.vertical .icon,.link.vertical .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.vertical .icon{margin-right:var(--ta-space-md)}@media screen and (max-width: 575px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 576px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 992px){.link.responsive{padding:var(--ta-space-md) var(--ta-space-md)}.link.responsive .icon,.link.responsive .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.responsive .icon{margin-right:var(--ta-space-md)}}.link.responsive.menu-minimized .icon{margin-left:auto!important;margin-right:auto!important}.link.responsive.menu-minimized .title{display:none}.link .disable{opacity:.5}.link .icon-image{margin-bottom:3px}.link .badge-container{position:relative;margin-left:auto}.link .ending-icon-container{display:flex;align-items:center;justify-content:flex-end}.trigger-container{position:relative}.trigger-container .trigger{position:absolute;top:0;right:calc(var(--ta-space-xl) * -1)}\n"] }]
        }], ctorParameters: () => [{ type: i1.MatDialog }], propDecorators: { item: [{
                type: Input
            }], styleType: [{
                type: Input
            }], triggerMenu: [{
                type: ViewChild,
                args: [MatMenuTrigger]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9tZW51L2l0ZW0vbWVudS1pdGVtLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9tZW51L2l0ZW0vbWVudS1pdGVtLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFcEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxjQUFjLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN2RSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFL0MsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRXRELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUM5QyxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDcEQsT0FBTyxFQUFFLHNCQUFzQixFQUE4QixNQUFNLFFBQVEsQ0FBQztBQUM1RSxPQUFPLEVBQUUsZUFBZSxFQUFFLHNCQUFzQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRXBFLE9BQU8sRUFDTCxXQUFXLEVBQ1gsT0FBTyxFQUNQLFdBQVcsRUFDWCxZQUFZLEdBQ2IsTUFBTSwrQkFBK0IsQ0FBQztBQUt2QyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQzs7Ozs7O0FBa0JqRSxNQUFNLE9BQU8saUJBQWtCLFNBQVEsZUFBZTtJQVlwRCxZQUFtQixLQUFnQjtRQUNqQyxLQUFLLEVBQUUsQ0FBQztRQURTLFVBQUssR0FBTCxLQUFLLENBQVc7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QUFJO3NCQURILEtBQUs7Z0JBSU4sU0FBUztzQkFEUixLQUFLO2dCQUdxQixXQUFXO3NCQUFyQyxTQUFTO3VCQUFDLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZ0NsYXNzLCBOZ1RlbXBsYXRlT3V0bGV0IH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vblwiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBWaWV3Q2hpbGQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgTWF0RGlhbG9nIH0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsL2RpYWxvZ1wiO1xuaW1wb3J0IHsgTWF0TWVudU1vZHVsZSwgTWF0TWVudVRyaWdnZXIgfSBmcm9tIFwiQGFuZ3VsYXIvbWF0ZXJpYWwvbWVudVwiO1xuaW1wb3J0IHsgUm91dGVyTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL3JvdXRlclwiO1xuXG5pbXBvcnQgeyBUcmFuc2xhdGVNb2R1bGUgfSBmcm9tIFwiQG5neC10cmFuc2xhdGUvY29yZVwiO1xuXG5pbXBvcnQgeyBGb250SWNvbkNvbXBvbmVudCB9IGZyb20gXCJAdGEvaWNvbnNcIjtcbmltcG9ydCB7IE5vdGlmaWNhdGlvbkJhZGdlQ29tcG9uZW50IH0gZnJvbSBcIkB0YS91aVwiO1xuaW1wb3J0IHsgVGVtcGxhdGVNb2RhbENvbnRhaW5lciwgVGVtcGxhdGVNb2RhbENvbnRhaW5lckRhdGEgfSBmcm9tIFwiQHRhL3VpXCI7XG5pbXBvcnQgeyBUYUJhc2VDb21wb25lbnQsIFR5cGVkVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tIFwiQHRhL3V0aWxzXCI7XG5cbmltcG9ydCB7XG4gIGdldEZvbnRJY29uLFxuICBnZXRJY29uLFxuICBoYXNGb250SWNvbixcbiAgaGFzSWNvbkltYWdlLFxufSBmcm9tIFwiLi4vLi4vLi4vaGVscGVycy9pY29uLW1hbmFnZXJcIjtcbmltcG9ydCB7IE1lbnVBY3Rpb24gfSBmcm9tIFwiLi4vLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9hY3Rpb25cIjtcbmltcG9ydCB7IE1lbnVCYXNlIH0gZnJvbSBcIi4uLy4uLy4uL21vZGVscy9tZW51L2l0ZW0vYmFzZVwiO1xuaW1wb3J0IHsgTWVudUljb24gfSBmcm9tIFwiLi4vLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9pY29uXCI7XG5pbXBvcnQgeyBNZW51UGFuZWwgfSBmcm9tIFwiLi4vLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9wYW5lbFwiO1xuaW1wb3J0IHsgVGFUcmFuc2xhdGlvbk1lbnUgfSBmcm9tIFwiLi4vLi4vLi4vdHJhbnNsYXRpb24uc2VydmljZVwiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6IFwidGEtbWVudS1pdGVtXCIsXG4gIHRlbXBsYXRlVXJsOiBcIi4vbWVudS1pdGVtLmNvbXBvbmVudC5odG1sXCIsXG4gIHN0eWxlVXJsczogW1wiLi9tZW51LWl0ZW0uY29tcG9uZW50LnNjc3NcIl0sXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBOZ0NsYXNzLFxuICAgIE5nVGVtcGxhdGVPdXRsZXQsXG4gICAgUm91dGVyTW9kdWxlLFxuICAgIE1hdE1lbnVNb2R1bGUsXG4gICAgVHJhbnNsYXRlTW9kdWxlLFxuICAgIEZvbnRJY29uQ29tcG9uZW50LFxuICAgIE5vdGlmaWNhdGlvbkJhZGdlQ29tcG9uZW50LFxuICAgIFR5cGVkVGVtcGxhdGVEaXJlY3RpdmUsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIE1lbnVJdGVtQ29tcG9uZW50IGV4dGVuZHMgVGFCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KClcbiAgaXRlbSE6IE1lbnVJY29uIHwgTWVudUFjdGlvbiB8IE1lbnVCYXNlIHwgTWVudVBhbmVsO1xuXG4gIEBJbnB1dCgpXG4gIHN0eWxlVHlwZTogU3RyaW5nID0gXCJibG9jXCI7XG5cbiAgQFZpZXdDaGlsZChNYXRNZW51VHJpZ2dlcikgdHJpZ2dlck1lbnUhOiBNYXRNZW51VHJpZ2dlcjtcblxuICBwdWJsaWMgcmVhZG9ubHkgdHlwZVRva2VuITogTWVudUljb24gfCBNZW51QWN0aW9uIHwgTWVudUJhc2UgfCBNZW51UGFuZWw7XG4gIHB1YmxpYyBpc09wZW46IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgbW9kYWw6IE1hdERpYWxvZykge1xuICAgIHN1cGVyKCk7XG4gICAgVGFUcmFuc2xhdGlvbk1lbnUuZ2V0SW5zdGFuY2UoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuaXNPcGVuID0gdGhpcy5pdGVtLmRlZmF1bHRPcGVuO1xuICB9XG5cbiAgcHVibGljIGdldFN0eWxlVHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZVR5cGUgKyBcIiBcIiArIHRoaXMuaXRlbS5zdHlsZTtcbiAgfVxuXG4gIHB1YmxpYyBoYXNGb250SWNvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzRm9udEljb24odGhpcy5pdGVtKTtcbiAgfVxuXG4gIHB1YmxpYyBoYXNJY29uSW1hZ2UoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0ljb25JbWFnZSh0aGlzLml0ZW0pO1xuICB9XG5cbiAgcHVibGljIGdldEljb24oKSB7XG4gICAgcmV0dXJuIGdldEljb24odGhpcy5pdGVtKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRGb250SWNvbigpIHtcbiAgICByZXR1cm4gZ2V0Rm9udEljb24odGhpcy5pdGVtKTtcbiAgfVxuXG4gIHB1YmxpYyBoYXNDaGlsZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLmNoaWxkcmVuLmxlbmd0aCA+IDA7XG4gIH1cbiAgcHVibGljIHRvZ2dsZSgpIHtcbiAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3BlbjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUZW1wbGF0ZSgpIHtcbiAgICBpZiAodGhpcy5pdGVtLmlzTWVudVBhbmVsKSB7XG4gICAgICByZXR1cm4gKDxNZW51UGFuZWw+dGhpcy5pdGVtKS50ZW1wbGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgdHJhY2tCeUZuKGluZGV4OiBhbnksIGl0ZW06IE1lbnVCYXNlKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbSArIFwiLVwiICsgaXRlbS5rZXk7XG4gIH1cblxuICBwdWJsaWMgZXhlY3V0ZUNhbGxiYWNrKCkge1xuICAgIGNvbnN0IG15VGVtcGxhdGUgPSB0aGlzLmdldFRlbXBsYXRlKCk7XG4gICAgaWYgKG15VGVtcGxhdGUpIHtcbiAgICAgIGlmICh0aGlzLmJyZWFrcG9pbnRzLmlzTGVzc1RoYW5YUykge1xuICAgICAgICB0aGlzLm1vZGFsLm9wZW48VGVtcGxhdGVNb2RhbENvbnRhaW5lciwgVGVtcGxhdGVNb2RhbENvbnRhaW5lckRhdGE+KFxuICAgICAgICAgIFRlbXBsYXRlTW9kYWxDb250YWluZXIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICB0ZW1wbGF0ZTogbXlUZW1wbGF0ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyTWVudS5vcGVuTWVudSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLml0ZW0uY2FsbGJhY2s/LigpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRMaW5rKCkge1xuICAgIGlmICh0aGlzLml0ZW0ubGluayAmJiB0aGlzLml0ZW0ubGluayAhPT0gXCJcIikgcmV0dXJuIHRoaXMuaXRlbS5saW5rO1xuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbn1cbiIsIkBpZiAoIXRoaXMuaGFzQ2hpbGQoKSkge1xuPG5nLWNvbnRhaW5lciBbc3R5bGUuY3Vyc29yXT1cInRoaXMuaXRlbS5jYWxsYmFjayA/ICdwb2ludGVyJyA6ICdkZWZhdWx0J1wiPlxuICBAaWYgKHRoaXMuZ2V0TGluaygpKSB7XG4gIDxhXG4gICAgY2xhc3M9XCJsaW5rXCJcbiAgICBbbmdDbGFzc109XCJ0aGlzLmdldFN0eWxlVHlwZSgpXCJcbiAgICByb3V0ZXJMaW5rQWN0aXZlPVwiYWN0aXZlXCJcbiAgICBbcm91dGVyTGlua0FjdGl2ZU9wdGlvbnNdPVwieyBleGFjdDogdGhpcy5pdGVtLmV4YWN0IH1cIlxuICAgIFtyb3V0ZXJMaW5rXT1cIlt0aGlzLmdldExpbmsoKV1cIlxuICAgIFtyZXBsYWNlVXJsXT1cInRoaXMuaXRlbS5yZXBsYWNlVXJsXCJcbiAgPlxuICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJJdGVtXCI+PC9uZy10ZW1wbGF0ZT5cbiAgPC9hPlxuICB9IEBlbHNlIHtcbiAgPGFcbiAgICAoY2xpY2spPVwidGhpcy5leGVjdXRlQ2FsbGJhY2soKVwiXG4gICAgY2xhc3M9XCJsaW5rXCJcbiAgICBbbmdDbGFzc109XCJ0aGlzLmdldFN0eWxlVHlwZSgpXCJcbiAgPlxuICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJJdGVtXCI+PC9uZy10ZW1wbGF0ZT5cbiAgPC9hPlxuICB9XG48L25nLWNvbnRhaW5lcj5cbn1cblxuPG5nLXRlbXBsYXRlICNJdGVtIFt0eXBlZFRlbXBsYXRlXT1cInRoaXMudHlwZVRva2VuXCI+XG4gIDxkaXYgY2xhc3M9XCJpdGVtIHBvaW50ZXJcIiBbY2xhc3MuZGlzYWJsZV09XCJpdGVtLmRpc2FibGVkXCI+XG4gICAgPGRpdiBjbGFzcz1cImljb25cIj5cbiAgICAgIEBpZiAodGhpcy5oYXNGb250SWNvbigpKSB7XG4gICAgICA8c3BhbiBjbGFzcz1cImljb24tbWF0ZXJpYWxcIj5cbiAgICAgICAgPHRhLWZvbnQtaWNvblxuICAgICAgICAgIFtuYW1lXT1cInRoaXMuZ2V0Rm9udEljb24oKVwiXG4gICAgICAgICAgc2l6ZT1cInhzXCJcbiAgICAgICAgICBbbmdDbGFzc109XCJpdGVtLmljb25zQ29sb3JcIlxuICAgICAgICA+PC90YS1mb250LWljb24+XG4gICAgICA8L3NwYW4+XG4gICAgICB9XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj57eyBpdGVtLmxhYmVsIHwgdHJhbnNsYXRlIH19PC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiYmFkZ2UtY29udGFpbmVyIGQtZmxleFwiPlxuICAgICAgQGlmIChpdGVtLm9wdGlvbnM/Lm5vdGlmaWNhdGlvbkJhZGdlPy5sYWJlbCkge1xuICAgICAgPHRhLW5vdGlmaWNhdGlvbi1iYWRnZVxuICAgICAgICBbbnVtYmVyXT1cIml0ZW0ub3B0aW9ucz8ubm90aWZpY2F0aW9uQmFkZ2U/LmxhYmVsIHx8IDBcIlxuICAgICAgICBbc3R5bGVdPVwiJ2JyYW5kLTcwMCdcIlxuICAgICAgICBmb250U2l6ZT1cInhzXCJcbiAgICAgICAgW3JlbGF0aXZlXT1cInRydWVcIlxuICAgICAgPjwvdGEtbm90aWZpY2F0aW9uLWJhZGdlPlxuICAgICAgfSBAbGV0IGV4dHJhVGVtcGxhdGUgPSBpdGVtLm9wdGlvbnM/LmV4dHJhVGVtcGxhdGU7IEBpZiAoZXh0cmFUZW1wbGF0ZSkge1xuICAgICAgPG5nLXRlbXBsYXRlIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImV4dHJhVGVtcGxhdGVcIj48L25nLXRlbXBsYXRlPlxuICAgICAgfVxuICAgIDwvZGl2PlxuICAgIEBpZiAoaXRlbS5lbmRpbmdJY29uKSB7XG4gICAgPGRpdiBjbGFzcz1cImVuZGluZy1pY29uLWNvbnRhaW5lclwiPlxuICAgICAgPHRhLWZvbnQtaWNvblxuICAgICAgICBbbmFtZV09XCJpdGVtLmVuZGluZ0ljb25cIlxuICAgICAgICBbbmdDbGFzc109XCJpdGVtLmljb25zQ29sb3JcIlxuICAgICAgPjwvdGEtZm9udC1pY29uPlxuICAgIDwvZGl2PlxuICAgIH0gQGxldCB0ZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGUoKTsgQGlmICh0ZW1wbGF0ZSkge1xuICAgIDxkaXYgY2xhc3M9XCJ0cmlnZ2VyLWNvbnRhaW5lclwiPlxuICAgICAgPGRpdiBjbGFzcz1cInRyaWdnZXJcIiBbbWF0TWVudVRyaWdnZXJGb3JdPVwibWVudVwiICN0cmlnZ2VyUGFuZWw+PC9kaXY+XG4gICAgICA8bWF0LW1lbnUgI21lbnU9XCJtYXRNZW51XCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJ0ZW1wbGF0ZVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9tYXQtbWVudT5cbiAgICA8L2Rpdj5cbiAgICB9XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==