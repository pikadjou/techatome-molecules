import { NgClass, NgFor, NgIf, NgTemplateOutlet } from '@angular/common';
import { Component, Input, ViewChild } from '@angular/core';
import { MatMenuModule, MatMenuTrigger } from '@angular/material/menu';
import { RouterModule } from '@angular/router';
import { TranslateModule } from '@ngx-translate/core';
import { FontIconComponent, LocalIconComponent } from '@ta/icons';
import { NotificationBadgeComponent } from '@ta/ui';
import { TemplateModalContainer } from '@ta/ui';
import { TaBaseComponent } from '@ta/utils';
import { getFontIcon, getIcon, hasFontIcon, hasIconImage } from '../../../helpers/icon-manager';
import { CamTranslationMenu } from '../../../translation.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
import * as i2 from "@angular/router";
import * as i3 from "@angular/material/menu";
import * as i4 from "@ngx-translate/core";
export class MenuItemComponent extends TaBaseComponent {
    constructor(modal) {
        super();
        this.modal = modal;
        this.styleType = 'bloc';
        this.isOpen = false;
        CamTranslationMenu.getInstance();
    }
    ngOnInit() {
        this.isOpen = this.item.defaultOpen;
    }
    getStyleType() {
        return this.styleType + ' ' + this.item.style;
    }
    hasFontIcon() {
        return hasFontIcon(this.item);
    }
    hasIconImage() {
        return hasIconImage(this.item);
    }
    getIcon() {
        return getIcon(this.item);
    }
    getFontIcon() {
        return getFontIcon(this.item);
    }
    hasChild() {
        return this.item.children.length > 0;
    }
    toggle() {
        this.isOpen = !this.isOpen;
    }
    getTemplate() {
        if (this.item.isMenuPanel) {
            return this.item.template;
        }
        return null;
    }
    trackByFn(index, item) {
        return this.item + '-' + item.key;
    }
    executeCallback() {
        const myTemplate = this.getTemplate();
        if (myTemplate) {
            if (this.breakpoints.isLessThanXS) {
                this.modal.open(TemplateModalContainer, {
                    data: {
                        template: myTemplate,
                    },
                });
            }
            else {
                this.triggerMenu.openMenu();
            }
        }
        else {
            this.item.callback?.();
        }
    }
    getLink() {
        if (this.item.link && this.item.link !== '')
            return this.item.link;
        return '';
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: MenuItemComponent, deps: [{ token: i1.MatDialog }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: MenuItemComponent, isStandalone: true, selector: "ta-menu-item", inputs: { item: "item", styleType: "styleType" }, viewQueries: [{ propertyName: "triggerMenu", first: true, predicate: MatMenuTrigger, descendants: true }], usesInheritance: true, ngImport: i0, template: "@if (!this.hasChild()) {\n  <ng-container [style.cursor]=\"this.item.callback ? 'pointer' : 'default'\">\n    @if (this.getLink()) {\n      <a\n        class=\"link\"\n        [ngClass]=\"this.getStyleType()\"\n        routerLinkActive=\"active\"\n        [routerLinkActiveOptions]=\"{ exact: this.item.exact }\"\n        [routerLink]=\"[this.getLink()]\"\n        [replaceUrl]=\"this.item.replaceUrl\"\n      >\n        <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n      </a>\n    } @else {\n      <a (click)=\"this.executeCallback()\" class=\"link\" [ngClass]=\"this.getStyleType()\">\n        <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n      </a>\n    }\n  </ng-container>\n}\n\n<ng-template #Item [typedTemplate]=\"this.typeToken\">\n  <div class=\"item pointer\" [class.disable]=\"item.disabled\">\n    <div class=\"icon\">\n      @if (this.hasFontIcon()) {\n        <span class=\"icon-material\">\n          <ta-font-icon [name]=\"this.getFontIcon()\" size=\"xs\" [ngClass]=\"item.iconsColor\"></ta-font-icon>\n        </span>\n      } @else if (this.hasIconImage()) {\n        <span class=\"icon-image\">\n          <ta-local-icon [type]=\"this.getIcon()\" size=\"xs\" [ngClass]=\"item.iconsColor\"></ta-local-icon>\n        </span>\n      }\n    </div>\n\n    <div class=\"title\">{{ item.label | translate }}</div>\n\n    <div class=\"badge-container d-flex\">\n      @if (item.options?.notificationBadge?.label) {\n        <ta-notification-badge\n          [number]=\"item.options?.notificationBadge?.label || 0\"\n          [style]=\"'brand-700'\"\n          fontSize=\"xs\"\n          [relative]=\"true\"\n        ></ta-notification-badge>\n      }\n      <ng-container *ngLet=\"item.options?.extraTemplate as extraTemplate\">\n        @if (extraTemplate) {\n          <ng-template [ngTemplateOutlet]=\"extraTemplate\"></ng-template>\n        }\n      </ng-container>\n    </div>\n    @if (item.endingIcon) {\n      <div class=\"ending-icon-container\">\n        <ta-font-icon [name]=\"item.endingIcon\" [ngClass]=\"item.iconsColor\"></ta-font-icon>\n      </div>\n    }\n    <ng-container *ngLet=\"this.getTemplate() as template\">\n      @if (template) {\n        <div class=\"trigger-container\">\n          <div class=\"trigger\" [matMenuTriggerFor]=\"menu\" #triggerPanel></div>\n          <mat-menu #menu=\"matMenu\">\n            <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n          </mat-menu>\n        </div>\n      }\n    </ng-container>\n  </div>\n</ng-template>\n", styles: [".link{display:flex;flex-direction:row;text-decoration:none;padding:var(--ta-space-xs) 0}.link.dark .icon,.link.dark .title{color:var(--ta-icon-primary)}.link.dark .title{color:var(--ta-text-primary)}.link.active .icon{color:var(--ta-icon-brand-primary)}.link.active .title{color:var(--ta-text-brand-primary)}@media screen and (min-width: 768px){.link.active{background-color:var(--ta-brand-700);border-radius:16px}.link.active .icon,.link.active .title{color:var(--ta-icon-invert-primary)}}.link.horizontal{justify-content:center}.link.horizontal .icon,.link.horizontal .title{flex:0 0 100%;max-width:100%;font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.link.horizontal .item{position:relative}.link.horizontal .item .badge-container{position:absolute;top:-10px;right:0}.link.vertical{padding:var(--ta-space-md) var(--ta-space-md)}.link.vertical .item{display:flex;align-items:center}.link.vertical .icon,.link.vertical .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.vertical .icon{margin-right:var(--ta-space-md)}@media screen and (max-width: 575px){.link.responsive{justify-content:center}.link.responsive .icon,.link.responsive .title{flex:0 0 100%;max-width:100%;font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.link.responsive .item{position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 576px){.link.responsive{justify-content:center}.link.responsive .icon,.link.responsive .title{flex:0 0 100%;max-width:100%;font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.link.responsive .item{position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 992px){.link.responsive{padding:var(--ta-space-md) var(--ta-space-md)}.link.responsive .item{display:flex;align-items:center}.link.responsive .icon,.link.responsive .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.responsive .icon{margin-right:var(--ta-space-md)}}.link.responsive.menu-minimized .icon{margin-left:auto!important;margin-right:auto!important}.link.responsive.menu-minimized .title{display:none}.link .icon,.link .title{padding:0;margin:0;color:var(--ta-neutral-300)}@media screen and (min-width: 768px){.link .icon,.link .title{color:var(--ta-brand-400)}}.link .disable{opacity:.5}.link .item{width:100%;text-align:center}.link .icon-image{margin-bottom:3px}.link .badge-container{position:relative;margin-left:auto}.link .ending-icon-container{display:flex;align-items:center;justify-content:flex-end}.trigger-container{position:relative}.trigger-container .trigger{position:absolute;top:0;right:calc(var(--ta-space-xl) * -1)}\n"], dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: RouterModule }, { kind: "directive", type: i2.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i2.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "ngmodule", type: MatMenuModule }, { kind: "component", type: i3.MatMenu, selector: "mat-menu", inputs: ["backdropClass", "aria-label", "aria-labelledby", "aria-describedby", "xPosition", "yPosition", "overlapTrigger", "hasBackdrop", "class", "classList"], outputs: ["closed", "close"], exportAs: ["matMenu"] }, { kind: "directive", type: i3.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", inputs: ["mat-menu-trigger-for", "matMenuTriggerFor", "matMenuTriggerData", "matMenuTriggerRestoreFocus"], outputs: ["menuOpened", "onMenuOpen", "menuClosed", "onMenuClose"], exportAs: ["matMenuTrigger"] }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i4.TranslatePipe, name: "translate" }, { kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }, { kind: "component", type: LocalIconComponent, selector: "ta-local-icon", inputs: ["type", "size", "rotation"] }, { kind: "component", type: NotificationBadgeComponent, selector: "ta-notification-badge", inputs: ["number", "fontSize", "style", "relative"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: MenuItemComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-menu-item', standalone: true, imports: [
                        NgIf,
                        NgClass,
                        NgFor,
                        NgTemplateOutlet,
                        RouterModule,
                        MatMenuModule,
                        TranslateModule,
                        FontIconComponent,
                        LocalIconComponent,
                        NotificationBadgeComponent,
                    ], template: "@if (!this.hasChild()) {\n  <ng-container [style.cursor]=\"this.item.callback ? 'pointer' : 'default'\">\n    @if (this.getLink()) {\n      <a\n        class=\"link\"\n        [ngClass]=\"this.getStyleType()\"\n        routerLinkActive=\"active\"\n        [routerLinkActiveOptions]=\"{ exact: this.item.exact }\"\n        [routerLink]=\"[this.getLink()]\"\n        [replaceUrl]=\"this.item.replaceUrl\"\n      >\n        <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n      </a>\n    } @else {\n      <a (click)=\"this.executeCallback()\" class=\"link\" [ngClass]=\"this.getStyleType()\">\n        <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n      </a>\n    }\n  </ng-container>\n}\n\n<ng-template #Item [typedTemplate]=\"this.typeToken\">\n  <div class=\"item pointer\" [class.disable]=\"item.disabled\">\n    <div class=\"icon\">\n      @if (this.hasFontIcon()) {\n        <span class=\"icon-material\">\n          <ta-font-icon [name]=\"this.getFontIcon()\" size=\"xs\" [ngClass]=\"item.iconsColor\"></ta-font-icon>\n        </span>\n      } @else if (this.hasIconImage()) {\n        <span class=\"icon-image\">\n          <ta-local-icon [type]=\"this.getIcon()\" size=\"xs\" [ngClass]=\"item.iconsColor\"></ta-local-icon>\n        </span>\n      }\n    </div>\n\n    <div class=\"title\">{{ item.label | translate }}</div>\n\n    <div class=\"badge-container d-flex\">\n      @if (item.options?.notificationBadge?.label) {\n        <ta-notification-badge\n          [number]=\"item.options?.notificationBadge?.label || 0\"\n          [style]=\"'brand-700'\"\n          fontSize=\"xs\"\n          [relative]=\"true\"\n        ></ta-notification-badge>\n      }\n      <ng-container *ngLet=\"item.options?.extraTemplate as extraTemplate\">\n        @if (extraTemplate) {\n          <ng-template [ngTemplateOutlet]=\"extraTemplate\"></ng-template>\n        }\n      </ng-container>\n    </div>\n    @if (item.endingIcon) {\n      <div class=\"ending-icon-container\">\n        <ta-font-icon [name]=\"item.endingIcon\" [ngClass]=\"item.iconsColor\"></ta-font-icon>\n      </div>\n    }\n    <ng-container *ngLet=\"this.getTemplate() as template\">\n      @if (template) {\n        <div class=\"trigger-container\">\n          <div class=\"trigger\" [matMenuTriggerFor]=\"menu\" #triggerPanel></div>\n          <mat-menu #menu=\"matMenu\">\n            <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n          </mat-menu>\n        </div>\n      }\n    </ng-container>\n  </div>\n</ng-template>\n", styles: [".link{display:flex;flex-direction:row;text-decoration:none;padding:var(--ta-space-xs) 0}.link.dark .icon,.link.dark .title{color:var(--ta-icon-primary)}.link.dark .title{color:var(--ta-text-primary)}.link.active .icon{color:var(--ta-icon-brand-primary)}.link.active .title{color:var(--ta-text-brand-primary)}@media screen and (min-width: 768px){.link.active{background-color:var(--ta-brand-700);border-radius:16px}.link.active .icon,.link.active .title{color:var(--ta-icon-invert-primary)}}.link.horizontal{justify-content:center}.link.horizontal .icon,.link.horizontal .title{flex:0 0 100%;max-width:100%;font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.link.horizontal .item{position:relative}.link.horizontal .item .badge-container{position:absolute;top:-10px;right:0}.link.vertical{padding:var(--ta-space-md) var(--ta-space-md)}.link.vertical .item{display:flex;align-items:center}.link.vertical .icon,.link.vertical .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.vertical .icon{margin-right:var(--ta-space-md)}@media screen and (max-width: 575px){.link.responsive{justify-content:center}.link.responsive .icon,.link.responsive .title{flex:0 0 100%;max-width:100%;font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.link.responsive .item{position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 576px){.link.responsive{justify-content:center}.link.responsive .icon,.link.responsive .title{flex:0 0 100%;max-width:100%;font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.link.responsive .item{position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 992px){.link.responsive{padding:var(--ta-space-md) var(--ta-space-md)}.link.responsive .item{display:flex;align-items:center}.link.responsive .icon,.link.responsive .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.responsive .icon{margin-right:var(--ta-space-md)}}.link.responsive.menu-minimized .icon{margin-left:auto!important;margin-right:auto!important}.link.responsive.menu-minimized .title{display:none}.link .icon,.link .title{padding:0;margin:0;color:var(--ta-neutral-300)}@media screen and (min-width: 768px){.link .icon,.link .title{color:var(--ta-brand-400)}}.link .disable{opacity:.5}.link .item{width:100%;text-align:center}.link .icon-image{margin-bottom:3px}.link .badge-container{position:relative;margin-left:auto}.link .ending-icon-container{display:flex;align-items:center;justify-content:flex-end}.trigger-container{position:relative}.trigger-container .trigger{position:absolute;top:0;right:calc(var(--ta-space-xl) * -1)}\n"] }]
        }], ctorParameters: () => [{ type: i1.MatDialog }], propDecorators: { item: [{
                type: Input
            }], styleType: [{
                type: Input
            }], triggerMenu: [{
                type: ViewChild,
                args: [MatMenuTrigger]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9tZW51L2l0ZW0vbWVudS1pdGVtLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9tZW51L2l0ZW0vbWVudS1pdGVtLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVwRSxPQUFPLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUUvQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUNwRCxPQUFPLEVBQUUsc0JBQXNCLEVBQThCLE1BQU0sUUFBUSxDQUFDO0FBQzVFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFFNUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBS2hHLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDOzs7Ozs7QUFvQmxFLE1BQU0sT0FBTyxpQkFBa0IsU0FBUSxlQUFlO0lBWXBELFlBQW1CLEtBQWdCO1FBQ2pDLEtBQUssRUFBRSxDQUFDO1FBRFMs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Qjt3QkFDakIsa0JBQWtCO3dCQUNsQiwwQkFBMEI7cUJBQzNCOzhFQUlELElBQUk7c0JBREgsS0FBSztnQkFJTixTQUFTO3NCQURSLEtBQUs7Z0JBR3FCLFdBQVc7c0JBQXJDLFNBQVM7dUJBQUMsY0FBYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5nQ2xhc3MsIE5nRm9yLCBOZ0lmLCBOZ1RlbXBsYXRlT3V0bGV0IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXREaWFsb2cgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2cnO1xuaW1wb3J0IHsgTWF0TWVudU1vZHVsZSwgTWF0TWVudVRyaWdnZXIgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9tZW51JztcbmltcG9ydCB7IFJvdXRlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbmltcG9ydCB7IFRyYW5zbGF0ZU1vZHVsZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuaW1wb3J0IHsgRm9udEljb25Db21wb25lbnQsIExvY2FsSWNvbkNvbXBvbmVudCB9IGZyb20gJ0B0YS9pY29ucyc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25CYWRnZUNvbXBvbmVudCB9IGZyb20gJ0B0YS91aSc7XG5pbXBvcnQgeyBUZW1wbGF0ZU1vZGFsQ29udGFpbmVyLCBUZW1wbGF0ZU1vZGFsQ29udGFpbmVyRGF0YSB9IGZyb20gJ0B0YS91aSc7XG5pbXBvcnQgeyBUYUJhc2VDb21wb25lbnQgfSBmcm9tICdAdGEvdXRpbHMnO1xuXG5pbXBvcnQgeyBnZXRGb250SWNvbiwgZ2V0SWNvbiwgaGFzRm9udEljb24sIGhhc0ljb25JbWFnZSB9IGZyb20gJy4uLy4uLy4uL2hlbHBlcnMvaWNvbi1tYW5hZ2VyJztcbmltcG9ydCB7IE1lbnVBY3Rpb24gfSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvbWVudS9pdGVtL2FjdGlvbic7XG5pbXBvcnQgeyBNZW51QmFzZSB9IGZyb20gJy4uLy4uLy4uL21vZGVscy9tZW51L2l0ZW0vYmFzZSc7XG5pbXBvcnQgeyBNZW51SWNvbiB9IGZyb20gJy4uLy4uLy4uL21vZGVscy9tZW51L2l0ZW0vaWNvbic7XG5pbXBvcnQgeyBNZW51UGFuZWwgfSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvbWVudS9pdGVtL3BhbmVsJztcbmltcG9ydCB7IENhbVRyYW5zbGF0aW9uTWVudSB9IGZyb20gJy4uLy4uLy4uL3RyYW5zbGF0aW9uLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0YS1tZW51LWl0ZW0nLFxuICB0ZW1wbGF0ZVVybDogJy4vbWVudS1pdGVtLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbWVudS1pdGVtLmNvbXBvbmVudC5zY3NzJ10sXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBOZ0lmLFxuICAgIE5nQ2xhc3MsXG4gICAgTmdGb3IsXG4gICAgTmdUZW1wbGF0ZU91dGxldCxcbiAgICBSb3V0ZXJNb2R1bGUsXG4gICAgTWF0TWVudU1vZHVsZSxcbiAgICBUcmFuc2xhdGVNb2R1bGUsXG4gICAgRm9udEljb25Db21wb25lbnQsXG4gICAgTG9jYWxJY29uQ29tcG9uZW50LFxuICAgIE5vdGlmaWNhdGlvbkJhZGdlQ29tcG9uZW50LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBNZW51SXRlbUNvbXBvbmVudCBleHRlbmRzIFRhQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpXG4gIGl0ZW0hOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSB8IE1lbnVQYW5lbDtcblxuICBASW5wdXQoKVxuICBzdHlsZVR5cGU6IFN0cmluZyA9ICdibG9jJztcblxuICBAVmlld0NoaWxkKE1hdE1lbnVUcmlnZ2VyKSB0cmlnZ2VyTWVudSE6IE1hdE1lbnVUcmlnZ2VyO1xuXG4gIHB1YmxpYyByZWFkb25seSB0eXBlVG9rZW4hOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSB8IE1lbnVQYW5lbDtcbiAgcHVibGljIGlzT3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtb2RhbDogTWF0RGlhbG9nKSB7XG4gICAgc3VwZXIoKTtcbiAgICBDYW1UcmFuc2xhdGlvbk1lbnUuZ2V0SW5zdGFuY2UoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuaXNPcGVuID0gdGhpcy5pdGVtLmRlZmF1bHRPcGVuO1xuICB9XG5cbiAgcHVibGljIGdldFN0eWxlVHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZVR5cGUgKyAnICcgKyB0aGlzLml0ZW0uc3R5bGU7XG4gIH1cblxuICBwdWJsaWMgaGFzRm9udEljb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0ZvbnRJY29uKHRoaXMuaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgaGFzSWNvbkltYWdlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNJY29uSW1hZ2UodGhpcy5pdGVtKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJY29uKCkge1xuICAgIHJldHVybiBnZXRJY29uKHRoaXMuaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Rm9udEljb24oKSB7XG4gICAgcmV0dXJuIGdldEZvbnRJY29uKHRoaXMuaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgaGFzQ2hpbGQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwO1xuICB9XG4gIHB1YmxpYyB0b2dnbGUoKSB7XG4gICAgdGhpcy5pc09wZW4gPSAhdGhpcy5pc09wZW47XG4gIH1cblxuICBwdWJsaWMgZ2V0VGVtcGxhdGUoKSB7XG4gICAgaWYgKHRoaXMuaXRlbS5pc01lbnVQYW5lbCkge1xuICAgICAgcmV0dXJuICg8TWVudVBhbmVsPnRoaXMuaXRlbSkudGVtcGxhdGU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIHRyYWNrQnlGbihpbmRleDogYW55LCBpdGVtOiBNZW51QmFzZSkge1xuICAgIHJldHVybiB0aGlzLml0ZW0gKyAnLScgKyBpdGVtLmtleTtcbiAgfVxuXG4gIHB1YmxpYyBleGVjdXRlQ2FsbGJhY2soKSB7XG4gICAgY29uc3QgbXlUZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGUoKTtcbiAgICBpZiAobXlUZW1wbGF0ZSkge1xuICAgICAgaWYgKHRoaXMuYnJlYWtwb2ludHMuaXNMZXNzVGhhblhTKSB7XG4gICAgICAgIHRoaXMubW9kYWwub3BlbjxUZW1wbGF0ZU1vZGFsQ29udGFpbmVyLCBUZW1wbGF0ZU1vZGFsQ29udGFpbmVyRGF0YT4oVGVtcGxhdGVNb2RhbENvbnRhaW5lciwge1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlOiBteVRlbXBsYXRlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyTWVudS5vcGVuTWVudSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLml0ZW0uY2FsbGJhY2s/LigpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRMaW5rKCkge1xuICAgIGlmICh0aGlzLml0ZW0ubGluayAmJiB0aGlzLml0ZW0ubGluayAhPT0gJycpIHJldHVybiB0aGlzLml0ZW0ubGluaztcblxuICAgIHJldHVybiAnJztcbiAgfVxufVxuIiwiQGlmICghdGhpcy5oYXNDaGlsZCgpKSB7XG4gIDxuZy1jb250YWluZXIgW3N0eWxlLmN1cnNvcl09XCJ0aGlzLml0ZW0uY2FsbGJhY2sgPyAncG9pbnRlcicgOiAnZGVmYXVsdCdcIj5cbiAgICBAaWYgKHRoaXMuZ2V0TGluaygpKSB7XG4gICAgICA8YVxuICAgICAgICBjbGFzcz1cImxpbmtcIlxuICAgICAgICBbbmdDbGFzc109XCJ0aGlzLmdldFN0eWxlVHlwZSgpXCJcbiAgICAgICAgcm91dGVyTGlua0FjdGl2ZT1cImFjdGl2ZVwiXG4gICAgICAgIFtyb3V0ZXJMaW5rQWN0aXZlT3B0aW9uc109XCJ7IGV4YWN0OiB0aGlzLml0ZW0uZXhhY3QgfVwiXG4gICAgICAgIFtyb3V0ZXJMaW5rXT1cIlt0aGlzLmdldExpbmsoKV1cIlxuICAgICAgICBbcmVwbGFjZVVybF09XCJ0aGlzLml0ZW0ucmVwbGFjZVVybFwiXG4gICAgICA+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJJdGVtXCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgIDwvYT5cbiAgICB9IEBlbHNlIHtcbiAgICAgIDxhIChjbGljayk9XCJ0aGlzLmV4ZWN1dGVDYWxsYmFjaygpXCIgY2xhc3M9XCJsaW5rXCIgW25nQ2xhc3NdPVwidGhpcy5nZXRTdHlsZVR5cGUoKVwiPlxuICAgICAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwiSXRlbVwiPjwvbmctdGVtcGxhdGU+XG4gICAgICA8L2E+XG4gICAgfVxuICA8L25nLWNvbnRhaW5lcj5cbn1cblxuPG5nLXRlbXBsYXRlICNJdGVtIFt0eXBlZFRlbXBsYXRlXT1cInRoaXMudHlwZVRva2VuXCI+XG4gIDxkaXYgY2xhc3M9XCJpdGVtIHBvaW50ZXJcIiBbY2xhc3MuZGlzYWJsZV09XCJpdGVtLmRpc2FibGVkXCI+XG4gICAgPGRpdiBjbGFzcz1cImljb25cIj5cbiAgICAgIEBpZiAodGhpcy5oYXNGb250SWNvbigpKSB7XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiaWNvbi1tYXRlcmlhbFwiPlxuICAgICAgICAgIDx0YS1mb250LWljb24gW25hbWVdPVwidGhpcy5nZXRGb250SWNvbigpXCIgc2l6ZT1cInhzXCIgW25nQ2xhc3NdPVwiaXRlbS5pY29uc0NvbG9yXCI+PC90YS1mb250LWljb24+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIH0gQGVsc2UgaWYgKHRoaXMuaGFzSWNvbkltYWdlKCkpIHtcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uLWltYWdlXCI+XG4gICAgICAgICAgPHRhLWxvY2FsLWljb24gW3R5cGVdPVwidGhpcy5nZXRJY29uKClcIiBzaXplPVwieHNcIiBbbmdDbGFzc109XCJpdGVtLmljb25zQ29sb3JcIj48L3RhLWxvY2FsLWljb24+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIH1cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPnt7IGl0ZW0ubGFiZWwgfCB0cmFuc2xhdGUgfX08L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJiYWRnZS1jb250YWluZXIgZC1mbGV4XCI+XG4gICAgICBAaWYgKGl0ZW0ub3B0aW9ucz8ubm90aWZpY2F0aW9uQmFkZ2U/LmxhYmVsKSB7XG4gICAgICAgIDx0YS1ub3RpZmljYXRpb24tYmFkZ2VcbiAgICAgICAgICBbbnVtYmVyXT1cIml0ZW0ub3B0aW9ucz8ubm90aWZpY2F0aW9uQmFkZ2U/LmxhYmVsIHx8IDBcIlxuICAgICAgICAgIFtzdHlsZV09XCInYnJhbmQtNzAwJ1wiXG4gICAgICAgICAgZm9udFNpemU9XCJ4c1wiXG4gICAgICAgICAgW3JlbGF0aXZlXT1cInRydWVcIlxuICAgICAgICA+PC90YS1ub3RpZmljYXRpb24tYmFkZ2U+XG4gICAgICB9XG4gICAgICA8bmctY29udGFpbmVyICpuZ0xldD1cIml0ZW0ub3B0aW9ucz8uZXh0cmFUZW1wbGF0ZSBhcyBleHRyYVRlbXBsYXRlXCI+XG4gICAgICAgIEBpZiAoZXh0cmFUZW1wbGF0ZSkge1xuICAgICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJleHRyYVRlbXBsYXRlXCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgfVxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9kaXY+XG4gICAgQGlmIChpdGVtLmVuZGluZ0ljb24pIHtcbiAgICAgIDxkaXYgY2xhc3M9XCJlbmRpbmctaWNvbi1jb250YWluZXJcIj5cbiAgICAgICAgPHRhLWZvbnQtaWNvbiBbbmFtZV09XCJpdGVtLmVuZGluZ0ljb25cIiBbbmdDbGFzc109XCJpdGVtLmljb25zQ29sb3JcIj48L3RhLWZvbnQtaWNvbj5cbiAgICAgIDwvZGl2PlxuICAgIH1cbiAgICA8bmctY29udGFpbmVyICpuZ0xldD1cInRoaXMuZ2V0VGVtcGxhdGUoKSBhcyB0ZW1wbGF0ZVwiPlxuICAgICAgQGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICA8ZGl2IGNsYXNzPVwidHJpZ2dlci1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidHJpZ2dlclwiIFttYXRNZW51VHJpZ2dlckZvcl09XCJtZW51XCIgI3RyaWdnZXJQYW5lbD48L2Rpdj5cbiAgICAgICAgICA8bWF0LW1lbnUgI21lbnU9XCJtYXRNZW51XCI+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwidGVtcGxhdGVcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8L21hdC1tZW51PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIH1cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuIl19