import { NgClass, NgTemplateOutlet } from '@angular/common';
import { Component, Input, ViewChild } from '@angular/core';
import { MatMenuModule, MatMenuTrigger } from '@angular/material/menu';
import { RouterModule } from '@angular/router';
import { TranslateModule } from '@ngx-translate/core';
import { FontIconComponent } from '@ta/icons';
import { NotificationBadgeComponent } from '@ta/ui';
import { TemplateModalContainer } from '@ta/ui';
import { TaBaseComponent, TypedTemplateDirective } from '@ta/utils';
import { getFontIcon, getIcon, hasFontIcon, hasIconImage } from '../../../helpers/icon-manager';
import { CamTranslationMenu } from '../../../translation.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
import * as i2 from "@angular/router";
import * as i3 from "@angular/material/menu";
import * as i4 from "@ngx-translate/core";
export class MenuItemComponent extends TaBaseComponent {
    constructor(modal) {
        super();
        this.modal = modal;
        this.styleType = 'bloc';
        this.isOpen = false;
        CamTranslationMenu.getInstance();
    }
    ngOnInit() {
        this.isOpen = this.item.defaultOpen;
    }
    getStyleType() {
        return this.styleType + ' ' + this.item.style;
    }
    hasFontIcon() {
        return hasFontIcon(this.item);
    }
    hasIconImage() {
        return hasIconImage(this.item);
    }
    getIcon() {
        return getIcon(this.item);
    }
    getFontIcon() {
        return getFontIcon(this.item);
    }
    hasChild() {
        return this.item.children.length > 0;
    }
    toggle() {
        this.isOpen = !this.isOpen;
    }
    getTemplate() {
        if (this.item.isMenuPanel) {
            return this.item.template;
        }
        return null;
    }
    trackByFn(index, item) {
        return this.item + '-' + item.key;
    }
    executeCallback() {
        const myTemplate = this.getTemplate();
        if (myTemplate) {
            if (this.breakpoints.isLessThanXS) {
                this.modal.open(TemplateModalContainer, {
                    data: {
                        template: myTemplate,
                    },
                });
            }
            else {
                this.triggerMenu.openMenu();
            }
        }
        else {
            this.item.callback?.();
        }
    }
    getLink() {
        if (this.item.link && this.item.link !== '')
            return this.item.link;
        return '';
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: MenuItemComponent, deps: [{ token: i1.MatDialog }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: MenuItemComponent, isStandalone: true, selector: "ta-menu-item", inputs: { item: "item", styleType: "styleType" }, viewQueries: [{ propertyName: "triggerMenu", first: true, predicate: MatMenuTrigger, descendants: true }], usesInheritance: true, ngImport: i0, template: "@if (!this.hasChild()) {\n  <ng-container [style.cursor]=\"this.item.callback ? 'pointer' : 'default'\">\n    @if (this.getLink()) {\n      <a\n        class=\"link\"\n        [ngClass]=\"this.getStyleType()\"\n        routerLinkActive=\"active\"\n        [routerLinkActiveOptions]=\"{ exact: this.item.exact }\"\n        [routerLink]=\"[this.getLink()]\"\n        [replaceUrl]=\"this.item.replaceUrl\"\n      >\n        <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n      </a>\n    } @else {\n      <a (click)=\"this.executeCallback()\" class=\"link\" [ngClass]=\"this.getStyleType()\">\n        <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n      </a>\n    }\n  </ng-container>\n}\n\n<ng-template #Item [typedTemplate]=\"this.typeToken\">\n  <div class=\"item pointer\" [class.disable]=\"item.disabled\">\n    <div class=\"icon\">\n      @if (this.hasFontIcon()) {\n        <span class=\"icon-material\">\n          <ta-font-icon [name]=\"this.getFontIcon()\" size=\"xs\" [ngClass]=\"item.iconsColor\"></ta-font-icon>\n        </span>\n      }\n    </div>\n\n    <div class=\"title\">{{ item.label | translate }}</div>\n\n    <div class=\"badge-container d-flex\">\n      @if (item.options?.notificationBadge?.label) {\n        <ta-notification-badge\n          [number]=\"item.options?.notificationBadge?.label || 0\"\n          [style]=\"'brand-700'\"\n          fontSize=\"xs\"\n          [relative]=\"true\"\n        ></ta-notification-badge>\n      }\n      @let extraTemplate = item.options?.extraTemplate;\n      @if (extraTemplate) {\n        <ng-template [ngTemplateOutlet]=\"extraTemplate\"></ng-template>\n      }\n    </div>\n    @if (item.endingIcon) {\n      <div class=\"ending-icon-container\">\n        <ta-font-icon [name]=\"item.endingIcon\" [ngClass]=\"item.iconsColor\"></ta-font-icon>\n      </div>\n    }\n    @let template = this.getTemplate();\n    @if (template) {\n      <div class=\"trigger-container\">\n        <div class=\"trigger\" [matMenuTriggerFor]=\"menu\" #triggerPanel></div>\n        <mat-menu #menu=\"matMenu\">\n          <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n        </mat-menu>\n      </div>\n    }\n  </div>\n</ng-template>\n", styles: [".link{display:flex;flex-direction:row;text-decoration:none;padding:var(--ta-space-xs)}.link .item{width:100%;text-align:center;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-start}.link .icon,.link .title{padding:0;margin:0;color:var(--ta-text-primary)}.link .icon{margin-right:var(--ta-space-sm)}.link.active .icon,.link:hover .icon{color:var(--ta-icon-brand-primary)}.link.active .title,.link:hover .title{color:var(--ta-text-brand-primary)}.link.dark .icon,.link.dark .ending-icon{color:get-var(icon,tertiary)}.link.dark .title{color:get-var(text,primary)}.link.dark:hover:not(.disabled):not(.active){background-color:get-var(surface,brand,tertiary);border-radius:get-var(radius,label)}.link.dark:hover:not(.disabled):not(.active) .icon,.link.dark:hover:not(.disabled):not(.active) .ending-icon{color:get-var(icon,brand,primary)}.link.dark:hover:not(.disabled):not(.active) .title{color:get-var(text,brand,primary)}.link.horizontal{justify-content:center}.link.horizontal .item{display:flex;flex:1 1 100%;position:relative}.link.horizontal .item .badge-container{position:absolute;top:-10px;right:0}.link.vertical{padding:var(--ta-space-md) var(--ta-space-md)}.link.vertical .icon,.link.vertical .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.vertical .icon{margin-right:var(--ta-space-md)}@media screen and (max-width: 575px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 576px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 992px){.link.responsive{padding:var(--ta-space-md) var(--ta-space-md)}.link.responsive .icon,.link.responsive .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.responsive .icon{margin-right:var(--ta-space-md)}}.link.responsive.menu-minimized .icon{margin-left:auto!important;margin-right:auto!important}.link.responsive.menu-minimized .title{display:none}.link .disable{opacity:.5}.link .icon-image{margin-bottom:3px}.link .badge-container{position:relative;margin-left:auto}.link .ending-icon-container{display:flex;align-items:center;justify-content:flex-end}.trigger-container{position:relative}.trigger-container .trigger{position:absolute;top:0;right:calc(var(--ta-space-xl) * -1)}\n"], dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: RouterModule }, { kind: "directive", type: i2.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i2.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "ngmodule", type: MatMenuModule }, { kind: "component", type: i3.MatMenu, selector: "mat-menu", inputs: ["backdropClass", "aria-label", "aria-labelledby", "aria-describedby", "xPosition", "yPosition", "overlapTrigger", "hasBackdrop", "class", "classList"], outputs: ["closed", "close"], exportAs: ["matMenu"] }, { kind: "directive", type: i3.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", inputs: ["mat-menu-trigger-for", "matMenuTriggerFor", "matMenuTriggerData", "matMenuTriggerRestoreFocus"], outputs: ["menuOpened", "onMenuOpen", "menuClosed", "onMenuClose"], exportAs: ["matMenuTrigger"] }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i4.TranslatePipe, name: "translate" }, { kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }, { kind: "component", type: NotificationBadgeComponent, selector: "ta-notification-badge", inputs: ["number", "fontSize", "style", "relative"] }, { kind: "directive", type: TypedTemplateDirective, selector: "ng-template[typedTemplate]", inputs: ["typedTemplate"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: MenuItemComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-menu-item', standalone: true, imports: [
                        NgClass,
                        NgTemplateOutlet,
                        RouterModule,
                        MatMenuModule,
                        TranslateModule,
                        FontIconComponent,
                        NotificationBadgeComponent,
                        TypedTemplateDirective,
                    ], template: "@if (!this.hasChild()) {\n  <ng-container [style.cursor]=\"this.item.callback ? 'pointer' : 'default'\">\n    @if (this.getLink()) {\n      <a\n        class=\"link\"\n        [ngClass]=\"this.getStyleType()\"\n        routerLinkActive=\"active\"\n        [routerLinkActiveOptions]=\"{ exact: this.item.exact }\"\n        [routerLink]=\"[this.getLink()]\"\n        [replaceUrl]=\"this.item.replaceUrl\"\n      >\n        <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n      </a>\n    } @else {\n      <a (click)=\"this.executeCallback()\" class=\"link\" [ngClass]=\"this.getStyleType()\">\n        <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n      </a>\n    }\n  </ng-container>\n}\n\n<ng-template #Item [typedTemplate]=\"this.typeToken\">\n  <div class=\"item pointer\" [class.disable]=\"item.disabled\">\n    <div class=\"icon\">\n      @if (this.hasFontIcon()) {\n        <span class=\"icon-material\">\n          <ta-font-icon [name]=\"this.getFontIcon()\" size=\"xs\" [ngClass]=\"item.iconsColor\"></ta-font-icon>\n        </span>\n      }\n    </div>\n\n    <div class=\"title\">{{ item.label | translate }}</div>\n\n    <div class=\"badge-container d-flex\">\n      @if (item.options?.notificationBadge?.label) {\n        <ta-notification-badge\n          [number]=\"item.options?.notificationBadge?.label || 0\"\n          [style]=\"'brand-700'\"\n          fontSize=\"xs\"\n          [relative]=\"true\"\n        ></ta-notification-badge>\n      }\n      @let extraTemplate = item.options?.extraTemplate;\n      @if (extraTemplate) {\n        <ng-template [ngTemplateOutlet]=\"extraTemplate\"></ng-template>\n      }\n    </div>\n    @if (item.endingIcon) {\n      <div class=\"ending-icon-container\">\n        <ta-font-icon [name]=\"item.endingIcon\" [ngClass]=\"item.iconsColor\"></ta-font-icon>\n      </div>\n    }\n    @let template = this.getTemplate();\n    @if (template) {\n      <div class=\"trigger-container\">\n        <div class=\"trigger\" [matMenuTriggerFor]=\"menu\" #triggerPanel></div>\n        <mat-menu #menu=\"matMenu\">\n          <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n        </mat-menu>\n      </div>\n    }\n  </div>\n</ng-template>\n", styles: [".link{display:flex;flex-direction:row;text-decoration:none;padding:var(--ta-space-xs)}.link .item{width:100%;text-align:center;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-start}.link .icon,.link .title{padding:0;margin:0;color:var(--ta-text-primary)}.link .icon{margin-right:var(--ta-space-sm)}.link.active .icon,.link:hover .icon{color:var(--ta-icon-brand-primary)}.link.active .title,.link:hover .title{color:var(--ta-text-brand-primary)}.link.dark .icon,.link.dark .ending-icon{color:get-var(icon,tertiary)}.link.dark .title{color:get-var(text,primary)}.link.dark:hover:not(.disabled):not(.active){background-color:get-var(surface,brand,tertiary);border-radius:get-var(radius,label)}.link.dark:hover:not(.disabled):not(.active) .icon,.link.dark:hover:not(.disabled):not(.active) .ending-icon{color:get-var(icon,brand,primary)}.link.dark:hover:not(.disabled):not(.active) .title{color:get-var(text,brand,primary)}.link.horizontal{justify-content:center}.link.horizontal .item{display:flex;flex:1 1 100%;position:relative}.link.horizontal .item .badge-container{position:absolute;top:-10px;right:0}.link.vertical{padding:var(--ta-space-md) var(--ta-space-md)}.link.vertical .icon,.link.vertical .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.vertical .icon{margin-right:var(--ta-space-md)}@media screen and (max-width: 575px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 576px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 992px){.link.responsive{padding:var(--ta-space-md) var(--ta-space-md)}.link.responsive .icon,.link.responsive .title{font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.responsive .icon{margin-right:var(--ta-space-md)}}.link.responsive.menu-minimized .icon{margin-left:auto!important;margin-right:auto!important}.link.responsive.menu-minimized .title{display:none}.link .disable{opacity:.5}.link .icon-image{margin-bottom:3px}.link .badge-container{position:relative;margin-left:auto}.link .ending-icon-container{display:flex;align-items:center;justify-content:flex-end}.trigger-container{position:relative}.trigger-container .trigger{position:absolute;top:0;right:calc(var(--ta-space-xl) * -1)}\n"] }]
        }], ctorParameters: () => [{ type: i1.MatDialog }], propDecorators: { item: [{
                type: Input
            }], styleType: [{
                type: Input
            }], triggerMenu: [{
                type: ViewChild,
                args: [MatMenuTrigger]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9tZW51L2l0ZW0vbWVudS1pdGVtLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9tZW51L2l0ZW0vbWVudS1pdGVtLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFcEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxjQUFjLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN2RSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFL0MsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRXRELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUM5QyxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDcEQsT0FBTyxFQUFFLHNCQUFzQixFQUE4QixNQUFNLFFBQVEsQ0FBQztBQUM1RSxPQUFPLEVBQUUsZUFBZSxFQUFFLHNCQUFzQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRXBFLE9BQU8sRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUtoRyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQzs7Ozs7O0FBa0JsRSxNQUFNLE9BQU8saUJBQWtCLFNBQVEsZUFBZTtJQVlwRCxZQUFtQixLQUFnQjtRQUNqQyxLQUFLLEVBQUUsQ0FBQztRQURTLFVBQUssR0FBTCxLQUFLLENBQVc7UUFQbkMsY0FBUyxHQUFXLE1BQU0sQ0FBQztRQUtwQixXQUFNLEdBQVksS0FBSyxDQUFDO1FBSTdCLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ25DLENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUN0QyxDQUFDO0lBRU0sWUFBWTtRQUNqQixPQUFPLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ2hELENBQUM7SUFFTSxXQUFXO1FBQ2hCLE9BQU8sV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRU0sWUFBWTtRQUNqQixPQUFPLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVNLE9BQU87UUFDWixPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUVNLFdBQVc7UUFDaEIsT0FBTyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTSxRQUFRO1FBQ2IsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFDTSxNQUFNO1FBQ1gsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDN0IsQ0FBQztJQUVNLFdBQVc7UUFDaEIsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzFCLE9BQW1CLElBQUksQ0FBQyxJQUFLLENBQUMsUUFBUSxDQUFDO1FBQ3pDLENBQUM7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFTSxTQUFTLENBQUMsS0FBVSxFQUFFLElBQWM7UUFDekMsT0FBTyxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO0lBQ3BDLENBQUM7SUFFTSxlQUFlO1FBQ3BCLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUN0QyxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUNsQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBcUQsc0JBQXNCLEVBQUU7b0JBQzFGLElBQUksRUFBRTt3QkFDSixRQUFRLEVBQUUsVUFBVTtxQkFDckI7aUJBQ0YsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztpQkFBTSxDQUFDO2dCQUNOLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDOUIsQ0FBQztRQUNILENBQUM7YUFBTSxDQUFDO1lBQ04sSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDO1FBQ3pCLENBQUM7SUFDSCxDQUFDO0lBRU0sT0FBTztRQUNaLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRTtZQUFFLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFFbkUsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDOytHQWhGVSxpQkFBaUI7bUdBQWpCLGlCQUFpQix1S0FPakIsY0FBYyx1RUMzQzNCLDJxRUErREEsMjNGRHJDSSxPQUFPLG9GQUNQLGdCQUFnQixtSkFDaEIsWUFBWSxnZkFDWixhQUFhLHltQkFDYixlQUFlLDRGQUNmLGlCQUFpQixtRkFDakIsMEJBQTBCLHVIQUMxQixzQkFBc0I7OzRGQUdiLGlCQUFpQjtrQkFoQjdCLFNBQVM7K0JBQ0UsY0FBYyxjQUdaLElBQUksV0FDUDt3QkFDUCxPQUFPO3dCQUNQLGdCQUFnQjt3QkFDaEIsWUFBWTt3QkFDWixhQUFhO3dCQUNiLGVBQWU7d0JBQ2YsaUJBQWlCO3dCQUNqQiwwQkFBMEI7d0JBQzFCLHNCQUFzQjtxQkFDdkI7OEVBSUQsSUFBSTtzQkFESCxLQUFLO2dCQUlOLFNBQVM7c0JBRFIsS0FBSztnQkFHcUIsV0FBVztzQkFBckMsU0FBUzt1QkFBQyxjQUFjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmdDbGFzcywgTmdUZW1wbGF0ZU91dGxldCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWF0RGlhbG9nIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZGlhbG9nJztcbmltcG9ydCB7IE1hdE1lbnVNb2R1bGUsIE1hdE1lbnVUcmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvbWVudSc7XG5pbXBvcnQgeyBSb3V0ZXJNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuXG5pbXBvcnQgeyBUcmFuc2xhdGVNb2R1bGUgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcblxuaW1wb3J0IHsgRm9udEljb25Db21wb25lbnQgfSBmcm9tICdAdGEvaWNvbnMnO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uQmFkZ2VDb21wb25lbnQgfSBmcm9tICdAdGEvdWknO1xuaW1wb3J0IHsgVGVtcGxhdGVNb2RhbENvbnRhaW5lciwgVGVtcGxhdGVNb2RhbENvbnRhaW5lckRhdGEgfSBmcm9tICdAdGEvdWknO1xuaW1wb3J0IHsgVGFCYXNlQ29tcG9uZW50LCBUeXBlZFRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnQHRhL3V0aWxzJztcblxuaW1wb3J0IHsgZ2V0Rm9udEljb24sIGdldEljb24sIGhhc0ZvbnRJY29uLCBoYXNJY29uSW1hZ2UgfSBmcm9tICcuLi8uLi8uLi9oZWxwZXJzL2ljb24tbWFuYWdlcic7XG5pbXBvcnQgeyBNZW51QWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9hY3Rpb24nO1xuaW1wb3J0IHsgTWVudUJhc2UgfSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvbWVudS9pdGVtL2Jhc2UnO1xuaW1wb3J0IHsgTWVudUljb24gfSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvbWVudS9pdGVtL2ljb24nO1xuaW1wb3J0IHsgTWVudVBhbmVsIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9wYW5lbCc7XG5pbXBvcnQgeyBDYW1UcmFuc2xhdGlvbk1lbnUgfSBmcm9tICcuLi8uLi8uLi90cmFuc2xhdGlvbi5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGEtbWVudS1pdGVtJyxcbiAgdGVtcGxhdGVVcmw6ICcuL21lbnUtaXRlbS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL21lbnUtaXRlbS5jb21wb25lbnQuc2NzcyddLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgTmdDbGFzcyxcbiAgICBOZ1RlbXBsYXRlT3V0bGV0LFxuICAgIFJvdXRlck1vZHVsZSxcbiAgICBNYXRNZW51TW9kdWxlLFxuICAgIFRyYW5zbGF0ZU1vZHVsZSxcbiAgICBGb250SWNvbkNvbXBvbmVudCxcbiAgICBOb3RpZmljYXRpb25CYWRnZUNvbXBvbmVudCxcbiAgICBUeXBlZFRlbXBsYXRlRGlyZWN0aXZlLFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBNZW51SXRlbUNvbXBvbmVudCBleHRlbmRzIFRhQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpXG4gIGl0ZW0hOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSB8IE1lbnVQYW5lbDtcblxuICBASW5wdXQoKVxuICBzdHlsZVR5cGU6IFN0cmluZyA9ICdibG9jJztcblxuICBAVmlld0NoaWxkKE1hdE1lbnVUcmlnZ2VyKSB0cmlnZ2VyTWVudSE6IE1hdE1lbnVUcmlnZ2VyO1xuXG4gIHB1YmxpYyByZWFkb25seSB0eXBlVG9rZW4hOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSB8IE1lbnVQYW5lbDtcbiAgcHVibGljIGlzT3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtb2RhbDogTWF0RGlhbG9nKSB7XG4gICAgc3VwZXIoKTtcbiAgICBDYW1UcmFuc2xhdGlvbk1lbnUuZ2V0SW5zdGFuY2UoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuaXNPcGVuID0gdGhpcy5pdGVtLmRlZmF1bHRPcGVuO1xuICB9XG5cbiAgcHVibGljIGdldFN0eWxlVHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZVR5cGUgKyAnICcgKyB0aGlzLml0ZW0uc3R5bGU7XG4gIH1cblxuICBwdWJsaWMgaGFzRm9udEljb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGhhc0ZvbnRJY29uKHRoaXMuaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgaGFzSWNvbkltYWdlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNJY29uSW1hZ2UodGhpcy5pdGVtKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJY29uKCkge1xuICAgIHJldHVybiBnZXRJY29uKHRoaXMuaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Rm9udEljb24oKSB7XG4gICAgcmV0dXJuIGdldEZvbnRJY29uKHRoaXMuaXRlbSk7XG4gIH1cblxuICBwdWJsaWMgaGFzQ2hpbGQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwO1xuICB9XG4gIHB1YmxpYyB0b2dnbGUoKSB7XG4gICAgdGhpcy5pc09wZW4gPSAhdGhpcy5pc09wZW47XG4gIH1cblxuICBwdWJsaWMgZ2V0VGVtcGxhdGUoKSB7XG4gICAgaWYgKHRoaXMuaXRlbS5pc01lbnVQYW5lbCkge1xuICAgICAgcmV0dXJuICg8TWVudVBhbmVsPnRoaXMuaXRlbSkudGVtcGxhdGU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIHRyYWNrQnlGbihpbmRleDogYW55LCBpdGVtOiBNZW51QmFzZSkge1xuICAgIHJldHVybiB0aGlzLml0ZW0gKyAnLScgKyBpdGVtLmtleTtcbiAgfVxuXG4gIHB1YmxpYyBleGVjdXRlQ2FsbGJhY2soKSB7XG4gICAgY29uc3QgbXlUZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGUoKTtcbiAgICBpZiAobXlUZW1wbGF0ZSkge1xuICAgICAgaWYgKHRoaXMuYnJlYWtwb2ludHMuaXNMZXNzVGhhblhTKSB7XG4gICAgICAgIHRoaXMubW9kYWwub3BlbjxUZW1wbGF0ZU1vZGFsQ29udGFpbmVyLCBUZW1wbGF0ZU1vZGFsQ29udGFpbmVyRGF0YT4oVGVtcGxhdGVNb2RhbENvbnRhaW5lciwge1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlOiBteVRlbXBsYXRlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyTWVudS5vcGVuTWVudSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLml0ZW0uY2FsbGJhY2s/LigpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRMaW5rKCkge1xuICAgIGlmICh0aGlzLml0ZW0ubGluayAmJiB0aGlzLml0ZW0ubGluayAhPT0gJycpIHJldHVybiB0aGlzLml0ZW0ubGluaztcblxuICAgIHJldHVybiAnJztcbiAgfVxufVxuIiwiQGlmICghdGhpcy5oYXNDaGlsZCgpKSB7XG4gIDxuZy1jb250YWluZXIgW3N0eWxlLmN1cnNvcl09XCJ0aGlzLml0ZW0uY2FsbGJhY2sgPyAncG9pbnRlcicgOiAnZGVmYXVsdCdcIj5cbiAgICBAaWYgKHRoaXMuZ2V0TGluaygpKSB7XG4gICAgICA8YVxuICAgICAgICBjbGFzcz1cImxpbmtcIlxuICAgICAgICBbbmdDbGFzc109XCJ0aGlzLmdldFN0eWxlVHlwZSgpXCJcbiAgICAgICAgcm91dGVyTGlua0FjdGl2ZT1cImFjdGl2ZVwiXG4gICAgICAgIFtyb3V0ZXJMaW5rQWN0aXZlT3B0aW9uc109XCJ7IGV4YWN0OiB0aGlzLml0ZW0uZXhhY3QgfVwiXG4gICAgICAgIFtyb3V0ZXJMaW5rXT1cIlt0aGlzLmdldExpbmsoKV1cIlxuICAgICAgICBbcmVwbGFjZVVybF09XCJ0aGlzLml0ZW0ucmVwbGFjZVVybFwiXG4gICAgICA+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJJdGVtXCI+PC9uZy10ZW1wbGF0ZT5cbiAgICAgIDwvYT5cbiAgICB9IEBlbHNlIHtcbiAgICAgIDxhIChjbGljayk9XCJ0aGlzLmV4ZWN1dGVDYWxsYmFjaygpXCIgY2xhc3M9XCJsaW5rXCIgW25nQ2xhc3NdPVwidGhpcy5nZXRTdHlsZVR5cGUoKVwiPlxuICAgICAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwiSXRlbVwiPjwvbmctdGVtcGxhdGU+XG4gICAgICA8L2E+XG4gICAgfVxuICA8L25nLWNvbnRhaW5lcj5cbn1cblxuPG5nLXRlbXBsYXRlICNJdGVtIFt0eXBlZFRlbXBsYXRlXT1cInRoaXMudHlwZVRva2VuXCI+XG4gIDxkaXYgY2xhc3M9XCJpdGVtIHBvaW50ZXJcIiBbY2xhc3MuZGlzYWJsZV09XCJpdGVtLmRpc2FibGVkXCI+XG4gICAgPGRpdiBjbGFzcz1cImljb25cIj5cbiAgICAgIEBpZiAodGhpcy5oYXNGb250SWNvbigpKSB7XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiaWNvbi1tYXRlcmlhbFwiPlxuICAgICAgICAgIDx0YS1mb250LWljb24gW25hbWVdPVwidGhpcy5nZXRGb250SWNvbigpXCIgc2l6ZT1cInhzXCIgW25nQ2xhc3NdPVwiaXRlbS5pY29uc0NvbG9yXCI+PC90YS1mb250LWljb24+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIH1cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJ0aXRsZVwiPnt7IGl0ZW0ubGFiZWwgfCB0cmFuc2xhdGUgfX08L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJiYWRnZS1jb250YWluZXIgZC1mbGV4XCI+XG4gICAgICBAaWYgKGl0ZW0ub3B0aW9ucz8ubm90aWZpY2F0aW9uQmFkZ2U/LmxhYmVsKSB7XG4gICAgICAgIDx0YS1ub3RpZmljYXRpb24tYmFkZ2VcbiAgICAgICAgICBbbnVtYmVyXT1cIml0ZW0ub3B0aW9ucz8ubm90aWZpY2F0aW9uQmFkZ2U/LmxhYmVsIHx8IDBcIlxuICAgICAgICAgIFtzdHlsZV09XCInYnJhbmQtNzAwJ1wiXG4gICAgICAgICAgZm9udFNpemU9XCJ4c1wiXG4gICAgICAgICAgW3JlbGF0aXZlXT1cInRydWVcIlxuICAgICAgICA+PC90YS1ub3RpZmljYXRpb24tYmFkZ2U+XG4gICAgICB9XG4gICAgICBAbGV0IGV4dHJhVGVtcGxhdGUgPSBpdGVtLm9wdGlvbnM/LmV4dHJhVGVtcGxhdGU7XG4gICAgICBAaWYgKGV4dHJhVGVtcGxhdGUpIHtcbiAgICAgICAgPG5nLXRlbXBsYXRlIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImV4dHJhVGVtcGxhdGVcIj48L25nLXRlbXBsYXRlPlxuICAgICAgfVxuICAgIDwvZGl2PlxuICAgIEBpZiAoaXRlbS5lbmRpbmdJY29uKSB7XG4gICAgICA8ZGl2IGNsYXNzPVwiZW5kaW5nLWljb24tY29udGFpbmVyXCI+XG4gICAgICAgIDx0YS1mb250LWljb24gW25hbWVdPVwiaXRlbS5lbmRpbmdJY29uXCIgW25nQ2xhc3NdPVwiaXRlbS5pY29uc0NvbG9yXCI+PC90YS1mb250LWljb24+XG4gICAgICA8L2Rpdj5cbiAgICB9XG4gICAgQGxldCB0ZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGUoKTtcbiAgICBAaWYgKHRlbXBsYXRlKSB7XG4gICAgICA8ZGl2IGNsYXNzPVwidHJpZ2dlci1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRyaWdnZXJcIiBbbWF0TWVudVRyaWdnZXJGb3JdPVwibWVudVwiICN0cmlnZ2VyUGFuZWw+PC9kaXY+XG4gICAgICAgIDxtYXQtbWVudSAjbWVudT1cIm1hdE1lbnVcIj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwidGVtcGxhdGVcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9tYXQtbWVudT5cbiAgICAgIDwvZGl2PlxuICAgIH1cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuIl19