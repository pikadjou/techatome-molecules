import { NgClass, NgTemplateOutlet } from "@angular/common";
import { Component, input, ViewChild } from "@angular/core";
import { MatMenuModule, MatMenuTrigger } from "@angular/material/menu";
import { RouterModule } from "@angular/router";
import { TranslateModule } from "@ngx-translate/core";
import { FontIconComponent } from "@ta/icons";
import { NotificationBadgeComponent } from "@ta/ui";
import { TemplateModalContainer } from "@ta/ui";
import { TaBaseComponent, TypedTemplateDirective } from "@ta/utils";
import { getFontIcon, getIcon, hasFontIcon, hasIconImage, } from "../../../helpers/icon-manager";
import { TaTranslationMenu } from "../../../translation.service";
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
import * as i2 from "@angular/router";
import * as i3 from "@angular/material/menu";
import * as i4 from "@ngx-translate/core";
export class MenuItemComponent extends TaBaseComponent {
    constructor(modal) {
        super();
        this.modal = modal;
        this.item = input.required();
        this.styleType = input("bloc");
        this.isOpen = false;
        TaTranslationMenu.getInstance();
    }
    ngOnInit() {
        this.isOpen = this.item().defaultOpen;
    }
    getStyleType() {
        return this.styleType() + " " + this.item().style;
    }
    hasFontIcon() {
        return hasFontIcon(this.item());
    }
    hasIconImage() {
        return hasIconImage(this.item());
    }
    getIcon() {
        return getIcon(this.item());
    }
    getFontIcon() {
        return getFontIcon(this.item());
    }
    hasChild() {
        return this.item().children.length > 0;
    }
    toggle() {
        this.isOpen = !this.isOpen;
    }
    getTemplate() {
        if (this.item().isMenuPanel) {
            return this.item().template;
        }
        return null;
    }
    trackByFn(index, item) {
        return this.item() + "-" + item.key;
    }
    executeCallback() {
        const myTemplate = this.getTemplate();
        if (myTemplate) {
            if (this.breakpoints.isLessThanXS) {
                this.modal.open(TemplateModalContainer, {
                    data: {
                        template: myTemplate,
                    },
                });
            }
            else {
                this.triggerMenu.openMenu();
            }
        }
        else {
            this.item().callback?.();
        }
    }
    getLink() {
        if (this.item().link && this.item().link !== "")
            return this.item().link;
        return "";
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: MenuItemComponent, deps: [{ token: i1.MatDialog }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: MenuItemComponent, isStandalone: true, selector: "ta-menu-item", inputs: { item: { classPropertyName: "item", publicName: "item", isSignal: true, isRequired: true, transformFunction: null }, styleType: { classPropertyName: "styleType", publicName: "styleType", isSignal: true, isRequired: false, transformFunction: null } }, viewQueries: [{ propertyName: "triggerMenu", first: true, predicate: MatMenuTrigger, descendants: true }], usesInheritance: true, ngImport: i0, template: "@if (!this.hasChild()) {\n<ng-container [style.cursor]=\"this.item().callback ? 'pointer' : 'default'\">\n  @if (this.getLink()) {\n  <a\n    class=\"link\"\n    [ngClass]=\"this.getStyleType()\"\n    routerLinkActive=\"active\"\n    [routerLinkActiveOptions]=\"{ exact: this.item().exact }\"\n    [routerLink]=\"[this.getLink()]\"\n    [replaceUrl]=\"this.item().replaceUrl\"\n  >\n    <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n  </a>\n  } @else {\n  <a\n    (click)=\"this.executeCallback()\"\n    class=\"link\"\n    [ngClass]=\"this.getStyleType()\"\n  >\n    <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n  </a>\n  }\n</ng-container>\n}\n\n<ng-template #Item [typedTemplate]=\"this.typeToken\">\n  <div class=\"item pointer\" [class.disable]=\"this.item().disabled\">\n    <div class=\"icon\">\n      @if (this.hasFontIcon()) {\n      <span class=\"icon-material\">\n        <ta-font-icon\n          [name]=\"this.getFontIcon()\"\n          size=\"xs\"\n          [ngClass]=\"this.item().iconsColor\"\n        ></ta-font-icon>\n      </span>\n      }\n    </div>\n\n    <div class=\"title\">{{ this.item().label | translate }}</div>\n\n    <div class=\"badge-container d-flex\">\n      @if (this.item().options?.notificationBadge?.label) {\n      <ta-notification-badge\n        [number]=\"this.item().options?.notificationBadge?.label || 0\"\n        [style]=\"'brand-700'\"\n        fontSize=\"xs\"\n        [relative]=\"true\"\n      ></ta-notification-badge>\n      } @let extraTemplate = this.item().options?.extraTemplate; @if (extraTemplate) {\n      <ng-template [ngTemplateOutlet]=\"extraTemplate\"></ng-template>\n      }\n    </div>\n    @if (this.item().endingIcon) {\n    <div class=\"ending-icon-container\">\n      <ta-font-icon\n        [name]=\"this.item().endingIcon!\"\n        [ngClass]=\"this.item().iconsColor\"\n      ></ta-font-icon>\n    </div>\n    } @let template = this.getTemplate(); @if (template) {\n    <div class=\"trigger-container\">\n      <div class=\"trigger\" [matMenuTriggerFor]=\"menu\" #triggerPanel></div>\n      <mat-menu #menu=\"matMenu\">\n        <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n      </mat-menu>\n    </div>\n    }\n  </div>\n</ng-template>\n", styles: [".link{display:flex;flex-direction:row;text-decoration:none;padding:var(--ta-space-xs)}.link .item{width:100%;text-align:center;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-start}.link .icon,.link .title{padding:0;margin:0;color:var(--ta-text-secondary)}.link .icon{margin-right:var(--ta-space-sm)}.link.active .icon,.link:hover .icon{color:var(--ta-icon-brand-primary)}.link.active .title,.link:hover .title{color:var(--ta-text-primary)}.link.dark .icon,.link.dark .ending-icon{color:get-var(icon,tertiary)}.link.dark .title{color:get-var(text,primary)}.link.dark:hover:not(.disabled):not(.active) .icon,.link.dark:hover:not(.disabled):not(.active) .ending-icon{color:get-var(icon,brand,primary)}.link.dark:hover:not(.disabled):not(.active) .title{color:get-var(text,brand,primary)}.link.dark:hover:not(.disabled):not(.active){background-color:get-var(surface,brand,tertiary);border-radius:get-var(radius,label)}.link.horizontal{justify-content:center}.link.horizontal .item{display:flex;flex:1 1 100%;position:relative}.link.horizontal .item .badge-container{position:absolute;top:-10px;right:0}.link.vertical{padding:var(--ta-space-md) var(--ta-space-md)}.link.vertical .icon,.link.vertical .title{font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.vertical .icon{margin-right:var(--ta-space-md)}@media screen and (max-width: 575px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 576px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 992px){.link.responsive{padding:var(--ta-space-md) var(--ta-space-md)}.link.responsive .icon,.link.responsive .title{font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.responsive .icon{margin-right:var(--ta-space-md)}}.link.responsive.menu-minimized .icon{margin-left:auto!important;margin-right:auto!important}.link.responsive.menu-minimized .title{display:none}.link .disable{opacity:.5}.link .icon-image{margin-bottom:3px}.link .badge-container{position:relative;margin-left:auto}.link .ending-icon-container{display:flex;align-items:center;justify-content:flex-end}.trigger-container{position:relative}.trigger-container .trigger{position:absolute;top:0;right:calc(var(--ta-space-xl) * -1)}\n"], dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: RouterModule }, { kind: "directive", type: i2.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i2.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "ngmodule", type: MatMenuModule }, { kind: "component", type: i3.MatMenu, selector: "mat-menu", inputs: ["backdropClass", "aria-label", "aria-labelledby", "aria-describedby", "xPosition", "yPosition", "overlapTrigger", "hasBackdrop", "class", "classList"], outputs: ["closed", "close"], exportAs: ["matMenu"] }, { kind: "directive", type: i3.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", inputs: ["mat-menu-trigger-for", "matMenuTriggerFor", "matMenuTriggerData", "matMenuTriggerRestoreFocus"], outputs: ["menuOpened", "onMenuOpen", "menuClosed", "onMenuClose"], exportAs: ["matMenuTrigger"] }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i4.TranslatePipe, name: "translate" }, { kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }, { kind: "component", type: NotificationBadgeComponent, selector: "ta-notification-badge", inputs: ["number", "fontSize", "style", "relative"] }, { kind: "directive", type: TypedTemplateDirective, selector: "ng-template[typedTemplate]", inputs: ["typedTemplate"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: MenuItemComponent, decorators: [{
            type: Component,
            args: [{ selector: "ta-menu-item", standalone: true, imports: [
                        NgClass,
                        NgTemplateOutlet,
                        RouterModule,
                        MatMenuModule,
                        TranslateModule,
                        FontIconComponent,
                        NotificationBadgeComponent,
                        TypedTemplateDirective,
                    ], template: "@if (!this.hasChild()) {\n<ng-container [style.cursor]=\"this.item().callback ? 'pointer' : 'default'\">\n  @if (this.getLink()) {\n  <a\n    class=\"link\"\n    [ngClass]=\"this.getStyleType()\"\n    routerLinkActive=\"active\"\n    [routerLinkActiveOptions]=\"{ exact: this.item().exact }\"\n    [routerLink]=\"[this.getLink()]\"\n    [replaceUrl]=\"this.item().replaceUrl\"\n  >\n    <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n  </a>\n  } @else {\n  <a\n    (click)=\"this.executeCallback()\"\n    class=\"link\"\n    [ngClass]=\"this.getStyleType()\"\n  >\n    <ng-template [ngTemplateOutlet]=\"Item\"></ng-template>\n  </a>\n  }\n</ng-container>\n}\n\n<ng-template #Item [typedTemplate]=\"this.typeToken\">\n  <div class=\"item pointer\" [class.disable]=\"this.item().disabled\">\n    <div class=\"icon\">\n      @if (this.hasFontIcon()) {\n      <span class=\"icon-material\">\n        <ta-font-icon\n          [name]=\"this.getFontIcon()\"\n          size=\"xs\"\n          [ngClass]=\"this.item().iconsColor\"\n        ></ta-font-icon>\n      </span>\n      }\n    </div>\n\n    <div class=\"title\">{{ this.item().label | translate }}</div>\n\n    <div class=\"badge-container d-flex\">\n      @if (this.item().options?.notificationBadge?.label) {\n      <ta-notification-badge\n        [number]=\"this.item().options?.notificationBadge?.label || 0\"\n        [style]=\"'brand-700'\"\n        fontSize=\"xs\"\n        [relative]=\"true\"\n      ></ta-notification-badge>\n      } @let extraTemplate = this.item().options?.extraTemplate; @if (extraTemplate) {\n      <ng-template [ngTemplateOutlet]=\"extraTemplate\"></ng-template>\n      }\n    </div>\n    @if (this.item().endingIcon) {\n    <div class=\"ending-icon-container\">\n      <ta-font-icon\n        [name]=\"this.item().endingIcon!\"\n        [ngClass]=\"this.item().iconsColor\"\n      ></ta-font-icon>\n    </div>\n    } @let template = this.getTemplate(); @if (template) {\n    <div class=\"trigger-container\">\n      <div class=\"trigger\" [matMenuTriggerFor]=\"menu\" #triggerPanel></div>\n      <mat-menu #menu=\"matMenu\">\n        <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n      </mat-menu>\n    </div>\n    }\n  </div>\n</ng-template>\n", styles: [".link{display:flex;flex-direction:row;text-decoration:none;padding:var(--ta-space-xs)}.link .item{width:100%;text-align:center;align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-start}.link .icon,.link .title{padding:0;margin:0;color:var(--ta-text-secondary)}.link .icon{margin-right:var(--ta-space-sm)}.link.active .icon,.link:hover .icon{color:var(--ta-icon-brand-primary)}.link.active .title,.link:hover .title{color:var(--ta-text-primary)}.link.dark .icon,.link.dark .ending-icon{color:get-var(icon,tertiary)}.link.dark .title{color:get-var(text,primary)}.link.dark:hover:not(.disabled):not(.active) .icon,.link.dark:hover:not(.disabled):not(.active) .ending-icon{color:get-var(icon,brand,primary)}.link.dark:hover:not(.disabled):not(.active) .title{color:get-var(text,brand,primary)}.link.dark:hover:not(.disabled):not(.active){background-color:get-var(surface,brand,tertiary);border-radius:get-var(radius,label)}.link.horizontal{justify-content:center}.link.horizontal .item{display:flex;flex:1 1 100%;position:relative}.link.horizontal .item .badge-container{position:absolute;top:-10px;right:0}.link.vertical{padding:var(--ta-space-md) var(--ta-space-md)}.link.vertical .icon,.link.vertical .title{font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.vertical .icon{margin-right:var(--ta-space-md)}@media screen and (max-width: 575px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 576px){.link.responsive{justify-content:center}.link.responsive .item{display:flex;flex:1 1 100%;position:relative}.link.responsive .item .badge-container{position:absolute;top:-10px;right:0}.link.responsive .ending-icon-container{display:none}}@media screen and (min-width: 992px){.link.responsive{padding:var(--ta-space-md) var(--ta-space-md)}.link.responsive .icon,.link.responsive .title{font-size:var(--ta-font-body-md-default-size);font-weight:var(--ta-font-body-md-default-weight);text-align:left;flex:0 0 auto;width:auto}.link.responsive .icon{margin-right:var(--ta-space-md)}}.link.responsive.menu-minimized .icon{margin-left:auto!important;margin-right:auto!important}.link.responsive.menu-minimized .title{display:none}.link .disable{opacity:.5}.link .icon-image{margin-bottom:3px}.link .badge-container{position:relative;margin-left:auto}.link .ending-icon-container{display:flex;align-items:center;justify-content:flex-end}.trigger-container{position:relative}.trigger-container .trigger{position:absolute;top:0;right:calc(var(--ta-space-xl) * -1)}\n"] }]
        }], ctorParameters: () => [{ type: i1.MatDialog }], propDecorators: { triggerMenu: [{
                type: ViewChild,
                args: [MatMenuTrigger]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9tZW51L2l0ZW0vbWVudS1pdGVtLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9tZW51L2l0ZW0vbWVudS1pdGVtLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFcEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxjQUFjLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN2RSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFL0MsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRXRELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUM5QyxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDcEQsT0FBTyxFQUFFLHNCQUFzQixFQUE4QixNQUFNLFFBQVEsQ0FBQztBQUM1RSxPQUFPLEVBQUUsZUFBZSxFQUFFLHNCQUFzQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRXBFLE9BQU8sRUFDTCxXQUFXLEVBQ1gsT0FBTyxFQUNQLFdBQVcsRUFDWCxZQUFZLEdBQ2IsTUFBTSwrQkFBK0IsQ0FBQztBQUt2QyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQzs7Ozs7O0FBa0JqRSxNQUFNLE9BQU8saUJBQWtCLFNBQVEsZUFBZTtJQVVwRCxZQUFtQixLQUFnQjtRQUNqQyxLQUFLLEVBQUUsQ0FBQztRQURTLFVBQUssR0FBTCxLQUFLLENBQVc7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QUFjLGNBR1osSUFBSSxXQUNQO3dCQUNQLE9BQU87d0JBQ1AsZ0JBQWdCO3dCQUNoQixZQUFZO3dCQUNaLGFBQWE7d0JBQ2IsZUFBZTt3QkFDZixpQkFBaUI7d0JBQ2pCLDBCQUEwQjt3QkFDMUIsc0JBQXNCO3FCQUN2Qjs4RUFPMEIsV0FBVztzQkFBckMsU0FBUzt1QkFBQyxjQUFjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmdDbGFzcywgTmdUZW1wbGF0ZU91dGxldCB9IGZyb20gXCJAYW5ndWxhci9jb21tb25cIjtcbmltcG9ydCB7IENvbXBvbmVudCwgaW5wdXQsIE9uSW5pdCwgVmlld0NoaWxkIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE1hdERpYWxvZyB9IGZyb20gXCJAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2dcIjtcbmltcG9ydCB7IE1hdE1lbnVNb2R1bGUsIE1hdE1lbnVUcmlnZ2VyIH0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsL21lbnVcIjtcbmltcG9ydCB7IFJvdXRlck1vZHVsZSB9IGZyb20gXCJAYW5ndWxhci9yb3V0ZXJcIjtcblxuaW1wb3J0IHsgVHJhbnNsYXRlTW9kdWxlIH0gZnJvbSBcIkBuZ3gtdHJhbnNsYXRlL2NvcmVcIjtcblxuaW1wb3J0IHsgRm9udEljb25Db21wb25lbnQgfSBmcm9tIFwiQHRhL2ljb25zXCI7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25CYWRnZUNvbXBvbmVudCB9IGZyb20gXCJAdGEvdWlcIjtcbmltcG9ydCB7IFRlbXBsYXRlTW9kYWxDb250YWluZXIsIFRlbXBsYXRlTW9kYWxDb250YWluZXJEYXRhIH0gZnJvbSBcIkB0YS91aVwiO1xuaW1wb3J0IHsgVGFCYXNlQ29tcG9uZW50LCBUeXBlZFRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSBcIkB0YS91dGlsc1wiO1xuXG5pbXBvcnQge1xuICBnZXRGb250SWNvbixcbiAgZ2V0SWNvbixcbiAgaGFzRm9udEljb24sXG4gIGhhc0ljb25JbWFnZSxcbn0gZnJvbSBcIi4uLy4uLy4uL2hlbHBlcnMvaWNvbi1tYW5hZ2VyXCI7XG5pbXBvcnQgeyBNZW51QWN0aW9uIH0gZnJvbSBcIi4uLy4uLy4uL21vZGVscy9tZW51L2l0ZW0vYWN0aW9uXCI7XG5pbXBvcnQgeyBNZW51QmFzZSB9IGZyb20gXCIuLi8uLi8uLi9tb2RlbHMvbWVudS9pdGVtL2Jhc2VcIjtcbmltcG9ydCB7IE1lbnVJY29uIH0gZnJvbSBcIi4uLy4uLy4uL21vZGVscy9tZW51L2l0ZW0vaWNvblwiO1xuaW1wb3J0IHsgTWVudVBhbmVsIH0gZnJvbSBcIi4uLy4uLy4uL21vZGVscy9tZW51L2l0ZW0vcGFuZWxcIjtcbmltcG9ydCB7IFRhVHJhbnNsYXRpb25NZW51IH0gZnJvbSBcIi4uLy4uLy4uL3RyYW5zbGF0aW9uLnNlcnZpY2VcIjtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcInRhLW1lbnUtaXRlbVwiLFxuICB0ZW1wbGF0ZVVybDogXCIuL21lbnUtaXRlbS5jb21wb25lbnQuaHRtbFwiLFxuICBzdHlsZVVybHM6IFtcIi4vbWVudS1pdGVtLmNvbXBvbmVudC5zY3NzXCJdLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgTmdDbGFzcyxcbiAgICBOZ1RlbXBsYXRlT3V0bGV0LFxuICAgIFJvdXRlck1vZHVsZSxcbiAgICBNYXRNZW51TW9kdWxlLFxuICAgIFRyYW5zbGF0ZU1vZHVsZSxcbiAgICBGb250SWNvbkNvbXBvbmVudCxcbiAgICBOb3RpZmljYXRpb25CYWRnZUNvbXBvbmVudCxcbiAgICBUeXBlZFRlbXBsYXRlRGlyZWN0aXZlLFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBNZW51SXRlbUNvbXBvbmVudCBleHRlbmRzIFRhQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIGl0ZW0gPSBpbnB1dC5yZXF1aXJlZDxNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSB8IE1lbnVQYW5lbD4oKTtcblxuICBzdHlsZVR5cGUgPSBpbnB1dDxTdHJpbmc+KFwiYmxvY1wiKTtcblxuICBAVmlld0NoaWxkKE1hdE1lbnVUcmlnZ2VyKSB0cmlnZ2VyTWVudSE6IE1hdE1lbnVUcmlnZ2VyO1xuXG4gIHB1YmxpYyByZWFkb25seSB0eXBlVG9rZW4hOiBNZW51SWNvbiB8IE1lbnVBY3Rpb24gfCBNZW51QmFzZSB8IE1lbnVQYW5lbDtcbiAgcHVibGljIGlzT3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtb2RhbDogTWF0RGlhbG9nKSB7XG4gICAgc3VwZXIoKTtcbiAgICBUYVRyYW5zbGF0aW9uTWVudS5nZXRJbnN0YW5jZSgpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5pc09wZW4gPSB0aGlzLml0ZW0oKS5kZWZhdWx0T3BlbjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdHlsZVR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3R5bGVUeXBlKCkgKyBcIiBcIiArIHRoaXMuaXRlbSgpLnN0eWxlO1xuICB9XG5cbiAgcHVibGljIGhhc0ZvbnRJY29uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNGb250SWNvbih0aGlzLml0ZW0oKSk7XG4gIH1cblxuICBwdWJsaWMgaGFzSWNvbkltYWdlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNJY29uSW1hZ2UodGhpcy5pdGVtKCkpO1xuICB9XG5cbiAgcHVibGljIGdldEljb24oKSB7XG4gICAgcmV0dXJuIGdldEljb24odGhpcy5pdGVtKCkpO1xuICB9XG5cbiAgcHVibGljIGdldEZvbnRJY29uKCkge1xuICAgIHJldHVybiBnZXRGb250SWNvbih0aGlzLml0ZW0oKSk7XG4gIH1cblxuICBwdWJsaWMgaGFzQ2hpbGQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbSgpLmNoaWxkcmVuLmxlbmd0aCA+IDA7XG4gIH1cbiAgcHVibGljIHRvZ2dsZSgpIHtcbiAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3BlbjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUZW1wbGF0ZSgpIHtcbiAgICBpZiAodGhpcy5pdGVtKCkuaXNNZW51UGFuZWwpIHtcbiAgICAgIHJldHVybiAoPE1lbnVQYW5lbD50aGlzLml0ZW0oKSkudGVtcGxhdGU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIHRyYWNrQnlGbihpbmRleDogYW55LCBpdGVtOiBNZW51QmFzZSkge1xuICAgIHJldHVybiB0aGlzLml0ZW0oKSArIFwiLVwiICsgaXRlbS5rZXk7XG4gIH1cblxuICBwdWJsaWMgZXhlY3V0ZUNhbGxiYWNrKCkge1xuICAgIGNvbnN0IG15VGVtcGxhdGUgPSB0aGlzLmdldFRlbXBsYXRlKCk7XG4gICAgaWYgKG15VGVtcGxhdGUpIHtcbiAgICAgIGlmICh0aGlzLmJyZWFrcG9pbnRzLmlzTGVzc1RoYW5YUykge1xuICAgICAgICB0aGlzLm1vZGFsLm9wZW48VGVtcGxhdGVNb2RhbENvbnRhaW5lciwgVGVtcGxhdGVNb2RhbENvbnRhaW5lckRhdGE+KFxuICAgICAgICAgIFRlbXBsYXRlTW9kYWxDb250YWluZXIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICB0ZW1wbGF0ZTogbXlUZW1wbGF0ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyTWVudS5vcGVuTWVudSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLml0ZW0oKS5jYWxsYmFjaz8uKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldExpbmsoKSB7XG4gICAgaWYgKHRoaXMuaXRlbSgpLmxpbmsgJiYgdGhpcy5pdGVtKCkubGluayAhPT0gXCJcIikgcmV0dXJuIHRoaXMuaXRlbSgpLmxpbms7XG5cbiAgICByZXR1cm4gXCJcIjtcbiAgfVxufVxuIiwiQGlmICghdGhpcy5oYXNDaGlsZCgpKSB7XG48bmctY29udGFpbmVyIFtzdHlsZS5jdXJzb3JdPVwidGhpcy5pdGVtKCkuY2FsbGJhY2sgPyAncG9pbnRlcicgOiAnZGVmYXVsdCdcIj5cbiAgQGlmICh0aGlzLmdldExpbmsoKSkge1xuICA8YVxuICAgIGNsYXNzPVwibGlua1wiXG4gICAgW25nQ2xhc3NdPVwidGhpcy5nZXRTdHlsZVR5cGUoKVwiXG4gICAgcm91dGVyTGlua0FjdGl2ZT1cImFjdGl2ZVwiXG4gICAgW3JvdXRlckxpbmtBY3RpdmVPcHRpb25zXT1cInsgZXhhY3Q6IHRoaXMuaXRlbSgpLmV4YWN0IH1cIlxuICAgIFtyb3V0ZXJMaW5rXT1cIlt0aGlzLmdldExpbmsoKV1cIlxuICAgIFtyZXBsYWNlVXJsXT1cInRoaXMuaXRlbSgpLnJlcGxhY2VVcmxcIlxuICA+XG4gICAgPG5nLXRlbXBsYXRlIFtuZ1RlbXBsYXRlT3V0bGV0XT1cIkl0ZW1cIj48L25nLXRlbXBsYXRlPlxuICA8L2E+XG4gIH0gQGVsc2Uge1xuICA8YVxuICAgIChjbGljayk9XCJ0aGlzLmV4ZWN1dGVDYWxsYmFjaygpXCJcbiAgICBjbGFzcz1cImxpbmtcIlxuICAgIFtuZ0NsYXNzXT1cInRoaXMuZ2V0U3R5bGVUeXBlKClcIlxuICA+XG4gICAgPG5nLXRlbXBsYXRlIFtuZ1RlbXBsYXRlT3V0bGV0XT1cIkl0ZW1cIj48L25nLXRlbXBsYXRlPlxuICA8L2E+XG4gIH1cbjwvbmctY29udGFpbmVyPlxufVxuXG48bmctdGVtcGxhdGUgI0l0ZW0gW3R5cGVkVGVtcGxhdGVdPVwidGhpcy50eXBlVG9rZW5cIj5cbiAgPGRpdiBjbGFzcz1cIml0ZW0gcG9pbnRlclwiIFtjbGFzcy5kaXNhYmxlXT1cInRoaXMuaXRlbSgpLmRpc2FibGVkXCI+XG4gICAgPGRpdiBjbGFzcz1cImljb25cIj5cbiAgICAgIEBpZiAodGhpcy5oYXNGb250SWNvbigpKSB7XG4gICAgICA8c3BhbiBjbGFzcz1cImljb24tbWF0ZXJpYWxcIj5cbiAgICAgICAgPHRhLWZvbnQtaWNvblxuICAgICAgICAgIFtuYW1lXT1cInRoaXMuZ2V0Rm9udEljb24oKVwiXG4gICAgICAgICAgc2l6ZT1cInhzXCJcbiAgICAgICAgICBbbmdDbGFzc109XCJ0aGlzLml0ZW0oKS5pY29uc0NvbG9yXCJcbiAgICAgICAgPjwvdGEtZm9udC1pY29uPlxuICAgICAgPC9zcGFuPlxuICAgICAgfVxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cInRpdGxlXCI+e3sgdGhpcy5pdGVtKCkubGFiZWwgfCB0cmFuc2xhdGUgfX08L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJiYWRnZS1jb250YWluZXIgZC1mbGV4XCI+XG4gICAgICBAaWYgKHRoaXMuaXRlbSgpLm9wdGlvbnM/Lm5vdGlmaWNhdGlvbkJhZGdlPy5sYWJlbCkge1xuICAgICAgPHRhLW5vdGlmaWNhdGlvbi1iYWRnZVxuICAgICAgICBbbnVtYmVyXT1cInRoaXMuaXRlbSgpLm9wdGlvbnM/Lm5vdGlmaWNhdGlvbkJhZGdlPy5sYWJlbCB8fCAwXCJcbiAgICAgICAgW3N0eWxlXT1cIidicmFuZC03MDAnXCJcbiAgICAgICAgZm9udFNpemU9XCJ4c1wiXG4gICAgICAgIFtyZWxhdGl2ZV09XCJ0cnVlXCJcbiAgICAgID48L3RhLW5vdGlmaWNhdGlvbi1iYWRnZT5cbiAgICAgIH0gQGxldCBleHRyYVRlbXBsYXRlID0gdGhpcy5pdGVtKCkub3B0aW9ucz8uZXh0cmFUZW1wbGF0ZTsgQGlmIChleHRyYVRlbXBsYXRlKSB7XG4gICAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwiZXh0cmFUZW1wbGF0ZVwiPjwvbmctdGVtcGxhdGU+XG4gICAgICB9XG4gICAgPC9kaXY+XG4gICAgQGlmICh0aGlzLml0ZW0oKS5lbmRpbmdJY29uKSB7XG4gICAgPGRpdiBjbGFzcz1cImVuZGluZy1pY29uLWNvbnRhaW5lclwiPlxuICAgICAgPHRhLWZvbnQtaWNvblxuICAgICAgICBbbmFtZV09XCJ0aGlzLml0ZW0oKS5lbmRpbmdJY29uIVwiXG4gICAgICAgIFtuZ0NsYXNzXT1cInRoaXMuaXRlbSgpLmljb25zQ29sb3JcIlxuICAgICAgPjwvdGEtZm9udC1pY29uPlxuICAgIDwvZGl2PlxuICAgIH0gQGxldCB0ZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGUoKTsgQGlmICh0ZW1wbGF0ZSkge1xuICAgIDxkaXYgY2xhc3M9XCJ0cmlnZ2VyLWNvbnRhaW5lclwiPlxuICAgICAgPGRpdiBjbGFzcz1cInRyaWdnZXJcIiBbbWF0TWVudVRyaWdnZXJGb3JdPVwibWVudVwiICN0cmlnZ2VyUGFuZWw+PC9kaXY+XG4gICAgICA8bWF0LW1lbnUgI21lbnU9XCJtYXRNZW51XCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJ0ZW1wbGF0ZVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9tYXQtbWVudT5cbiAgICA8L2Rpdj5cbiAgICB9XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==