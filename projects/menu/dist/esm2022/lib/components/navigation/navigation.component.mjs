import { AsyncPipe, NgClass, NgTemplateOutlet } from '@angular/common';
import { Component, Input } from '@angular/core';
import { RouterModule } from '@angular/router';
import { TranslateModule } from '@ngx-translate/core';
import { FontIconComponent } from '@ta/icons';
import { NotificationBadgeComponent, NotificationBadgeContainerComponent, SwiperLightComponent } from '@ta/ui';
import { TaAbstractComponent, TypedTemplateDirective } from '@ta/utils';
import { getFontIcon, hasFontIcon } from '../../helpers/icon-manager';
import { TaTranslationMenu } from '../../translation.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@ngx-translate/core";
export class NavigationComponent extends TaAbstractComponent {
    constructor() {
        super();
        this.swiper = false;
        this.options = {};
        this.hasFontIcon = hasFontIcon;
        this.getFontIcon = getFontIcon;
        this.activeKey = '';
        TaTranslationMenu.getInstance();
    }
    ngOnInit() {
        const defaultOpen = this.menu.elements.find(e => e.defaultOpen);
        if (!defaultOpen || !defaultOpen.callback) {
            return;
        }
        this.callback(defaultOpen);
        if (this.manuallyChanged$) {
            this._registerSubscription(this.manuallyChanged$.subscribe({
                next: (key) => {
                    const found = this.menu.elements.find(element => element.key === key);
                    if (found) {
                        this.callback(found);
                    }
                },
            }));
        }
    }
    getSpaceClass() {
        if (this.options.spaceElement === null) {
            return '';
        }
        return `g-space-${this.options.spaceElement ?? 'lg'}`;
    }
    getLink(item) {
        if (item.link && item.link !== '') {
            return item.link;
        }
        return ''; // TODO this._navigationService.currentPageUrl;
    }
    callback(item) {
        if (item.disabled) {
            return;
        }
        this.activeKey = item.key;
        if (item.callback) {
            item.callback();
        }
    }
    isActive(item) {
        return item.key === this.activeKey;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: NavigationComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: NavigationComponent, isStandalone: true, selector: "ta-menu-navigation", inputs: { menu: "menu", container: "container", swiper: "swiper", options: "options", manuallyChanged$: "manuallyChanged$" }, usesInheritance: true, ngImport: i0, template: "<div class=\"navigation-container\" [class]=\"this.container\">\n  <div class=\"list\">\n    @if (this.swiper) {\n      <ta-swiper-light\n        [items]=\"this.menu.elements\"\n        [template]=\"template\"\n        [forced]=\"true\"\n        [swiperClasses]=\"this.getSpaceClass()\"\n      ></ta-swiper-light>\n    } @else {\n      <div class=\"element-list\" [ngClass]=\"this.menu.direction + ' ' + this.getSpaceClass()\">\n        @for (element of this.menu.elements; track element) {\n          @let visible = element.visible$ | async;\n          @if (visible) {\n            <div class=\"element\">\n              <ng-template\n                [ngTemplateOutlet]=\"template\"\n                [ngTemplateOutletContext]=\"{\n                  element: element,\n                }\"\n              >\n              </ng-template>\n            </div>\n          }\n        }\n      </div>\n    }\n  </div>\n</div>\n\n<ng-template #template let-element=\"element\">\n  <ta-notification-badge-container class=\"c-pointer flex-full\">\n    @if (element.callback || element.disabled) {\n      <div\n        (click)=\"this.callback(element)\"\n        class=\"item-container flex-full\"\n        [ngClass]=\"{ active: this.isActive(element), disabled: element.disabled }\"\n      >\n        <ng-template\n          [ngTemplateOutlet]=\"Item\"\n          [ngTemplateOutletContext]=\"{\n            item: element,\n          }\"\n        >\n        </ng-template>\n      </div>\n    } @else {\n      <div\n        class=\"item-container flex-full\"\n        routerLinkActive=\"active\"\n        [routerLinkActiveOptions]=\"{ exact: element.exact }\"\n        [routerLink]=\"[this.getLink(element)]\"\n        [queryParamsHandling]=\"element.queryParamsHandling\"\n      >\n        <ng-template\n          [ngTemplateOutlet]=\"Item\"\n          [ngTemplateOutletContext]=\"{\n            item: element,\n          }\"\n        >\n        </ng-template>\n      </div>\n    }\n    @if (element.options?.notificationBadge?.label) {\n      <ta-notification-badge\n        [number]=\"element.options?.notificationBadge?.label || 0\"\n        [style]=\"element.options?.notificationBadge?.style\"\n        fontSize=\"xs\"\n      ></ta-notification-badge>\n    }\n  </ta-notification-badge-container>\n</ng-template>\n\n<ng-template #Item let-item=\"item\" [typedTemplate]=\"this.typeItem\">\n  <div class=\"item flex-full\" [class.disabled]=\"item.disabled\">\n    @if (this.hasFontIcon(item)) {\n      <div class=\"icon\">\n        <ta-font-icon [name]=\"this.getFontIcon(item)\"></ta-font-icon>\n      </div>\n    }\n    @if (item.label) {\n      <div class=\"label\">\n        {{ item.label | translate }}\n      </div>\n    }\n    @if (item.translationData?.length) {\n      <div class=\"bullet\">({{ item.translationData?.length }})</div>\n    }\n  </div>\n</ng-template>\n", styles: [".element-list{gap:var(--ta-space-md);display:flex;flex-direction:row}.element-list .item-container{cursor:pointer}.element-list .item-container.disabled{cursor:not-allowed}.element-list.vertical{display:flex;flex-direction:column}.tags .item-container .item{flex-direction:row;display:flex;align-items:center;gap:var(--ta-space-xs);padding:var(--ta-space-md);border:1px solid transparent;color:var(--ta-text-tertiary);background-color:var(--ta-surface-tertiary);border-color:var(--ta-surface-tertiary);border-radius:var(--ta-radius-rounded);font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.tags .item-container.disabled .item{background-color:var(--ta-surface-primary);border-color:var(--ta-border-disabled)}.tags .item-container.active .item{color:var(--ta-text-brand-primary);background-color:var(--ta-surface-default);border-color:var(--ta-surface-default)}.tab .list{border-bottom:1px solid var(--ta-border-secondary)}.tab .item-container .item{flex-direction:row;display:flex;align-items:center;gap:var(--ta-space-xs);padding:var(--ta-space-md);border-bottom:2px solid transparent;color:var(--ta-text-tertiary);font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.tab .item-container.disabled{opacity:.5}.tab .item-container.active .item{color:var(--ta-text-brand-primary);border-bottom-color:var(--ta-border-brand)}.submenu{padding:var(--ta-space-xs);background-color:var(--ta-surface-default);border-radius:var(--ta-radius-rounded)}.submenu .element-list{gap:var(--ta-space-xs);display:flex;flex-direction:row;justify-content:space-between}.submenu .element-list .element{display:flex;flex:1 1 auto}.submenu .item-container .item{flex-direction:row;align-items:center;display:flex;justify-content:center;margin:auto;padding:var(--ta-space-sm);border-radius:var(--ta-radius-rounded);color:var(--ta-text-secondary);font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight)}.submenu .item-container.disabled{opacity:.5}.submenu .item-container.active .item{background-color:var(--ta-surface-primary);color:var(--ta-text-brand-primary);font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-bold-weight)}.submenu .item-container:hover .item{color:var(--ta-text-brand-primary);font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-bold-weight)}:host ::ng-deep .swiper-container{gap:var(--ta-space-sm)!important}:host ::ng-deep ta-font-icon{margin-top:-6px;display:block}:host ::ng-deep ta-font-icon i{height:18px!important;font-size:18px!important}\n"], dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: RouterModule }, { kind: "directive", type: i1.RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: i1.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "ngmodule", type: TranslateModule }, { kind: "pipe", type: i2.TranslatePipe, name: "translate" }, { kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }, { kind: "component", type: NotificationBadgeComponent, selector: "ta-notification-badge", inputs: ["number", "fontSize", "style", "relative"] }, { kind: "component", type: NotificationBadgeContainerComponent, selector: "ta-notification-badge-container" }, { kind: "component", type: SwiperLightComponent, selector: "ta-swiper-light", inputs: ["items", "template", "swiperClasses", "containerClasses", "forced"] }, { kind: "directive", type: TypedTemplateDirective, selector: "ng-template[typedTemplate]", inputs: ["typedTemplate"] }, { kind: "pipe", type: AsyncPipe, name: "async" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: NavigationComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-menu-navigation', standalone: true, imports: [
                        NgClass,
                        NgTemplateOutlet,
                        RouterModule,
                        TranslateModule,
                        FontIconComponent,
                        NotificationBadgeComponent,
                        NotificationBadgeContainerComponent,
                        SwiperLightComponent,
                        TypedTemplateDirective,
                        AsyncPipe,
                    ], template: "<div class=\"navigation-container\" [class]=\"this.container\">\n  <div class=\"list\">\n    @if (this.swiper) {\n      <ta-swiper-light\n        [items]=\"this.menu.elements\"\n        [template]=\"template\"\n        [forced]=\"true\"\n        [swiperClasses]=\"this.getSpaceClass()\"\n      ></ta-swiper-light>\n    } @else {\n      <div class=\"element-list\" [ngClass]=\"this.menu.direction + ' ' + this.getSpaceClass()\">\n        @for (element of this.menu.elements; track element) {\n          @let visible = element.visible$ | async;\n          @if (visible) {\n            <div class=\"element\">\n              <ng-template\n                [ngTemplateOutlet]=\"template\"\n                [ngTemplateOutletContext]=\"{\n                  element: element,\n                }\"\n              >\n              </ng-template>\n            </div>\n          }\n        }\n      </div>\n    }\n  </div>\n</div>\n\n<ng-template #template let-element=\"element\">\n  <ta-notification-badge-container class=\"c-pointer flex-full\">\n    @if (element.callback || element.disabled) {\n      <div\n        (click)=\"this.callback(element)\"\n        class=\"item-container flex-full\"\n        [ngClass]=\"{ active: this.isActive(element), disabled: element.disabled }\"\n      >\n        <ng-template\n          [ngTemplateOutlet]=\"Item\"\n          [ngTemplateOutletContext]=\"{\n            item: element,\n          }\"\n        >\n        </ng-template>\n      </div>\n    } @else {\n      <div\n        class=\"item-container flex-full\"\n        routerLinkActive=\"active\"\n        [routerLinkActiveOptions]=\"{ exact: element.exact }\"\n        [routerLink]=\"[this.getLink(element)]\"\n        [queryParamsHandling]=\"element.queryParamsHandling\"\n      >\n        <ng-template\n          [ngTemplateOutlet]=\"Item\"\n          [ngTemplateOutletContext]=\"{\n            item: element,\n          }\"\n        >\n        </ng-template>\n      </div>\n    }\n    @if (element.options?.notificationBadge?.label) {\n      <ta-notification-badge\n        [number]=\"element.options?.notificationBadge?.label || 0\"\n        [style]=\"element.options?.notificationBadge?.style\"\n        fontSize=\"xs\"\n      ></ta-notification-badge>\n    }\n  </ta-notification-badge-container>\n</ng-template>\n\n<ng-template #Item let-item=\"item\" [typedTemplate]=\"this.typeItem\">\n  <div class=\"item flex-full\" [class.disabled]=\"item.disabled\">\n    @if (this.hasFontIcon(item)) {\n      <div class=\"icon\">\n        <ta-font-icon [name]=\"this.getFontIcon(item)\"></ta-font-icon>\n      </div>\n    }\n    @if (item.label) {\n      <div class=\"label\">\n        {{ item.label | translate }}\n      </div>\n    }\n    @if (item.translationData?.length) {\n      <div class=\"bullet\">({{ item.translationData?.length }})</div>\n    }\n  </div>\n</ng-template>\n", styles: [".element-list{gap:var(--ta-space-md);display:flex;flex-direction:row}.element-list .item-container{cursor:pointer}.element-list .item-container.disabled{cursor:not-allowed}.element-list.vertical{display:flex;flex-direction:column}.tags .item-container .item{flex-direction:row;display:flex;align-items:center;gap:var(--ta-space-xs);padding:var(--ta-space-md);border:1px solid transparent;color:var(--ta-text-tertiary);background-color:var(--ta-surface-tertiary);border-color:var(--ta-surface-tertiary);border-radius:var(--ta-radius-rounded);font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.tags .item-container.disabled .item{background-color:var(--ta-surface-primary);border-color:var(--ta-border-disabled)}.tags .item-container.active .item{color:var(--ta-text-brand-primary);background-color:var(--ta-surface-default);border-color:var(--ta-surface-default)}.tab .list{border-bottom:1px solid var(--ta-border-secondary)}.tab .item-container .item{flex-direction:row;display:flex;align-items:center;gap:var(--ta-space-xs);padding:var(--ta-space-md);border-bottom:2px solid transparent;color:var(--ta-text-tertiary);font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}.tab .item-container.disabled{opacity:.5}.tab .item-container.active .item{color:var(--ta-text-brand-primary);border-bottom-color:var(--ta-border-brand)}.submenu{padding:var(--ta-space-xs);background-color:var(--ta-surface-default);border-radius:var(--ta-radius-rounded)}.submenu .element-list{gap:var(--ta-space-xs);display:flex;flex-direction:row;justify-content:space-between}.submenu .element-list .element{display:flex;flex:1 1 auto}.submenu .item-container .item{flex-direction:row;align-items:center;display:flex;justify-content:center;margin:auto;padding:var(--ta-space-sm);border-radius:var(--ta-radius-rounded);color:var(--ta-text-secondary);font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-default-weight)}.submenu .item-container.disabled{opacity:.5}.submenu .item-container.active .item{background-color:var(--ta-surface-primary);color:var(--ta-text-brand-primary);font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-bold-weight)}.submenu .item-container:hover .item{color:var(--ta-text-brand-primary);font-size:var(--ta-font-body-md-default-size);line-height:var(--ta-font-body-md-default-line);font-weight:var(--ta-font-body-md-bold-weight)}:host ::ng-deep .swiper-container{gap:var(--ta-space-sm)!important}:host ::ng-deep ta-font-icon{margin-top:-6px;display:block}:host ::ng-deep ta-font-icon i{height:18px!important;font-size:18px!important}\n"] }]
        }], ctorParameters: () => [], propDecorators: { menu: [{
                type: Input
            }], container: [{
                type: Input
            }], swiper: [{
                type: Input
            }], options: [{
                type: Input
            }], manuallyChanged$: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF2aWdhdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9uYXZpZ2F0aW9uL25hdmlnYXRpb24uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN2RSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFL0MsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBR3RELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUU5QyxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsbUNBQW1DLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDL0csT0FBTyxFQUFFLG1CQUFtQixFQUFFLHNCQUFzQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRXhFLE9BQU8sRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFJdEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7Ozs7QUFvQjlELE1BQU0sT0FBTyxtQkFBb0IsU0FBUSxtQkFBbUI7SUF3QjFEO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFqQlYsV0FBTSxHQUFHLEtBQUssQ0FBQztRQUdmLFlBQU8sR0FFSCxFQUFFLENBQUM7UUFLRSxnQkFBVyxHQUFHLFdBQVcsQ0FBQztRQUMxQixnQkFBVyxHQUFHLFdBQVcsQ0FBQztRQUc1QixjQUFTLEdBQVcsRUFBRSxDQUFD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eW5jUGlwZSwgTmdDbGFzcywgTmdUZW1wbGF0ZU91dGxldCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbmltcG9ydCB7IFRyYW5zbGF0ZU1vZHVsZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBGb250SWNvbkNvbXBvbmVudCB9IGZyb20gJ0B0YS9pY29ucyc7XG5pbXBvcnQgeyBUYVNpemVzIH0gZnJvbSAnQHRhL3N0eWxlcyc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25CYWRnZUNvbXBvbmVudCwgTm90aWZpY2F0aW9uQmFkZ2VDb250YWluZXJDb21wb25lbnQsIFN3aXBlckxpZ2h0Q29tcG9uZW50IH0gZnJvbSAnQHRhL3VpJztcbmltcG9ydCB7IFRhQWJzdHJhY3RDb21wb25lbnQsIFR5cGVkVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICdAdGEvdXRpbHMnO1xuXG5pbXBvcnQgeyBnZXRGb250SWNvbiwgaGFzRm9udEljb24gfSBmcm9tICcuLi8uLi9oZWxwZXJzL2ljb24tbWFuYWdlcic7XG5pbXBvcnQgeyBNZW51QWN0aW9uIH0gZnJvbSAnLi4vLi4vbW9kZWxzL21lbnUvaXRlbS9hY3Rpb24nO1xuaW1wb3J0IHsgTWVudUJhc2UgfSBmcm9tICcuLi8uLi9tb2RlbHMvbWVudS9pdGVtL2Jhc2UnO1xuaW1wb3J0IHsgTWVudSwgTWVudUljb24gfSBmcm9tICcuLi8uLi9tb2RlbHMvcHVibGljLWFwaSc7XG5pbXBvcnQgeyBUYVRyYW5zbGF0aW9uTWVudSB9IGZyb20gJy4uLy4uL3RyYW5zbGF0aW9uLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0YS1tZW51LW5hdmlnYXRpb24nLFxuICB0ZW1wbGF0ZVVybDogJy4vbmF2aWdhdGlvbi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL25hdmlnYXRpb24uY29tcG9uZW50LnNjc3MnXSxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW1xuICAgIE5nQ2xhc3MsXG4gICAgTmdUZW1wbGF0ZU91dGxldCxcbiAgICBSb3V0ZXJNb2R1bGUsXG4gICAgVHJhbnNsYXRlTW9kdWxlLFxuICAgIEZvbnRJY29uQ29tcG9uZW50LFxuICAgIE5vdGlmaWNhdGlvbkJhZGdlQ29tcG9uZW50LFxuICAgIE5vdGlmaWNhdGlvbkJhZGdlQ29udGFpbmVyQ29tcG9uZW50LFxuICAgIFN3aXBlckxpZ2h0Q29tcG9uZW50LFxuICAgIFR5cGVkVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgQXN5bmNQaXBlLFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBOYXZpZ2F0aW9uQ29tcG9uZW50IGV4dGVuZHMgVGFBYnN0cmFjdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpXG4gIG1lbnUhOiBNZW51O1xuXG4gIEBJbnB1dCgpXG4gIGNvbnRhaW5lciE6ICd0YWdzJyB8ICd0YWInIHwgJ3N1Ym1lbnUnO1xuXG4gIEBJbnB1dCgpXG4gIHN3aXBlciA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpXG4gIG9wdGlvbnM6IHtcbiAgICBzcGFjZUVsZW1lbnQ/OiBUYVNpemVzIHwgbnVsbDtcbiAgfSA9IHt9O1xuXG4gIEBJbnB1dCgpXG4gIG1hbnVhbGx5Q2hhbmdlZCQ/OiBPYnNlcnZhYmxlPHN0cmluZz47XG5cbiAgcmVhZG9ubHkgaGFzRm9udEljb24gPSBoYXNGb250SWNvbjtcbiAgcmVhZG9ubHkgZ2V0Rm9udEljb24gPSBnZXRGb250SWNvbjtcblxuICBwdWJsaWMgcmVhZG9ubHkgdHlwZUl0ZW0hOiB7IGl0ZW06IE1lbnVCYXNlIHwgTWVudUFjdGlvbiB8IE1lbnVJY29uIH07XG4gIHB1YmxpYyBhY3RpdmVLZXk6IHN0cmluZyA9ICcnO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgVGFUcmFuc2xhdGlvbk1lbnUuZ2V0SW5zdGFuY2UoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGNvbnN0IGRlZmF1bHRPcGVuID0gdGhpcy5tZW51LmVsZW1lbnRzLmZpbmQoZSA9PiBlLmRlZmF1bHRPcGVuKTtcblxuICAgIGlmICghZGVmYXVsdE9wZW4gfHwgIWRlZmF1bHRPcGVuLmNhbGxiYWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY2FsbGJhY2soZGVmYXVsdE9wZW4pO1xuXG4gICAgaWYgKHRoaXMubWFudWFsbHlDaGFuZ2VkJCkge1xuICAgICAgdGhpcy5fcmVnaXN0ZXJTdWJzY3JpcHRpb24oXG4gICAgICAgIHRoaXMubWFudWFsbHlDaGFuZ2VkJC5zdWJzY3JpYmUoe1xuICAgICAgICAgIG5leHQ6IChrZXk6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZm91bmQgPSB0aGlzLm1lbnUuZWxlbWVudHMuZmluZChlbGVtZW50ID0+IGVsZW1lbnQua2V5ID09PSBrZXkpO1xuICAgICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soZm91bmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRTcGFjZUNsYXNzKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuc3BhY2VFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBgZy1zcGFjZS0ke3RoaXMub3B0aW9ucy5zcGFjZUVsZW1lbnQgPz8gJ2xnJ31gO1xuICB9XG4gIHB1YmxpYyBnZXRMaW5rKGl0ZW06IE1lbnVJY29uIHwgTWVudUFjdGlvbiB8IE1lbnVCYXNlKSB7XG4gICAgaWYgKGl0ZW0ubGluayAmJiBpdGVtLmxpbmsgIT09ICcnKSB7XG4gICAgICByZXR1cm4gaXRlbS5saW5rO1xuICAgIH1cblxuICAgIHJldHVybiAnJzsgLy8gVE9ETyB0aGlzLl9uYXZpZ2F0aW9uU2VydmljZS5jdXJyZW50UGFnZVVybDtcbiAgfVxuXG4gIHB1YmxpYyBjYWxsYmFjayhpdGVtOiBNZW51QmFzZSkge1xuICAgIGlmIChpdGVtLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYWN0aXZlS2V5ID0gaXRlbS5rZXk7XG4gICAgaWYgKGl0ZW0uY2FsbGJhY2spIHtcbiAgICAgIGl0ZW0uY2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaXNBY3RpdmUoaXRlbTogTWVudUJhc2UpIHtcbiAgICByZXR1cm4gaXRlbS5rZXkgPT09IHRoaXMuYWN0aXZlS2V5O1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwibmF2aWdhdGlvbi1jb250YWluZXJcIiBbY2xhc3NdPVwidGhpcy5jb250YWluZXJcIj5cbiAgPGRpdiBjbGFzcz1cImxpc3RcIj5cbiAgICBAaWYgKHRoaXMuc3dpcGVyKSB7XG4gICAgICA8dGEtc3dpcGVyLWxpZ2h0XG4gICAgICAgIFtpdGVtc109XCJ0aGlzLm1lbnUuZWxlbWVudHNcIlxuICAgICAgICBbdGVtcGxhdGVdPVwidGVtcGxhdGVcIlxuICAgICAgICBbZm9yY2VkXT1cInRydWVcIlxuICAgICAgICBbc3dpcGVyQ2xhc3Nlc109XCJ0aGlzLmdldFNwYWNlQ2xhc3MoKVwiXG4gICAgICA+PC90YS1zd2lwZXItbGlnaHQ+XG4gICAgfSBAZWxzZSB7XG4gICAgICA8ZGl2IGNsYXNzPVwiZWxlbWVudC1saXN0XCIgW25nQ2xhc3NdPVwidGhpcy5tZW51LmRpcmVjdGlvbiArICcgJyArIHRoaXMuZ2V0U3BhY2VDbGFzcygpXCI+XG4gICAgICAgIEBmb3IgKGVsZW1lbnQgb2YgdGhpcy5tZW51LmVsZW1lbnRzOyB0cmFjayBlbGVtZW50KSB7XG4gICAgICAgICAgQGxldCB2aXNpYmxlID0gZWxlbWVudC52aXNpYmxlJCB8IGFzeW5jO1xuICAgICAgICAgIEBpZiAodmlzaWJsZSkge1xuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVsZW1lbnRcIj5cbiAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwidGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7XG4gICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIH1cbiAgPC9kaXY+XG48L2Rpdj5cblxuPG5nLXRlbXBsYXRlICN0ZW1wbGF0ZSBsZXQtZWxlbWVudD1cImVsZW1lbnRcIj5cbiAgPHRhLW5vdGlmaWNhdGlvbi1iYWRnZS1jb250YWluZXIgY2xhc3M9XCJjLXBvaW50ZXIgZmxleC1mdWxsXCI+XG4gICAgQGlmIChlbGVtZW50LmNhbGxiYWNrIHx8IGVsZW1lbnQuZGlzYWJsZWQpIHtcbiAgICAgIDxkaXZcbiAgICAgICAgKGNsaWNrKT1cInRoaXMuY2FsbGJhY2soZWxlbWVudClcIlxuICAgICAgICBjbGFzcz1cIml0ZW0tY29udGFpbmVyIGZsZXgtZnVsbFwiXG4gICAgICAgIFtuZ0NsYXNzXT1cInsgYWN0aXZlOiB0aGlzLmlzQWN0aXZlKGVsZW1lbnQpLCBkaXNhYmxlZDogZWxlbWVudC5kaXNhYmxlZCB9XCJcbiAgICAgID5cbiAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiSXRlbVwiXG4gICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cIntcbiAgICAgICAgICAgIGl0ZW06IGVsZW1lbnQsXG4gICAgICAgICAgfVwiXG4gICAgICAgID5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgIDwvZGl2PlxuICAgIH0gQGVsc2Uge1xuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cIml0ZW0tY29udGFpbmVyIGZsZXgtZnVsbFwiXG4gICAgICAgIHJvdXRlckxpbmtBY3RpdmU9XCJhY3RpdmVcIlxuICAgICAgICBbcm91dGVyTGlua0FjdGl2ZU9wdGlvbnNdPVwieyBleGFjdDogZWxlbWVudC5leGFjdCB9XCJcbiAgICAgICAgW3JvdXRlckxpbmtdPVwiW3RoaXMuZ2V0TGluayhlbGVtZW50KV1cIlxuICAgICAgICBbcXVlcnlQYXJhbXNIYW5kbGluZ109XCJlbGVtZW50LnF1ZXJ5UGFyYW1zSGFuZGxpbmdcIlxuICAgICAgPlxuICAgICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJJdGVtXCJcbiAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwie1xuICAgICAgICAgICAgaXRlbTogZWxlbWVudCxcbiAgICAgICAgICB9XCJcbiAgICAgICAgPlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgPC9kaXY+XG4gICAgfVxuICAgIEBpZiAoZWxlbWVudC5vcHRpb25zPy5ub3RpZmljYXRpb25CYWRnZT8ubGFiZWwpIHtcbiAgICAgIDx0YS1ub3RpZmljYXRpb24tYmFkZ2VcbiAgICAgICAgW251bWJlcl09XCJlbGVtZW50Lm9wdGlvbnM/Lm5vdGlmaWNhdGlvbkJhZGdlPy5sYWJlbCB8fCAwXCJcbiAgICAgICAgW3N0eWxlXT1cImVsZW1lbnQub3B0aW9ucz8ubm90aWZpY2F0aW9uQmFkZ2U/LnN0eWxlXCJcbiAgICAgICAgZm9udFNpemU9XCJ4c1wiXG4gICAgICA+PC90YS1ub3RpZmljYXRpb24tYmFkZ2U+XG4gICAgfVxuICA8L3RhLW5vdGlmaWNhdGlvbi1iYWRnZS1jb250YWluZXI+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgI0l0ZW0gbGV0LWl0ZW09XCJpdGVtXCIgW3R5cGVkVGVtcGxhdGVdPVwidGhpcy50eXBlSXRlbVwiPlxuICA8ZGl2IGNsYXNzPVwiaXRlbSBmbGV4LWZ1bGxcIiBbY2xhc3MuZGlzYWJsZWRdPVwiaXRlbS5kaXNhYmxlZFwiPlxuICAgIEBpZiAodGhpcy5oYXNGb250SWNvbihpdGVtKSkge1xuICAgICAgPGRpdiBjbGFzcz1cImljb25cIj5cbiAgICAgICAgPHRhLWZvbnQtaWNvbiBbbmFtZV09XCJ0aGlzLmdldEZvbnRJY29uKGl0ZW0pXCI+PC90YS1mb250LWljb24+XG4gICAgICA8L2Rpdj5cbiAgICB9XG4gICAgQGlmIChpdGVtLmxhYmVsKSB7XG4gICAgICA8ZGl2IGNsYXNzPVwibGFiZWxcIj5cbiAgICAgICAge3sgaXRlbS5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxuICAgICAgPC9kaXY+XG4gICAgfVxuICAgIEBpZiAoaXRlbS50cmFuc2xhdGlvbkRhdGE/Lmxlbmd0aCkge1xuICAgICAgPGRpdiBjbGFzcz1cImJ1bGxldFwiPih7eyBpdGVtLnRyYW5zbGF0aW9uRGF0YT8ubGVuZ3RoIH19KTwvZGl2PlxuICAgIH1cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuIl19