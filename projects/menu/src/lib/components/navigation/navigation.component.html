<div class="navigation-container" [class]="this.container">
  <div class="list">
    @if (this.swiper) {
      <ta-swiper-light
        [items]="this.menu.elements"
        [template]="template"
        [forced]="true"
        [swiperClasses]="this.getSpaceClass()"
      ></ta-swiper-light>
    } @else {
      <div class="element-list" [ngClass]="this.menu.direction + ' ' + this.getSpaceClass()">
        @for (element of this.menu.elements; track element) {
          @let visible = element.visible$ | async;
          @if (visible) {
            <div class="element">
              <ng-template
                [ngTemplateOutlet]="template"
                [ngTemplateOutletContext]="{
                  element: element,
                }"
              >
              </ng-template>
            </div>
          }
        }
      </div>
    }
  </div>
</div>

<ng-template #template let-element="element">
  <ta-notification-badge-container class="c-pointer flex-full">
    @if (element.callback || element.disabled) {
      <div
        (click)="this.callback(element)"
        class="item-container flex-full"
        [ngClass]="{ active: this.isActive(element), disabled: element.disabled }"
      >
        <ng-template
          [ngTemplateOutlet]="Item"
          [ngTemplateOutletContext]="{
            item: element,
          }"
        >
        </ng-template>
      </div>
    } @else {
      <div
        class="item-container flex-full"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: element.exact }"
        [routerLink]="[this.getLink(element)]"
        [queryParamsHandling]="element.queryParamsHandling"
      >
        <ng-template
          [ngTemplateOutlet]="Item"
          [ngTemplateOutletContext]="{
            item: element,
          }"
        >
        </ng-template>
      </div>
    }
    @if (element.options?.notificationBadge?.label) {
      <ta-notification-badge
        [number]="element.options?.notificationBadge?.label || 0"
        [style]="element.options?.notificationBadge?.style"
        fontSize="xs"
      ></ta-notification-badge>
    }
  </ta-notification-badge-container>
</ng-template>

<ng-template #Item let-item="item" [typedTemplate]="this.typeItem">
  <div class="item flex-full" [class.disabled]="item.disabled">
    @if (this.hasFontIcon(item)) {
      <div class="icon">
        <ta-font-icon [name]="this.getFontIcon(item)"></ta-font-icon>
      </div>
    }
    @if (item.label) {
      <div class="label">
        {{ item.label | translate }}
      </div>
    }
    @if (item.translationData?.length) {
      <div class="bullet">({{ item.translationData?.length }})</div>
    }
  </div>
</ng-template>
