<div class="placeholder-container">
  <ng-template
    [ngTemplateOutlet]="Item"
    [ngTemplateOutletContext]="{ placeholder: this.placeholder }"
  ></ng-template>
</div>

<ng-template #Item let-placeholderItem="placeholder">
  @for (index of this.getFakeArray(placeholderItem.repeat); track index) {
    @switch (placeholderItem.type) {
      @case ('container') {
        <ng-template
          [ngTemplateOutlet]="Children"
          [ngTemplateOutletContext]="{
            children: placeholderItem.children
          }"
        ></ng-template>
      }
      @case ('row') {
        <div
          class="ph-row"
          [ngClass]="this.getAttributesClass(placeholderItem.attributes)"
        >
          <ng-template
            [ngTemplateOutlet]="Children"
            [ngTemplateOutletContext]="{
              children: placeholderItem.children
            }"
          ></ng-template>
        </div>
      }
      @case ('item') {
        <div
          class="ph-item"
          [ngClass]="this.getAttributesClass(placeholderItem.attributes)"
        >
          <ng-template
            [ngTemplateOutlet]="Children"
            [ngTemplateOutletContext]="{
              children: placeholderItem.children
            }"
          ></ng-template>
        </div>
      }
      @case ('col') {
        <div
          [ngClass]="
            this.getColClass(placeholderItem.gridSize) +
            ' ' +
            this.getAttributesClass(placeholderItem.attributes)
          "
        >
          <ng-template
            [ngTemplateOutlet]="Children"
            [ngTemplateOutletContext]="{
              children: placeholderItem.children
            }"
          ></ng-template>
        </div>
      }
      @case ('picture') {
        <div
          class="ph-picture"
          [ngClass]="this.getColClass(placeholderItem.gridSize)"
        ></div>
      }
      @case ('avatar') {
        <div
          class="ph-avatar"
          [ngClass]="this.getColClass(placeholderItem.gridSize)"
        ></div>
      }
      @default {
        <ng-template
          [ngTemplateOutlet]="Children"
          [ngTemplateOutletContext]="{
            children: placeholderItem.children
          }"
        ></ng-template>
      }
    }
  }
</ng-template>

<ng-template #Children let-children="children">
  @for (child of children; track child) {
    <ng-template
      [ngTemplateOutlet]="Item"
      [ngTemplateOutletContext]="{ placeholder: child }"
    ></ng-template>
  }
</ng-template>
