<div class="mobile-control full-width" *ngIf="this.breakpoints.isTablette$ | async">
  <div class="space-between">
    <ta-button (action)="this.toggle('center')" type="secondary" [options]="{ circular: 'small' }">
      <ta-font-icon name="mail" size="sm"></ta-font-icon>
    </ta-button>
    <ta-button (action)="this.toggle('right')" type="secondary" [options]="{ circular: 'small' }">
      <ta-font-icon name="task-todo" size="sm"></ta-font-icon>
    </ta-button>
  </div>
</div>
<div class="flex-container">
  <div class="main">
    <div class="left">
      <div class="control" *ngIf="this.allowClose">
        <ng-container *ngIf="this.has('left')">
          <ng-content select="[header-left]"></ng-content>
        </ng-container>
        <ta-button
          (action)="this.toggle('left')"
          [style]="'secondary'"
          [options]="{ circular: 'small' }"
          [state]="this.state('left')"
        >
          <ng-container *ngIf="this.has('left')">
            <ta-font-icon name="expand-horizontal" size="sm"></ta-font-icon>
          </ng-container>
          <ng-container *ngIf="!this.has('left')">
            <ta-font-icon name="collapse-horizontal" size="sm"></ta-font-icon>
          </ng-container>
        </ta-button>
      </div>

      <ng-container *ngIf="this.has('left')">
        <div class="content">
          <ng-template [ngTemplateOutlet]="leftTemplate"></ng-template>
        </div>
      </ng-container>
    </div>

    <div class="center">
      <div class="control" *ngIf="this.allowClose">
        <ng-container *ngIf="this.has('center')">
          <ng-content select="[header-center]"></ng-content>
        </ng-container>
        <ta-button
          (action)="this.toggle('center')"
          [style]="'secondary'"
          [options]="{ circular: 'small' }"
          [state]="this.state('center')"
        >
          <ng-container *ngIf="this.has('center')">
            <ta-font-icon name="expand-horizontal" size="sm"></ta-font-icon>
          </ng-container>
          <ng-container *ngIf="!this.has('center')">
            <ta-font-icon name="collapse-horizontal" size="sm"></ta-font-icon>
          </ng-container>
        </ta-button>
      </div>
      <ng-container *ngIf="this.has('center') && !(this.breakpoints.isTablette$ | async)">
        <div class="content">
          <ng-template [ngTemplateOutlet]="centerTemplate"></ng-template>
        </div>
      </ng-container>
    </div>
  </div>

  <div class="second" *ngIf="!(this.breakpoints.isTablette$ | async)">
    <div class="right">
      <div class="control" *ngIf="this.allowClose">
        <ng-container *ngIf="this.has('right')">
          <ng-content select="[header-right]"></ng-content>
        </ng-container>
        <ta-button
          (action)="this.toggle('right')"
          [style]="'secondary'"
          [options]="{ circular: 'small' }"
          [state]="this.state('right')"
        >
          <ng-container *ngIf="this.has('right')">
            <ta-font-icon name="expand-horizontal" size="sm"></ta-font-icon>
          </ng-container>
          <ng-container *ngIf="!this.has('right')">
            <ta-font-icon name="collapse-horizontal" size="sm"></ta-font-icon>
          </ng-container>
        </ta-button>
      </div>
      <ng-container *ngIf="this.has('right')">
        <div class="content">
          <ng-template [ngTemplateOutlet]="rightTemplate"></ng-template>
        </div>
      </ng-container>
    </div>
  </div>
</div>

<ng-container *ngIf="this.breakpoints.isTablette$ | async">
  <ta-layout-full-panel (closeEvent)="this.toggle('center')" *ngIf="this.has('center')" width="100%">
    <ng-template [ngTemplateOutlet]="centerTemplate"></ng-template>
  </ta-layout-full-panel>

  <ta-layout-full-panel (closeEvent)="this.toggle('right')" *ngIf="this.has('right')">
    <div class="full-width">
      <ng-template [ngTemplateOutlet]="rightTemplate"></ng-template>
    </div>
  </ta-layout-full-panel>
</ng-container>

<ng-template #leftTemplate>
  <ng-content select="[left]"></ng-content>
</ng-template>

<ng-template #centerTemplate>
  <ng-content select="[center]"></ng-content>
</ng-template>

<ng-template #rightTemplate>
  <ng-content select="[right]"></ng-content>
</ng-template>
