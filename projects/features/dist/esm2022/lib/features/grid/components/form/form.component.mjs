import { Component, inject, signal } from '@angular/core';
import { FormComponent } from '@ta/form-basic';
import { TranslatePipe } from '@ta/translation';
import { TitleComponent } from '@ta/ui';
import { TaGridFormService } from '../../services/grid-form.services';
import { TaAbstractGridComponent } from '../abstract.component';
import * as i0 from "@angular/core";
export class TaGridFormComponent extends TaAbstractGridComponent {
    constructor() {
        super(...arguments);
        this.filtersForm = signal([]);
        this.groupForm = signal([]);
        this._formService = inject((TaGridFormService));
    }
    ngOnInit() {
        super.ngOnInit();
        this._registerSubscription(this.isReady$.subscribe({
            next: () => {
                this.filtersForm.set(this._formService.getFiltersForm(this._grid));
                this.groupForm.set(this._formService.getGroupForm(this._grid));
            },
        }));
    }
    applyFilters(data) {
        const filters = this._formService.formatFiltersForm(this._grid, data);
        this._grid.filters?.apply(filters);
    }
    applyGroup(data) {
        const group = this._formService.formatGroupForm(data);
        if (!group) {
            this._grid.clearGroupBy();
            return;
        }
        this._grid.setGroupBy(group);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: TaGridFormComponent, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.14", type: TaGridFormComponent, isStandalone: true, selector: "ta-grid-form", usesInheritance: true, ngImport: i0, template: "<div>\r\n  <ta-title [level]=\"2\">{{ 'grid.' + this.grid.scope + '.title' | translate }}</ta-title>\r\n</div>\r\n\r\n<div class=\"space-between\">\r\n  <div>\r\n    <ta-form\r\n      [inputs]=\"this.filtersForm()\"\r\n      (valid)=\"this.applyFilters($event)\"\r\n      [askOnDestroy]=\"true\"\r\n      [canDisplayButton]=\"false\"\r\n    ></ta-form>\r\n  </div>\r\n  <div>\r\n    <ta-form\r\n      [inputs]=\"this.groupForm()\"\r\n      (valid)=\"this.applyGroup($event)\"\r\n      [askOnDestroy]=\"true\"\r\n      [canDisplayButton]=\"false\"\r\n    ></ta-form>\r\n  </div>\r\n</div>\r\n", styles: [""], dependencies: [{ kind: "component", type: FormComponent, selector: "ta-form", inputs: ["inputs", "askValidation$", "askOnDestroy", "loader", "error", "border", "canDisplayButton", "buttonTitle", "onLive"], outputs: ["valid", "isFormValid"] }, { kind: "component", type: TitleComponent, selector: "ta-title", inputs: ["level", "isTheme", "isBold", "icon"] }, { kind: "pipe", type: TranslatePipe, name: "translate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: TaGridFormComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-grid-form', standalone: true, imports: [FormComponent, TitleComponent, TranslatePipe], template: "<div>\r\n  <ta-title [level]=\"2\">{{ 'grid.' + this.grid.scope + '.title' | translate }}</ta-title>\r\n</div>\r\n\r\n<div class=\"space-between\">\r\n  <div>\r\n    <ta-form\r\n      [inputs]=\"this.filtersForm()\"\r\n      (valid)=\"this.applyFilters($event)\"\r\n      [askOnDestroy]=\"true\"\r\n      [canDisplayButton]=\"false\"\r\n    ></ta-form>\r\n  </div>\r\n  <div>\r\n    <ta-form\r\n      [inputs]=\"this.groupForm()\"\r\n      (valid)=\"this.applyGroup($event)\"\r\n      [askOnDestroy]=\"true\"\r\n      [canDisplayButton]=\"false\"\r\n    ></ta-form>\r\n  </div>\r\n</div>\r\n" }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvbGliL2ZlYXR1cmVzL2dyaWQvY29tcG9uZW50cy9mb3JtL2Zvcm0uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9mZWF0dXJlcy9ncmlkL2NvbXBvbmVudHMvZm9ybS9mb3JtLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUxRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFL0MsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFFeEMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDdEUsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sdUJBQXVCLENBQUM7O0FBU2hFLE1BQU0sT0FBTyxtQkFBb0IsU0FBUSx1QkFBZ0M7SUFQekU7O1FBUVMsZ0JBQVcsR0FBRyxNQUFNLENBQW1CLEVBQUUsQ0FBQyxDQUFDO1FBQzNDLGNBQVMsR0FBRyxNQUFNLENBQW1CLEVBQUUsQ0FBQyxDQUFDO1FBRXhDLGlCQUFZLEdBQUcsTUFBTSxDQUFDLENBQUEsaUJBQTBCLENBQUEsQ0FBQyxDQUFDO0tBNkIzRDtJQTNCaUIsUUFBUTtRQUN0QixLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFakIsSUFBSSxDQUFDLHFCQUFxQixDQUN4QixJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQztZQUN0QixJQUFJLEVBQUUsR0FBRyxFQUFFO2dCQUNULElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNuRSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNqRSxDQUFDO1NBQ0YsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDO0lBRU0sWUFBWSxDQUFDLElBQVM7UUFDM0IsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRXRFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBQ00sVUFBVSxDQUFDLElBQVM7UUFDekIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFdEQsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ1gsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUMxQixPQUFPO1FBQ1QsQ0FBQztRQUNELElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLENBQUM7K0dBaENVLG1CQUFtQjttR0FBbkIsbUJBQW1CLCtGQ2pCaEMsaWxCQXNCQSwwRERUWSxhQUFhLHVOQUFFLGNBQWMsZ0dBQUUsYUFBYTs7NEZBSTNDLG1CQUFtQjtrQkFQL0IsU0FBUzsrQkFDRSxjQUFjLGNBQ1osSUFBSSxXQUNQLENBQUMsYUFBYSxFQUFFLGNBQWMsRUFBRSxhQUFhLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIGluamVjdCwgc2lnbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBGb3JtQ29tcG9uZW50IH0gZnJvbSAnQHRhL2Zvcm0tYmFzaWMnO1xyXG5pbXBvcnQgeyBJbnB1dEJhc2UgfSBmcm9tICdAdGEvZm9ybS1tb2RlbCc7XHJcbmltcG9ydCB7IFRyYW5zbGF0ZVBpcGUgfSBmcm9tICdAdGEvdHJhbnNsYXRpb24nO1xyXG5pbXBvcnQgeyBUaXRsZUNvbXBvbmVudCB9IGZyb20gJ0B0YS91aSc7XHJcblxyXG5pbXBvcnQgeyBUYUdyaWRGb3JtU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2dyaWQtZm9ybS5zZXJ2aWNlcyc7XHJcbmltcG9ydCB7IFRhQWJzdHJhY3RHcmlkQ29tcG9uZW50IH0gZnJvbSAnLi4vYWJzdHJhY3QuY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndGEtZ3JpZC1mb3JtJyxcclxuICBzdGFuZGFsb25lOiB0cnVlLFxyXG4gIGltcG9ydHM6IFtGb3JtQ29tcG9uZW50LCBUaXRsZUNvbXBvbmVudCwgVHJhbnNsYXRlUGlwZV0sXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2Zvcm0uY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsOiAnLi9mb3JtLmNvbXBvbmVudC5zY3NzJyxcclxufSlcclxuZXhwb3J0IGNsYXNzIFRhR3JpZEZvcm1Db21wb25lbnQgZXh0ZW5kcyBUYUFic3RyYWN0R3JpZENvbXBvbmVudDx1bmtub3duPiB7XHJcbiAgcHVibGljIGZpbHRlcnNGb3JtID0gc2lnbmFsPElucHV0QmFzZTxhbnk+W10+KFtdKTtcclxuICBwdWJsaWMgZ3JvdXBGb3JtID0gc2lnbmFsPElucHV0QmFzZTxhbnk+W10+KFtdKTtcclxuXHJcbiAgcHJpdmF0ZSBfZm9ybVNlcnZpY2UgPSBpbmplY3QoVGFHcmlkRm9ybVNlcnZpY2U8dW5rbm93bj4pO1xyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgbmdPbkluaXQoKSB7XHJcbiAgICBzdXBlci5uZ09uSW5pdCgpO1xyXG5cclxuICAgIHRoaXMuX3JlZ2lzdGVyU3Vic2NyaXB0aW9uKFxyXG4gICAgICB0aGlzLmlzUmVhZHkkLnN1YnNjcmliZSh7XHJcbiAgICAgICAgbmV4dDogKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5maWx0ZXJzRm9ybS5zZXQodGhpcy5fZm9ybVNlcnZpY2UuZ2V0RmlsdGVyc0Zvcm0odGhpcy5fZ3JpZCkpO1xyXG4gICAgICAgICAgdGhpcy5ncm91cEZvcm0uc2V0KHRoaXMuX2Zvcm1TZXJ2aWNlLmdldEdyb3VwRm9ybSh0aGlzLl9ncmlkKSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXBwbHlGaWx0ZXJzKGRhdGE6IGFueSkge1xyXG4gICAgY29uc3QgZmlsdGVycyA9IHRoaXMuX2Zvcm1TZXJ2aWNlLmZvcm1hdEZpbHRlcnNGb3JtKHRoaXMuX2dyaWQsIGRhdGEpO1xyXG5cclxuICAgIHRoaXMuX2dyaWQuZmlsdGVycz8uYXBwbHkoZmlsdGVycyk7XHJcbiAgfVxyXG4gIHB1YmxpYyBhcHBseUdyb3VwKGRhdGE6IGFueSkge1xyXG4gICAgY29uc3QgZ3JvdXAgPSB0aGlzLl9mb3JtU2VydmljZS5mb3JtYXRHcm91cEZvcm0oZGF0YSk7XHJcblxyXG4gICAgaWYgKCFncm91cCkge1xyXG4gICAgICB0aGlzLl9ncmlkLmNsZWFyR3JvdXBCeSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9ncmlkLnNldEdyb3VwQnkoZ3JvdXApO1xyXG4gIH1cclxufVxyXG4iLCI8ZGl2PlxyXG4gIDx0YS10aXRsZSBbbGV2ZWxdPVwiMlwiPnt7ICdncmlkLicgKyB0aGlzLmdyaWQuc2NvcGUgKyAnLnRpdGxlJyB8IHRyYW5zbGF0ZSB9fTwvdGEtdGl0bGU+XHJcbjwvZGl2PlxyXG5cclxuPGRpdiBjbGFzcz1cInNwYWNlLWJldHdlZW5cIj5cclxuICA8ZGl2PlxyXG4gICAgPHRhLWZvcm1cclxuICAgICAgW2lucHV0c109XCJ0aGlzLmZpbHRlcnNGb3JtKClcIlxyXG4gICAgICAodmFsaWQpPVwidGhpcy5hcHBseUZpbHRlcnMoJGV2ZW50KVwiXHJcbiAgICAgIFthc2tPbkRlc3Ryb3ldPVwidHJ1ZVwiXHJcbiAgICAgIFtjYW5EaXNwbGF5QnV0dG9uXT1cImZhbHNlXCJcclxuICAgID48L3RhLWZvcm0+XHJcbiAgPC9kaXY+XHJcbiAgPGRpdj5cclxuICAgIDx0YS1mb3JtXHJcbiAgICAgIFtpbnB1dHNdPVwidGhpcy5ncm91cEZvcm0oKVwiXHJcbiAgICAgICh2YWxpZCk9XCJ0aGlzLmFwcGx5R3JvdXAoJGV2ZW50KVwiXHJcbiAgICAgIFthc2tPbkRlc3Ryb3ldPVwidHJ1ZVwiXHJcbiAgICAgIFtjYW5EaXNwbGF5QnV0dG9uXT1cImZhbHNlXCJcclxuICAgID48L3RhLWZvcm0+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG4iXX0=