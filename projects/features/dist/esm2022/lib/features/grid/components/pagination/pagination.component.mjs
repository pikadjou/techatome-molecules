import { NgTemplateOutlet } from '@angular/common';
import { Component } from '@angular/core';
import { MatIcon } from '@angular/material/icon';
import { TypedTemplateDirective } from '@ta/utils';
import { TaAbstractGridComponent } from '../abstract.component';
import * as i0 from "@angular/core";
export class PaginationComponent extends TaAbstractGridComponent {
    get show() {
        return this.paginationGetTotalPages > 1;
    }
    get paginationGetTotalPages() {
        return this.grid.table?.getPageMax() || 0;
    }
    constructor() {
        super();
        this.maxPageNumber = 10;
    }
    getListPage() {
        if (!this.grid || !this.grid.table) {
            return [];
        }
        const last = this.paginationGetTotalPages;
        if (last < this.maxPageNumber) {
            return this._computedPageNumbers(2, last);
        }
        const current = this.grid.table.getPage() || 0;
        const rangeStart = Math.floor(current / 10) * 10;
        const rangeEnd = rangeStart + 10;
        return [
            ...(rangeStart <= 1 ? [] : [{ number: rangeStart - 1, icon: 'more-line' }]),
            ...this._computedPageNumbers(rangeStart > 1 ? rangeStart : 2, rangeEnd < last ? rangeEnd : last),
            ...(rangeEnd > last ? [] : [{ number: rangeEnd, icon: 'more-line' }]),
        ];
    }
    _computedPageNumbers(start, end) {
        const pageNumbers = [];
        for (let i = start; i < end; i++) {
            pageNumbers.push({ number: i });
        }
        return pageNumbers;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: PaginationComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: PaginationComponent, isStandalone: true, selector: "ta-grid-pagination", usesInheritance: true, ngImport: i0, template: "@if (this.grid && this.grid.table && this.show) {\r\n  <div class=\"flex-start g-space-sm align-center\">\r\n    <mat-icon (click)=\"this.grid.table.previousPage()\"> chevron_left </mat-icon>\r\n    <ng-template [ngTemplateOutlet]=\"item\" [ngTemplateOutletContext]=\"{ pagenumber: { number: 1 } }\"></ng-template>\r\n\r\n    @for (page of this.getListPage(); track page.number) {\r\n      <ng-template [ngTemplateOutlet]=\"item\" [ngTemplateOutletContext]=\"{ pagenumber: page }\"></ng-template>\r\n    }\r\n\r\n    @if (this.paginationGetTotalPages > 1) {\r\n      <ng-template\r\n        [ngTemplateOutlet]=\"item\"\r\n        [ngTemplateOutletContext]=\"{\r\n          pagenumber: { number: this.paginationGetTotalPages },\r\n        }\"\r\n      ></ng-template>\r\n    }\r\n\r\n    <mat-icon (click)=\"this.grid.table.nextPage()\"> chevron_right </mat-icon>\r\n  </div>\r\n}\r\n\r\n<ng-template #item let-pagenumber=\"pagenumber\" [typedTemplate]=\"this.PageNumber\">\r\n  <div\r\n    class=\"figure c-pointer\"\r\n    [class.is-active]=\"pagenumber.number === (this.grid.table?.getPage() || 0)\"\r\n    (click)=\"this.grid.table?.setPage(pagenumber.number)\"\r\n  >\r\n    @if (pagenumber.icon) {\r\n      <mat-icon type=\"sm\">{{ pagenumber.icon }}</mat-icon>\r\n    } @else {\r\n      {{ pagenumber.number }}\r\n    }\r\n  </div>\r\n</ng-template>\r\n", styles: [".figure{color:var(--ta-text-primary);border:1px solid var(--ta-border-secondary);padding:var(--ta-space-sm) var(--ta-space-md);border-radius:var(--ta-radius-rounded)}.figure.is-active{color:var(--ta-text-invert-primary);background-color:var(--ta-surface-brand-primary)}\n"], dependencies: [{ kind: "component", type: MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: TypedTemplateDirective, selector: "ng-template[typedTemplate]", inputs: ["typedTemplate"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: PaginationComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-grid-pagination', standalone: true, imports: [MatIcon, NgTemplateOutlet, TypedTemplateDirective], template: "@if (this.grid && this.grid.table && this.show) {\r\n  <div class=\"flex-start g-space-sm align-center\">\r\n    <mat-icon (click)=\"this.grid.table.previousPage()\"> chevron_left </mat-icon>\r\n    <ng-template [ngTemplateOutlet]=\"item\" [ngTemplateOutletContext]=\"{ pagenumber: { number: 1 } }\"></ng-template>\r\n\r\n    @for (page of this.getListPage(); track page.number) {\r\n      <ng-template [ngTemplateOutlet]=\"item\" [ngTemplateOutletContext]=\"{ pagenumber: page }\"></ng-template>\r\n    }\r\n\r\n    @if (this.paginationGetTotalPages > 1) {\r\n      <ng-template\r\n        [ngTemplateOutlet]=\"item\"\r\n        [ngTemplateOutletContext]=\"{\r\n          pagenumber: { number: this.paginationGetTotalPages },\r\n        }\"\r\n      ></ng-template>\r\n    }\r\n\r\n    <mat-icon (click)=\"this.grid.table.nextPage()\"> chevron_right </mat-icon>\r\n  </div>\r\n}\r\n\r\n<ng-template #item let-pagenumber=\"pagenumber\" [typedTemplate]=\"this.PageNumber\">\r\n  <div\r\n    class=\"figure c-pointer\"\r\n    [class.is-active]=\"pagenumber.number === (this.grid.table?.getPage() || 0)\"\r\n    (click)=\"this.grid.table?.setPage(pagenumber.number)\"\r\n  >\r\n    @if (pagenumber.icon) {\r\n      <mat-icon type=\"sm\">{{ pagenumber.icon }}</mat-icon>\r\n    } @else {\r\n      {{ pagenumber.number }}\r\n    }\r\n  </div>\r\n</ng-template>\r\n", styles: [".figure{color:var(--ta-text-primary);border:1px solid var(--ta-border-secondary);padding:var(--ta-space-sm) var(--ta-space-md);border-radius:var(--ta-radius-rounded)}.figure.is-active{color:var(--ta-text-invert-primary);background-color:var(--ta-surface-brand-primary)}\n"] }]
        }], ctorParameters: () => [] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvbGliL2ZlYXR1cmVzL2dyaWQvY29tcG9uZW50cy9wYWdpbmF0aW9uL3BhZ2luYXRpb24uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9mZWF0dXJlcy9ncmlkL2NvbXBvbmVudHMvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRWpELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUVuRCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQzs7QUFhaEUsTUFBTSxPQUFPLG1CQUFvQixTQUFRLHVCQUE0QjtJQUluRSxJQUFJLElBQUk7UUFDTixPQUFPLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUNELElBQUksdUJBQXVCO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFRDtRQUNFLEtBQUssRUFBRSxDQUFDO1FBVkQsa0JBQWEsR0FBRyxFQUFFLENBQUM7SUFXNUIsQ0FBQztJQUVNLFdBQVc7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ25DLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQztRQUNELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztRQUUxQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDOUIsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzVDLENBQUM7UUFFRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDL0MsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ2pELE1BQU0sUUFBUSxHQUFHLFVBQVUsR0FBRyxFQUFFLENBQUM7UUFFakMsT0FBTztZQUNMLEdBQUcsQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsVUFBVSxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUMzRSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNoRyxHQUFHLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQztTQUN0RSxDQUFDO0lBQ0osQ0FBQztJQUVPLG9CQUFvQixDQUFDLEtBQWEsRUFBRSxHQUFXO1FBQ3JELE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQztRQUN2QixLQUFLLElBQUksQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDakMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xDLENBQUM7UUFDRCxPQUFPLFdBQVcsQ0FBQztJQUNyQixDQUFDOytHQTFDVSxtQkFBbUI7bUdBQW5CLG1CQUFtQixxR0NuQmhDLGkxQ0FtQ0EseVVEbEJZLE9BQU8sMklBQUUsZ0JBQWdCLG9KQUFFLHNCQUFzQjs7NEZBRWhELG1CQUFtQjtrQkFQL0IsU0FBUzsrQkFDRSxvQkFBb0IsY0FHbEIsSUFBSSxXQUNQLENBQUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLHNCQUFzQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmdUZW1wbGF0ZU91dGxldCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNYXRJY29uIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvaWNvbic7XHJcblxyXG5pbXBvcnQgeyBUeXBlZFRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnQHRhL3V0aWxzJztcclxuXHJcbmltcG9ydCB7IFRhQWJzdHJhY3RHcmlkQ29tcG9uZW50IH0gZnJvbSAnLi4vYWJzdHJhY3QuY29tcG9uZW50JztcclxuXHJcbnR5cGUgUGFnZU51bWJlciA9IHtcclxuICBudW1iZXI6IG51bWJlcjtcclxuICBpY29uPzogc3RyaW5nO1xyXG59O1xyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3RhLWdyaWQtcGFnaW5hdGlvbicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3BhZ2luYXRpb24uY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3BhZ2luYXRpb24uY29tcG9uZW50LnNjc3MnXSxcclxuICBzdGFuZGFsb25lOiB0cnVlLFxyXG4gIGltcG9ydHM6IFtNYXRJY29uLCBOZ1RlbXBsYXRlT3V0bGV0LCBUeXBlZFRlbXBsYXRlRGlyZWN0aXZlXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIFBhZ2luYXRpb25Db21wb25lbnQgZXh0ZW5kcyBUYUFic3RyYWN0R3JpZENvbXBvbmVudDxhbnk+IHtcclxuICByZWFkb25seSBQYWdlTnVtYmVyITogeyBwYWdlbnVtYmVyOiBQYWdlTnVtYmVyIH07XHJcbiAgcmVhZG9ubHkgbWF4UGFnZU51bWJlciA9IDEwO1xyXG5cclxuICBnZXQgc2hvdygpIHtcclxuICAgIHJldHVybiB0aGlzLnBhZ2luYXRpb25HZXRUb3RhbFBhZ2VzID4gMTtcclxuICB9XHJcbiAgZ2V0IHBhZ2luYXRpb25HZXRUb3RhbFBhZ2VzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ3JpZC50YWJsZT8uZ2V0UGFnZU1heCgpIHx8IDA7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0TGlzdFBhZ2UoKSB7XHJcbiAgICBpZiAoIXRoaXMuZ3JpZCB8fCAhdGhpcy5ncmlkLnRhYmxlKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGxhc3QgPSB0aGlzLnBhZ2luYXRpb25HZXRUb3RhbFBhZ2VzO1xyXG5cclxuICAgIGlmIChsYXN0IDwgdGhpcy5tYXhQYWdlTnVtYmVyKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jb21wdXRlZFBhZ2VOdW1iZXJzKDIsIGxhc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmdyaWQudGFibGUuZ2V0UGFnZSgpIHx8IDA7XHJcbiAgICBjb25zdCByYW5nZVN0YXJ0ID0gTWF0aC5mbG9vcihjdXJyZW50IC8gMTApICogMTA7XHJcbiAgICBjb25zdCByYW5nZUVuZCA9IHJhbmdlU3RhcnQgKyAxMDtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAuLi4ocmFuZ2VTdGFydCA8PSAxID8gW10gOiBbeyBudW1iZXI6IHJhbmdlU3RhcnQgLSAxLCBpY29uOiAnbW9yZS1saW5lJyB9XSksXHJcbiAgICAgIC4uLnRoaXMuX2NvbXB1dGVkUGFnZU51bWJlcnMocmFuZ2VTdGFydCA+IDEgPyByYW5nZVN0YXJ0IDogMiwgcmFuZ2VFbmQgPCBsYXN0ID8gcmFuZ2VFbmQgOiBsYXN0KSxcclxuICAgICAgLi4uKHJhbmdlRW5kID4gbGFzdCA/IFtdIDogW3sgbnVtYmVyOiByYW5nZUVuZCwgaWNvbjogJ21vcmUtbGluZScgfV0pLFxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2NvbXB1dGVkUGFnZU51bWJlcnMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBQYWdlTnVtYmVyW10ge1xyXG4gICAgY29uc3QgcGFnZU51bWJlcnMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XHJcbiAgICAgIHBhZ2VOdW1iZXJzLnB1c2goeyBudW1iZXI6IGkgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFnZU51bWJlcnM7XHJcbiAgfVxyXG59XHJcbiIsIkBpZiAodGhpcy5ncmlkICYmIHRoaXMuZ3JpZC50YWJsZSAmJiB0aGlzLnNob3cpIHtcclxuICA8ZGl2IGNsYXNzPVwiZmxleC1zdGFydCBnLXNwYWNlLXNtIGFsaWduLWNlbnRlclwiPlxyXG4gICAgPG1hdC1pY29uIChjbGljayk9XCJ0aGlzLmdyaWQudGFibGUucHJldmlvdXNQYWdlKClcIj4gY2hldnJvbl9sZWZ0IDwvbWF0LWljb24+XHJcbiAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwiaXRlbVwiIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IHBhZ2VudW1iZXI6IHsgbnVtYmVyOiAxIH0gfVwiPjwvbmctdGVtcGxhdGU+XHJcblxyXG4gICAgQGZvciAocGFnZSBvZiB0aGlzLmdldExpc3RQYWdlKCk7IHRyYWNrIHBhZ2UubnVtYmVyKSB7XHJcbiAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJpdGVtXCIgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgcGFnZW51bWJlcjogcGFnZSB9XCI+PC9uZy10ZW1wbGF0ZT5cclxuICAgIH1cclxuXHJcbiAgICBAaWYgKHRoaXMucGFnaW5hdGlvbkdldFRvdGFsUGFnZXMgPiAxKSB7XHJcbiAgICAgIDxuZy10ZW1wbGF0ZVxyXG4gICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cIml0ZW1cIlxyXG4gICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7XHJcbiAgICAgICAgICBwYWdlbnVtYmVyOiB7IG51bWJlcjogdGhpcy5wYWdpbmF0aW9uR2V0VG90YWxQYWdlcyB9LFxyXG4gICAgICAgIH1cIlxyXG4gICAgICA+PC9uZy10ZW1wbGF0ZT5cclxuICAgIH1cclxuXHJcbiAgICA8bWF0LWljb24gKGNsaWNrKT1cInRoaXMuZ3JpZC50YWJsZS5uZXh0UGFnZSgpXCI+IGNoZXZyb25fcmlnaHQgPC9tYXQtaWNvbj5cclxuICA8L2Rpdj5cclxufVxyXG5cclxuPG5nLXRlbXBsYXRlICNpdGVtIGxldC1wYWdlbnVtYmVyPVwicGFnZW51bWJlclwiIFt0eXBlZFRlbXBsYXRlXT1cInRoaXMuUGFnZU51bWJlclwiPlxyXG4gIDxkaXZcclxuICAgIGNsYXNzPVwiZmlndXJlIGMtcG9pbnRlclwiXHJcbiAgICBbY2xhc3MuaXMtYWN0aXZlXT1cInBhZ2VudW1iZXIubnVtYmVyID09PSAodGhpcy5ncmlkLnRhYmxlPy5nZXRQYWdlKCkgfHwgMClcIlxyXG4gICAgKGNsaWNrKT1cInRoaXMuZ3JpZC50YWJsZT8uc2V0UGFnZShwYWdlbnVtYmVyLm51bWJlcilcIlxyXG4gID5cclxuICAgIEBpZiAocGFnZW51bWJlci5pY29uKSB7XHJcbiAgICAgIDxtYXQtaWNvbiB0eXBlPVwic21cIj57eyBwYWdlbnVtYmVyLmljb24gfX08L21hdC1pY29uPlxyXG4gICAgfSBAZWxzZSB7XHJcbiAgICAgIHt7IHBhZ2VudW1iZXIubnVtYmVyIH19XHJcbiAgICB9XHJcbiAgPC9kaXY+XHJcbjwvbmctdGVtcGxhdGU+XHJcbiJdfQ==