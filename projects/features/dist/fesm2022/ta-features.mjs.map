{"version":3,"file":"ta-features.mjs","sources":["../../src/lib/features/grid/models/types.ts","../../src/lib/features/grid/services/grid-form.services.ts","../../src/lib/features/grid/models/cols/base-col.ts","../../src/lib/features/grid/models/cols/bool-col.ts","../../src/lib/features/grid/models/cols/date-col.ts","../../src/lib/features/grid/models/cols/enum-col.ts","../../src/lib/features/grid/models/cols/number-col.ts","../../src/lib/features/grid/models/cols/relation-col.ts","../../src/lib/features/grid/models/cols/string-col.ts","../../src/lib/features/grid/models/grid-filters.ts","../../src/lib/features/grid/models/utils.ts","../../src/lib/features/grid/models/grid-data.ts","../../src/lib/features/grid/services/grid-instance.service.ts","../../src/lib/features/grid/components/abstract.component.ts","../../src/lib/features/grid/components/form/form.component.ts","../../src/lib/features/grid/components/form/form.component.html","../../src/lib/features/grid/components/pagination/pagination.component.ts","../../src/lib/features/grid/components/pagination/pagination.component.html","../../src/lib/features/grid/components/grid/grid.component.ts","../../src/lib/features/grid/components/grid/grid.component.html","../../src/lib/features/grid/components/tags/tags.component.ts","../../src/lib/features/grid/components/tags/tags.component.html","../../src/lib/features/grid/components/control/control.component.ts","../../src/lib/features/grid/components/control/control.component.html","../../src/lib/features/grid/services/grid-session.services.ts","../../src/lib/features/grid/services/grid-view.service.ts","../../src/lib/features/grid/components/search/search.component.ts","../../src/lib/features/grid/components/search/search.component.html","../../src/lib/features/grid/components/container/container.component.ts","../../src/lib/features/grid/components/container/container.component.html","../../src/lib/features/grid/public-api.ts","../../src/public-api.ts","../../src/ta-features.ts"],"sourcesContent":["import { Observable } from 'rxjs';\r\nimport { Filter as TabulatorFilter } from 'tabulator-tables';\r\n\r\nimport { InputChoicesOption } from '@ta/form-model';\r\n\r\nexport enum ParameterType {\r\n  Unknown,\r\n  String,\r\n  Number,\r\n  Boolean,\r\n  DateTime,\r\n  Enum,\r\n  Relation,\r\n}\r\n\r\nexport interface ColMetaData<T = unknown> {\r\n  name: keyof T;\r\n  type: ParameterType;\r\n  isSearchField?: boolean;\r\n  notDisplayable?: boolean;\r\n  showOnSearch?: boolean;\r\n  multivalues?: boolean;\r\n  enumValues?: string[];\r\n  dataSearch$?: (search?: string) => Observable<InputChoicesOption[]>;\r\n  manyToOneOptions?: {\r\n    field: string;\r\n    model: string;\r\n    data$: (id: number[]) => Observable<string[]>;\r\n  };\r\n}\r\n\r\nexport type ActiveFilter = { key: string; values: Filter[] };\r\nexport type Filter = TabulatorFilter;\r\nexport type Sort = { field: string; dir: 'asc' | 'desc' };\r\n\r\nexport type ajaxResponse<T> = { data: T[]; last_page: number; total: number };\r\nexport type ajaxRequestFuncParams = {\r\n  filter: Filter[];\r\n  sort: Sort[];\r\n  groupBy: string | null;\r\n  page: number;\r\n  size: number;\r\n  colsMetaData: ColMetaData[];\r\n};\r\n\r\nexport type ViewType = 'grid' | 'card';\r\nexport type Preset = { name: string; filters: Filter[] };\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { of } from 'rxjs';\r\n\r\nimport { InputBase, InputDropdown, InputPanel } from '@ta/form-model';\r\nimport { isNonNullable } from '@ta/utils';\r\n\r\nimport { TaGridData } from '../models/grid-data';\r\nimport { Filter } from '../models/types';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TaGridFormService<T> {\r\n  constructor() {}\r\n\r\n  public getFiltersForm(model: TaGridData<T>): InputBase<any>[] {\r\n    const keys = Object.keys(model.cols);\r\n    if (!keys || keys.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    return [\r\n      new InputPanel({\r\n        key: 'main-panel',\r\n        class: 'p-space-sm',\r\n        contentClass: 'grid g-space-md',\r\n        children: keys\r\n          .filter(key => model.cols[key].data.col.showOnSearch)\r\n          .map(key => model.cols[key].getInputForm())\r\n          .filter(isNonNullable)\r\n          .map(\r\n            input =>\r\n              new InputPanel({\r\n                key: 'panel',\r\n                class: 'g-col-6',\r\n                children: [input],\r\n              })\r\n          ),\r\n      }),\r\n    ];\r\n  }\r\n\r\n  public formatFiltersForm(model: TaGridData<T>, data: any): Filter[] {\r\n    return Object.keys(model.cols).reduce<Filter[]>((acc, key) => {\r\n      const filter = model.cols[key].formatInputForm(data);\r\n\r\n      if (!filter) {\r\n        return acc;\r\n      }\r\n      return [...acc, filter];\r\n    }, []);\r\n  }\r\n\r\n  public getGroupForm(model: TaGridData<T>): InputBase<any>[] {\r\n    return [\r\n      new InputPanel({\r\n        key: 'main-panel',\r\n        class: 'p-space-sm',\r\n        children: [\r\n          new InputDropdown({\r\n            key: 'group',\r\n            label: 'grid.core.groupBy',\r\n            options$: of(\r\n              Object.values(model.cols)\r\n                .filter(col => col.data.col.showOnSearch && !col.data.col.notDisplayable)\r\n                .map(group => ({\r\n                  id: group.key,\r\n                  name: group.inputLabel,\r\n                }))\r\n            ),\r\n            value: model.groupBy,\r\n          }),\r\n        ],\r\n      }),\r\n    ];\r\n  }\r\n\r\n  public formatGroupForm(data: any): string | null {\r\n    return data['group'] || null;\r\n  }\r\n}\r\n","import { ColumnDefinition } from 'tabulator-tables';\r\n\r\nimport { InputBase } from '@ta/form-model';\r\n\r\nimport { TaGridData } from '../grid-data';\r\nimport { ColMetaData, Filter } from '../types';\r\n\r\nexport const operatorMap: { [key: string]: string } = {\r\n  contains: '%',\r\n  greaterThan: '>',\r\n  lessThan: '<',\r\n  equals: '=',\r\n  notEqual: '!=',\r\n  greaterThanOrEqual: '>=',\r\n  lessThanOrEqual: '<=',\r\n};\r\nexport interface IFilterOptions {\r\n  allow: boolean;\r\n}\r\nexport interface IBaseCol {\r\n  scope: string;\r\n  col: ColMetaData;\r\n}\r\n\r\nexport class BaseCol<T> {\r\n  public data: IBaseCol;\r\n  public model: TaGridData<any>;\r\n\r\n  get key() {\r\n    return this.data.col.name;\r\n  }\r\n\r\n  get inputLabel() {\r\n    return `grid.${this.data.scope}.core.${this.data.col.name}`;\r\n  }\r\n  get filterValues(): T[] {\r\n    return (\r\n      this.model.filters\r\n        ?.get()\r\n        .find(filter => filter.key === this.key)\r\n        ?.values.map(f => f.value) || []\r\n    );\r\n  }\r\n  constructor(data: IBaseCol, model: TaGridData<any>) {\r\n    this.data = data;\r\n    this.model = model;\r\n  }\r\n\r\n  public getColDef(): ColumnDefinition {\r\n    return {\r\n      field: this.key,\r\n      title: this.inputLabel,\r\n      headerFilter: 'input',\r\n    };\r\n  }\r\n\r\n  public getInputForm(): InputBase<any> | null {\r\n    return null;\r\n  }\r\n  public formatInputForm(data: any): Filter | null {\r\n    const value = data[this.key];\r\n\r\n    if (!value) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      field: this.key,\r\n      type: '=',\r\n      value: value.trim(),\r\n    };\r\n  }\r\n}\r\n","import { BaseCol } from './base-col';\r\n\r\nexport class BoolCol extends BaseCol<Boolean> {}\r\n","import { format } from 'date-fns';\r\n\r\nimport { InputDatePicker } from '@ta/form-model';\r\n\r\nimport { Filter } from '../types';\r\nimport { BaseCol } from './base-col';\r\n\r\nexport class DateCol extends BaseCol<Date> {\r\n  public override getInputForm() {\r\n    return new InputDatePicker({\r\n      key: this.key,\r\n      label: this.inputLabel,\r\n      rangeEnabled: true,\r\n      value: this.filterValues[0] ? { start: this.filterValues[0] } : undefined,\r\n    });\r\n  }\r\n\r\n  public override formatInputForm(data: any): Filter | null {\r\n    const value = data[this.key];\r\n\r\n    if (!value) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      field: this.key,\r\n      type: 'like',\r\n      value: format(value, 'yyyy-MM-dd') + '%',\r\n    };\r\n  }\r\n}\r\n","import { of } from 'rxjs';\r\n\r\nimport { InputDropdown, InputPanel } from '@ta/form-model';\r\n\r\nimport { BaseCol } from './base-col';\r\n\r\nexport class EnumCol extends BaseCol<string> {\r\n  public override getInputForm() {\r\n    return new InputPanel({\r\n      key: 'enum-panel',\r\n      contentClass: 'row g-0',\r\n      children: [\r\n        new InputDropdown({\r\n          key: this.key,\r\n          label: this.inputLabel,\r\n          options$: of(\r\n            this.data.col.enumValues?.map(value => ({\r\n              id: value,\r\n              name: value,\r\n            })) ?? []\r\n          ),\r\n          value: this.filterValues[0],\r\n        }),\r\n      ],\r\n    });\r\n  }\r\n}\r\n","import { InputNumber, InputPanel } from '@ta/form-model';\r\n\r\nimport { Filter } from '../types';\r\nimport { BaseCol } from './base-col';\r\n\r\nexport class NumberCol extends BaseCol<number> {\r\n  public override getInputForm() {\r\n    return new InputPanel({\r\n      key: 'number-panel',\r\n      contentClass: 'row g-0',\r\n      children: [\r\n        new InputNumber({\r\n          key: this.key,\r\n          label: this.inputLabel,\r\n          value: this.filterValues[0],\r\n        }),\r\n      ],\r\n    });\r\n  }\r\n\r\n  public override formatInputForm(data: any): Filter | null {\r\n    const value = data[this.key];\r\n\r\n    if (!value) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      field: this.key,\r\n      type: '=',\r\n      value: value,\r\n    };\r\n  }\r\n}\r\n","import { InputChoices, InputTextBox } from '@ta/form-model';\r\n\r\nimport { Filter } from '../types';\r\nimport { BaseCol } from './base-col';\r\n\r\nexport class RelationCol extends BaseCol<string> {\r\n  public override getInputForm() {\r\n    if (this.data.col.dataSearch$) {\r\n      return new InputChoices({\r\n        key: this.key,\r\n        label: this.inputLabel,\r\n        class: 'pb-2',\r\n        advancedSearch$: this.data.col.dataSearch$,\r\n        value: this.filterValues,\r\n      });\r\n    }\r\n\r\n    return new InputTextBox({\r\n      key: this.key,\r\n      value: this.filterValues[0],\r\n    });\r\n  }\r\n\r\n  public override formatInputForm(data: any): Filter | null {\r\n    const value = data[this.key];\r\n\r\n    if (!value) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      field: this.key,\r\n      type: this.data.col.multivalues ? 'in' : '=',\r\n      value: Number(value),\r\n    };\r\n  }\r\n}\r\n","import { InputTextBox } from '@ta/form-model';\r\n\r\nimport { Filter } from '../types';\r\nimport { BaseCol } from './base-col';\r\n\r\nexport class StringCol extends BaseCol<string> {\r\n  public override getInputForm() {\r\n    // const value = this.values;\r\n\r\n    return new InputTextBox({\r\n      key: this.key,\r\n      label: this.inputLabel,\r\n      class: 'pb-2',\r\n      value: this.filterValues[0],\r\n    });\r\n  }\r\n\r\n  public override formatInputForm(data: any): Filter | null {\r\n    const value = data[this.key];\r\n\r\n    if (!value || value === '' || value.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      field: this.key,\r\n      type: 'like',\r\n      value: value,\r\n    };\r\n  }\r\n}\r\n","import { TabulatorFull as Tabulator } from 'tabulator-tables';\r\n\r\nimport { ActiveFilter, Filter, Preset } from './types';\r\n\r\nexport class TaGridFilters {\r\n  private _debounceTimer: any = null;\r\n\r\n  constructor(\r\n    public readonly scope: string,\r\n    public readonly table: Tabulator,\r\n    public readonly preset: Preset[] = []\r\n  ) {}\r\n\r\n  public get() {\r\n    return this.table.getFilters(false).reduce<ActiveFilter[]>((acc, filter) => {\r\n      const existing = acc.find(tag => tag.key === filter.field);\r\n      if (existing) {\r\n        existing.values.push(filter);\r\n      } else {\r\n        acc.push({\r\n          key: filter.field,\r\n          values: [filter],\r\n        });\r\n      }\r\n      return acc;\r\n    }, []);\r\n  }\r\n  public apply(filters: Filter[]) {\r\n    if (this._debounceTimer) {\r\n      clearTimeout(this._debounceTimer);\r\n    }\r\n\r\n    this._debounceTimer = setTimeout(() => {\r\n      this.table.setFilter(filters);\r\n    }, 500);\r\n  }\r\n\r\n  public remove(filter: Filter) {\r\n    this.table.removeFilter(filter.field, filter.type, filter.value);\r\n  }\r\n}\r\n","import { getUniqueArray } from '@ta/utils';\r\n\r\nexport const groupBy = <T>(key: keyof T | null, data: T[]): { key: string; data: T[] }[] => {\r\n  if (!key) {\r\n    return [{ key: '', data }];\r\n  }\r\n\r\n  const keys = getUniqueArray<any>(data.map(item => item[key]));\r\n\r\n  return keys.map(k => ({\r\n    key: k.toString(),\r\n    data: data.filter(item => item[key] === k),\r\n  }));\r\n};\r\n","import { ElementRef, signal } from '@angular/core';\r\n\r\nimport { BehaviorSubject, Observable, Subject, firstValueFrom } from 'rxjs';\r\nimport { ColumnDefinition, Options, TabulatorFull as Tabulator } from 'tabulator-tables';\r\n\r\nimport { BaseCol } from './cols/base-col';\r\nimport { BoolCol } from './cols/bool-col';\r\nimport { DateCol } from './cols/date-col';\r\nimport { EnumCol } from './cols/enum-col';\r\nimport { NumberCol } from './cols/number-col';\r\nimport { RelationCol } from './cols/relation-col';\r\nimport { StringCol } from './cols/string-col';\r\nimport { TaGridFilters } from './grid-filters';\r\nimport { ColMetaData, Filter, ParameterType, Preset, ViewType, ajaxRequestFuncParams, ajaxResponse } from './types';\r\nimport { groupBy } from './utils';\r\n\r\nexport interface IDataService<T> {\r\n  getData$: (params: ajaxRequestFuncParams) => Observable<ajaxResponse<T>>;\r\n}\r\n\r\nexport class TaGridData<T> {\r\n  get data(): T[] {\r\n    return this.table?.getData() ?? [];\r\n  }\r\n  get dataByGroup() {\r\n    return groupBy(this.groupBy, this.data);\r\n  }\r\n  get isGroup() {\r\n    return this.groupBy !== null;\r\n  }\r\n\r\n  public readonly rowClicked$ = new Subject<T>();\r\n  public table: Tabulator | null = null;\r\n  public cols: { [index: string]: BaseCol<any> } = {};\r\n  public filters: TaGridFilters | null = null;\r\n\r\n  public readonly isReady$ = new BehaviorSubject(false);\r\n  public readonly isDataReady$ = new BehaviorSubject(false);\r\n\r\n  public tableHtml: ElementRef | null = null;\r\n  public readonly displayType = signal<ViewType>('card');\r\n\r\n  public groupBy: keyof T | null = null;\r\n  public readonly totalItems = signal(0);\r\n\r\n  constructor(public readonly scope: string) {}\r\n\r\n  public init(params: {\r\n    elementRef: ElementRef;\r\n    colsMetaData: ColMetaData[];\r\n    data?: T[];\r\n    services?: IDataService<T>;\r\n    initialFilter?: Filter[];\r\n    preset?: Preset[];\r\n  }) {\r\n    this.table = new Tabulator(params.elementRef.nativeElement, this._getOptions(params));\r\n\r\n    this.table.on('tableBuilt', () => {\r\n      this.tableHtml = params.elementRef;\r\n      this.filters = new TaGridFilters(this.scope, this.table!, params.preset);\r\n      this.isReady$.next(true);\r\n    });\r\n    this.table.on('rowClick', (_e, row) => {\r\n      this.rowClicked$.next(<T>row.getData());\r\n    });\r\n  }\r\n\r\n  public destroy() {\r\n    this.table?.destroy();\r\n  }\r\n\r\n  public setGroupBy(field: string) {\r\n    this.groupBy = field as keyof T;\r\n    this.table?.setGroupBy(field);\r\n    this.table?.setData();\r\n  }\r\n  public clearGroupBy() {\r\n    this.groupBy = null;\r\n    this.table?.setGroupBy([]);\r\n    this.table?.setData();\r\n  }\r\n\r\n  public switchView(type: ViewType) {\r\n    this.displayType.set(type);\r\n  }\r\n\r\n  private _getOptions(params: {\r\n    colsMetaData: ColMetaData[];\r\n    data?: T[];\r\n    services?: IDataService<T>;\r\n    initialFilter?: Filter[];\r\n  }): Options {\r\n    const baseOptions: Options = {\r\n      height: '500px',\r\n      layout: 'fitColumns',\r\n      initialFilter: params.initialFilter,\r\n      columns: this._getColumns(params.colsMetaData),\r\n    };\r\n\r\n    const serviceOptions: Options = params.services\r\n      ? {\r\n          paginationMode: 'remote',\r\n          pagination: true,\r\n          paginationSize: 20,\r\n          paginationInitialPage: 1,\r\n          ajaxFiltering: true,\r\n          filterMode: 'remote',\r\n          ajaxSorting: true,\r\n          sortMode: 'remote',\r\n          ajaxURL: 'dummy',\r\n          ajaxRequestFunc: (url: string, config: any, ajaxParams: ajaxRequestFuncParams): Promise<ajaxResponse<T>> => {\r\n            return firstValueFrom(\r\n              params.services!.getData$({\r\n                ...ajaxParams,\r\n                groupBy: this.groupBy as string,\r\n                colsMetaData: params.colsMetaData,\r\n              })\r\n            );\r\n          },\r\n          ajaxResponse: (_: any, __: any, response: ajaxResponse<T>) => {\r\n            this.isDataReady$.next(true);\r\n            this.totalItems.set(response.total);\r\n            return response;\r\n          },\r\n        }\r\n      : {};\r\n\r\n    const dataOptions: Options = params.data\r\n      ? {\r\n          data: params.data,\r\n        }\r\n      : {};\r\n    return { ...baseOptions, ...serviceOptions, ...dataOptions };\r\n  }\r\n\r\n  private _getColumns(colsMetaData: ColMetaData[]): ColumnDefinition[] {\r\n    this.cols = Object.fromEntries(\r\n      colsMetaData.map(meta => {\r\n        const field = this._factoryCols(meta);\r\n        return [field.key, field];\r\n      })\r\n    );\r\n\r\n    return Object.keys(this.cols)\r\n      .filter(key => !key.startsWith('_'))\r\n      .map(key => ({ ...this.cols[key].getColDef() }));\r\n  }\r\n\r\n  private _factoryCols(col: ColMetaData): BaseCol<any> {\r\n    switch (col.type) {\r\n      case ParameterType.String:\r\n        return new StringCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.Enum:\r\n        return new EnumCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.Number:\r\n        return new NumberCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.DateTime:\r\n        return new DateCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.Boolean:\r\n        return new BoolCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.Relation:\r\n        return new RelationCol({ scope: this.scope, col: col }, this);\r\n      default:\r\n        return new BaseCol({ scope: this.scope, col: col }, this);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { TaGridData } from '../models/grid-data';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TaGridInstanceService<T> {\r\n  public readonly grids: { [index: string]: TaGridData<T> } = {};\r\n\r\n  constructor() {}\r\n\r\n  public create(key: string) {\r\n    if (!this.has(key)) {\r\n      this.grids[key] = new TaGridData<T>(key);\r\n    }\r\n  }\r\n\r\n  public get(key: string, create: boolean = false) {\r\n    if (!this.has(key) && create) {\r\n      this.create(key);\r\n    }\r\n    return this.grids[key];\r\n  }\r\n\r\n  public has(key: string) {\r\n    return !!this.grids[key];\r\n  }\r\n}\r\n","import { Component, OnInit, inject, input } from '@angular/core';\r\n\r\nimport { Observable, distinctUntilChanged, filter } from 'rxjs';\r\n\r\nimport { TaBaseComponent } from '@ta/utils';\r\n\r\nimport { TaGridData } from '../models/grid-data';\r\nimport { TaGridInstanceService } from '../services/grid-instance.service';\r\n\r\n@Component({ template: '' })\r\nexport abstract class TaAbstractGridComponent<T> extends TaBaseComponent implements OnInit {\r\n  gridId = input.required<string>();\r\n\r\n  get grid() {\r\n    return this._grid;\r\n  }\r\n  get isGroup() {\r\n    return this._grid.isGroup;\r\n  }\r\n  get data() {\r\n    return this._grid.data;\r\n  }\r\n  get dataByGroup() {\r\n    return this._grid.dataByGroup;\r\n  }\r\n  get displayType() {\r\n    return this._grid.displayType;\r\n  }\r\n  public isReady$!: Observable<boolean>;\r\n  public isDataReady$!: Observable<boolean>;\r\n\r\n  protected _grid!: TaGridData<T>;\r\n  private _dataService = inject(TaGridInstanceService);\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this._grid = this._dataService.get(this.gridId(), true);\r\n    this.isReady$ = this._grid.isReady$.pipe(\r\n      distinctUntilChanged(),\r\n      filter(isReady => isReady)\r\n    );\r\n    this.isDataReady$ = this._grid.isDataReady$.pipe(\r\n      distinctUntilChanged(),\r\n      filter(isReady => isReady)\r\n    );\r\n  }\r\n}\r\n","import { Component, inject, signal } from '@angular/core';\r\n\r\nimport { FormComponent } from '@ta/form-basic';\r\nimport { InputBase } from '@ta/form-model';\r\nimport { TranslatePipe } from '@ta/translation';\r\nimport { TitleComponent } from '@ta/ui';\r\n\r\nimport { TaGridFormService } from '../../services/grid-form.services';\r\nimport { TaAbstractGridComponent } from '../abstract.component';\r\n\r\n@Component({\r\n  selector: 'ta-grid-form',\r\n  standalone: true,\r\n  imports: [FormComponent, TitleComponent, TranslatePipe],\r\n  templateUrl: './form.component.html',\r\n  styleUrl: './form.component.scss',\r\n})\r\nexport class TaGridFormComponent extends TaAbstractGridComponent<unknown> {\r\n  public filtersForm = signal<InputBase<any>[]>([]);\r\n  public groupForm = signal<InputBase<any>[]>([]);\r\n\r\n  private _formService = inject(TaGridFormService<unknown>);\r\n\r\n  public override ngOnInit() {\r\n    super.ngOnInit();\r\n\r\n    this._registerSubscription(\r\n      this.isReady$.subscribe({\r\n        next: () => {\r\n          this.filtersForm.set(this._formService.getFiltersForm(this._grid));\r\n          this.groupForm.set(this._formService.getGroupForm(this._grid));\r\n        },\r\n      })\r\n    );\r\n  }\r\n\r\n  public applyFilters(data: any) {\r\n    const filters = this._formService.formatFiltersForm(this._grid, data);\r\n\r\n    this._grid.filters?.apply(filters);\r\n  }\r\n  public applyGroup(data: any) {\r\n    const group = this._formService.formatGroupForm(data);\r\n\r\n    if (!group) {\r\n      this._grid.clearGroupBy();\r\n      return;\r\n    }\r\n    this._grid.setGroupBy(group);\r\n  }\r\n}\r\n","<div>\r\n  <ta-title [level]=\"2\">{{ 'grid.' + this.grid.scope + '.title' | translate }}</ta-title>\r\n</div>\r\n\r\n<div class=\"space-between\">\r\n  <div>\r\n    <ta-form\r\n      [inputs]=\"this.filtersForm()\"\r\n      (valid)=\"this.applyFilters($event)\"\r\n      [askOnDestroy]=\"true\"\r\n      [canDisplayButton]=\"false\"\r\n    ></ta-form>\r\n  </div>\r\n  <div>\r\n    <ta-form\r\n      [inputs]=\"this.groupForm()\"\r\n      (valid)=\"this.applyGroup($event)\"\r\n      [askOnDestroy]=\"true\"\r\n      [canDisplayButton]=\"false\"\r\n    ></ta-form>\r\n  </div>\r\n</div>\r\n","import { NgTemplateOutlet } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatIcon } from '@angular/material/icon';\r\n\r\nimport { TypedTemplateDirective } from '@ta/utils';\r\n\r\nimport { TaAbstractGridComponent } from '../abstract.component';\r\n\r\ntype PageNumber = {\r\n  number: number;\r\n  icon?: string;\r\n};\r\n@Component({\r\n  selector: 'ta-grid-pagination',\r\n  templateUrl: './pagination.component.html',\r\n  styleUrls: ['./pagination.component.scss'],\r\n  standalone: true,\r\n  imports: [MatIcon, NgTemplateOutlet, TypedTemplateDirective],\r\n})\r\nexport class PaginationComponent extends TaAbstractGridComponent<any> {\r\n  readonly PageNumber!: { pagenumber: PageNumber };\r\n  readonly maxPageNumber = 10;\r\n\r\n  get show() {\r\n    return this.paginationGetTotalPages > 1;\r\n  }\r\n  get paginationGetTotalPages() {\r\n    return this.grid.table?.getPageMax() || 0;\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  public getListPage() {\r\n    if (!this.grid || !this.grid.table) {\r\n      return [];\r\n    }\r\n    const last = this.paginationGetTotalPages;\r\n\r\n    if (last < this.maxPageNumber) {\r\n      return this._computedPageNumbers(2, last);\r\n    }\r\n\r\n    const current = this.grid.table.getPage() || 0;\r\n    const rangeStart = Math.floor(current / 10) * 10;\r\n    const rangeEnd = rangeStart + 10;\r\n\r\n    return [\r\n      ...(rangeStart <= 1 ? [] : [{ number: rangeStart - 1, icon: 'more-line' }]),\r\n      ...this._computedPageNumbers(rangeStart > 1 ? rangeStart : 2, rangeEnd < last ? rangeEnd : last),\r\n      ...(rangeEnd > last ? [] : [{ number: rangeEnd, icon: 'more-line' }]),\r\n    ];\r\n  }\r\n\r\n  private _computedPageNumbers(start: number, end: number): PageNumber[] {\r\n    const pageNumbers = [];\r\n    for (let i = start; i < end; i++) {\r\n      pageNumbers.push({ number: i });\r\n    }\r\n    return pageNumbers;\r\n  }\r\n}\r\n","@if (this.grid && this.grid.table && this.show) {\r\n  <div class=\"flex-start g-space-sm align-center\">\r\n    <mat-icon (click)=\"this.grid.table.previousPage()\"> chevron_left </mat-icon>\r\n    <ng-template [ngTemplateOutlet]=\"item\" [ngTemplateOutletContext]=\"{ pagenumber: { number: 1 } }\"></ng-template>\r\n\r\n    @for (page of this.getListPage(); track page.number) {\r\n      <ng-template [ngTemplateOutlet]=\"item\" [ngTemplateOutletContext]=\"{ pagenumber: page }\"></ng-template>\r\n    }\r\n\r\n    @if (this.paginationGetTotalPages > 1) {\r\n      <ng-template\r\n        [ngTemplateOutlet]=\"item\"\r\n        [ngTemplateOutletContext]=\"{\r\n          pagenumber: { number: this.paginationGetTotalPages },\r\n        }\"\r\n      ></ng-template>\r\n    }\r\n\r\n    <mat-icon (click)=\"this.grid.table.nextPage()\"> chevron_right </mat-icon>\r\n  </div>\r\n}\r\n\r\n<ng-template #item let-pagenumber=\"pagenumber\" [typedTemplate]=\"this.PageNumber\">\r\n  <div\r\n    class=\"figure c-pointer\"\r\n    [class.is-active]=\"pagenumber.number === (this.grid.table?.getPage() || 0)\"\r\n    (click)=\"this.grid.table?.setPage(pagenumber.number)\"\r\n  >\r\n    @if (pagenumber.icon) {\r\n      <mat-icon type=\"sm\">{{ pagenumber.icon }}</mat-icon>\r\n    } @else {\r\n      {{ pagenumber.number }}\r\n    }\r\n  </div>\r\n</ng-template>\r\n","import { AsyncPipe, NgTemplateOutlet } from '@angular/common';\r\nimport {\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  Output,\r\n  Renderer2,\r\n  TemplateRef,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\n\r\nimport { TitleComponent } from '@ta/ui';\r\n\r\nimport { TaAbstractGridComponent } from '../abstract.component';\r\nimport { PaginationComponent } from '../pagination/pagination.component';\r\n\r\n@Component({\r\n  selector: 'ta-grid',\r\n  standalone: true,\r\n  imports: [PaginationComponent, NgTemplateOutlet, AsyncPipe, TitleComponent],\r\n  templateUrl: './grid.component.html',\r\n  styleUrl: './grid.component.scss',\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class TaGridComponent<T extends { id: number }> extends TaAbstractGridComponent<T> {\r\n  @Input()\r\n  cardTemplate!: TemplateRef<{ items: T[] }>;\r\n\r\n  @Output()\r\n  rowClicked = new EventEmitter<T>();\r\n\r\n  @ViewChild('table', { static: true })\r\n  tableElement!: ElementRef;\r\n\r\n  constructor(private renderer: Renderer2) {\r\n    super();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this._registerSubscription(\r\n      this.isReady$.subscribe({\r\n        next: () => {\r\n          if (this._grid.tableHtml) {\r\n            this.renderer.appendChild(this.tableElement.nativeElement, this._grid.tableHtml.nativeElement);\r\n          }\r\n          this._registerSubscription(this._grid.rowClicked$.subscribe({ next: row => this.rowClicked.emit(row) }));\r\n        },\r\n      })\r\n    );\r\n  }\r\n}\r\n","<div [style.display]=\"this.displayType() === 'grid' ? 'block' : 'none'\">\r\n  <div #table></div>\r\n</div>\r\n\r\n@if (this.isReady$ | async) {\r\n  @if (this.displayType() === 'card') {\r\n    @if (this.isGroup) {\r\n      @for (group of this.dataByGroup; track group.key) {\r\n        <ta-title [level]=\"3\">{{ group.key }}</ta-title>\r\n        <div class=\"py-space-md\">\r\n          <ng-template\r\n            [ngTemplateOutlet]=\"this.cardTemplate\"\r\n            [ngTemplateOutletContext]=\"{ items: group.data }\"\r\n          ></ng-template>\r\n        </div>\r\n      }\r\n    } @else {\r\n      <ng-template\r\n        [ngTemplateOutlet]=\"this.cardTemplate\"\r\n        [ngTemplateOutletContext]=\"{ items: this.data }\"\r\n      ></ng-template>\r\n    }\r\n  }\r\n  <div class=\"py-space-md align-center\">\r\n    <ta-grid-pagination [gridId]=\"this.gridId()\"></ta-grid-pagination>\r\n  </div>\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\nimport { TranslatePipe } from '@ta/translation';\r\nimport { BadgeComponent, ButtonComponent, TextComponent } from '@ta/ui';\r\n\r\nimport { Filter } from '../../models/types';\r\nimport { TaAbstractGridComponent } from '../abstract.component';\r\n\r\n@Component({\r\n  selector: 'ta-grid-tags',\r\n  templateUrl: './tags.component.html',\r\n  styleUrls: ['./tags.component.scss'],\r\n  standalone: true,\r\n  imports: [TranslatePipe, BadgeComponent, TextComponent, ButtonComponent],\r\n})\r\nexport class TaGridTagsComponent extends TaAbstractGridComponent<unknown> {\r\n  get group() {\r\n    return this._grid.groupBy;\r\n  }\r\n  get activeFilters() {\r\n    return this._grid.filters?.get() ?? [];\r\n  }\r\n  override ngOnInit() {\r\n    super.ngOnInit();\r\n  }\r\n\r\n  public remove(filter: Filter) {\r\n    this._grid.filters?.remove(filter);\r\n  }\r\n  public removeGroup() {\r\n    this._grid.clearGroupBy();\r\n  }\r\n  public clear() {\r\n    this._grid.filters?.apply([]);\r\n    this._grid.clearGroupBy();\r\n  }\r\n}\r\n","<div class=\"space-between align-center g-space-md\">\r\n  <div class=\"list-tag flex-start g-space-sm\">\r\n    <div class=\"group-tag flex-start g-space-xs align-center\">\r\n      @if (this.group) {\r\n        {{ 'grid.core.groupBy' | translate }}:\r\n        <ta-badge [value]=\"this.group\" type=\"primary\" icon=\"close\" (clickAction)=\"this.removeGroup()\"></ta-badge>\r\n      }\r\n    </div>\r\n\r\n    @for (tag of this.activeFilters; track tag.key) {\r\n      <div class=\"item-tag flex-start g-space-xs align-center\">\r\n        <div class=\"tag-title\">{{ 'grid.' + this.gridId + '.core.' + tag.key | translate }}:</div>\r\n        @for (value of tag.values; track value.field) {\r\n          <ta-badge\r\n            [value]=\"value.type + ' ' + value.value\"\r\n            type=\"primary\"\r\n            icon=\"close\"\r\n            (clickAction)=\"this.remove(value)\"\r\n          ></ta-badge>\r\n        }\r\n      </div>\r\n    }\r\n  </div>\r\n\r\n  <div class=\"reset-n-result flex-start g-space-md align-center\">\r\n    @if (this.activeFilters.length > 0) {\r\n      <div class=\"reset\">\r\n        <ta-button (action)=\"this.clear()\">\r\n          {{ 'grid.tag.reset' | translate }}\r\n        </ta-button>\r\n      </div>\r\n    }\r\n    <div class=\"result\">\r\n      <ta-text>\r\n        {{ 'grid.tag.results' | translate: { nb: this.grid.totalItems() } }}\r\n      </ta-text>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { AsyncPipe } from '@angular/common';\r\nimport { Component, Input, OnInit, inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIcon } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\n\r\nimport { ButtonComponent } from '@ta/ui';\r\n\r\nimport { Preset, ViewType } from '../../models/types';\r\nimport { TaAbstractGridComponent } from '../abstract.component';\r\nimport { TaGridFormComponent } from '../form/form.component';\r\n\r\n@Component({\r\n  selector: 'ta-grid-control',\r\n  templateUrl: './control.component.html',\r\n  styleUrls: ['./control.component.scss'],\r\n  standalone: true,\r\n  imports: [MatIcon, AsyncPipe, MatMenuModule],\r\n})\r\nexport class TaGridControlComponent extends TaAbstractGridComponent<any> implements OnInit {\r\n  @Input()\r\n  show: { switchView?: boolean; filters?: boolean; preset?: boolean } = {\r\n    switchView: true,\r\n    filters: true,\r\n    preset: true,\r\n  };\r\n\r\n  readonly dialog = inject(MatDialog);\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  public override ngOnInit() {\r\n    super.ngOnInit();\r\n    if (this.breakpoints.isMobile && this.show.switchView) {\r\n      this.switchView('card');\r\n    }\r\n  }\r\n\r\n  public switchView(type: ViewType) {\r\n    this._grid.switchView(type);\r\n  }\r\n\r\n  public openFilters() {\r\n    this.dialog.open<FiltersModal, FiltersModalData>(FiltersModal, {\r\n      data: { gridId: this.gridId() },\r\n    });\r\n  }\r\n  public setPreset(preset: Preset) {\r\n    this.grid.filters?.apply(preset.filters);\r\n  }\r\n}\r\n\r\ninterface FiltersModalData {\r\n  gridId: string;\r\n}\r\n@Component({\r\n  selector: '',\r\n  template:\r\n    '<div class=\"p-space-md\"><ta-grid-form [gridId]=\"this.data.gridId\"></ta-grid-form><ta-button (action)=\"this.close()\">Applied</ta-button></div>',\r\n  standalone: true,\r\n  imports: [TaGridFormComponent, ButtonComponent],\r\n})\r\nexport class FiltersModal {\r\n  public readonly dialogRef = inject(MatDialogRef<FiltersModal>);\r\n  public readonly data = inject<FiltersModalData>(MAT_DIALOG_DATA);\r\n\r\n  public close() {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","@if (this.isReady$ | async) {\r\n  <div class=\"d-flex\">\r\n    @if (this.show.filters) {\r\n      <div class=\"grid-control-container ml-space-xs c-pointer\">\r\n        <div (click)=\"this.openFilters()\" class=\"trigger\">\r\n          <mat-icon>filter_list</mat-icon>\r\n        </div>\r\n      </div>\r\n    }\r\n    @if (this.show.preset && (this.grid.filters?.preset?.length ?? 0 > 0)) {\r\n      <div class=\"grid-control-container ml-space-xs c-pointer\">\r\n        <div [matMenuTriggerFor]=\"menu\" class=\"trigger\">\r\n          <mat-icon>visibility</mat-icon>\r\n        </div>\r\n      </div>\r\n      <mat-menu #menu=\"matMenu\">\r\n        @for (preset of this.grid.filters?.preset; track preset.name) {\r\n          <button mat-menu-item (click)=\"this.setPreset(preset)\">\r\n            <span>{{ preset.name }}</span>\r\n          </button>\r\n        }\r\n      </mat-menu>\r\n    }\r\n    @if (this.show.switchView) {\r\n      <div class=\"grid-control-container ml-space-xs c-pointer\">\r\n        <div (click)=\"this.switchView('grid')\" class=\"trigger\" [class.active]=\"this.displayType() === 'grid'\">\r\n          <mat-icon>list</mat-icon>\r\n        </div>\r\n        <div class=\"sep\"></div>\r\n\r\n        <div (click)=\"this.switchView('card')\" class=\"trigger\" [class.active]=\"this.displayType() === 'card'\">\r\n          <mat-icon>grid_view</mat-icon>\r\n        </div>\r\n      </div>\r\n    }\r\n  </div>\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { HandleComplexRequest } from '@ta/server';\r\n\r\nimport { Filter } from '../models/types';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TaGridSessionService {\r\n  private _filterData = new HandleComplexRequest<Filter[]>();\r\n\r\n  public setFilter(key: string, filter: Filter[]) {\r\n    this._filterData.update(key, filter, false);\r\n  }\r\n  public getFilter(key: string) {\r\n    return this._filterData.get(key);\r\n  }\r\n\r\n  public clearFilter(key: string): void {\r\n    this._filterData.update(key, []);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { Observable, of } from 'rxjs';\r\n\r\nimport { TaBaseService } from '@ta/server';\r\n\r\nimport { ajaxRequestFuncParams, ajaxResponse } from '../models/types';\r\n\r\nexport const gridSearchFieldsName = 'search';\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TaGridViewService extends TaBaseService {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  public getData$<T>(model: string, ajaxParam: ajaxRequestFuncParams): Observable<ajaxResponse<T>> {\r\n    // const filterParams = () => {\r\n    //   const searchField = ajaxParam.filter.filter(f => f.field === gridSearchFieldsName);\r\n    //   const otherFields = ajaxParam.filter.filter(f => f.field !== gridSearchFieldsName);\r\n\r\n    //   return [\r\n    //     ...searchField.flatMap(f =>\r\n    //       this._buildOrDomain(\r\n    //         ajaxParam.colsMetaData.filter(c => c.isSearchField).map(f => f.name),\r\n    //         f.value\r\n    //       )\r\n    //     ),\r\n    //     ...otherFields.map(f => [f.field, f.type, f.value]),\r\n    //   ];\r\n    // };\r\n\r\n    // const orderParams = ajaxParam.sort.map(s => `${s.field} ${s.dir}`).join(',') ?? '';\r\n    // const groupBy = ajaxParam.groupBy;\r\n\r\n    return of({\r\n      data: [],\r\n      last_page: 0,\r\n      total: 0,\r\n    });\r\n    // return this._odooService.searchCount$(model, filterParams()).pipe(\r\n    //   mergeMap(count =>\r\n    //     this._odooService\r\n    //       .searchRead$<T>(\r\n    //         model,\r\n    //         filterParams(),\r\n    //         ajaxParam.colsMetaData.filter(col => !col.notDisplayable).map(col => col.name),\r\n    //         {\r\n    //           order: groupBy ? `${groupBy} asc ${orderParams ? ',' + orderParams : ''}` : orderParams,\r\n    //           offset: (ajaxParam.page - 1) * ajaxParam.size,\r\n    //           limit: ajaxParam.size,\r\n    //         }\r\n    //       )\r\n    //       .pipe(\r\n    //         filter(isNonNullable),\r\n    //         map(data => {\r\n    //           const mapping = ajaxParam.colsMetaData\r\n    //             .filter(col => col.type === ParameterType.Relation)\r\n    //             .map(col => ({ from: col.name, to: (<String>col.name).split('_')[0] }));\r\n\r\n    //           if (!mapping || mapping.length === 0) {\r\n    //             return data;\r\n    //           }\r\n    //           return data.map(entity =>\r\n    //             this._handleJoinData(entity, mapping as unknown as Array<{ from?: keyof T; to: keyof T }>)\r\n    //           );\r\n    //         }),\r\n    //         map(data => ({\r\n    //           data: data,\r\n    //           total: count,\r\n    //           last_page: Math.ceil(count / ajaxParam.size),\r\n    //         }))\r\n    //       )\r\n    //   )\r\n    // );\r\n  }\r\n\r\n  // private _buildOrDomain(fields: string[], value: string) {\r\n  //   if (fields.length === 0) return [];\r\n\r\n  //   return [...fields.slice(0, -1).map(_ => '|'), ...fields.map(field => [field, 'ilike', value])];\r\n  // }\r\n}\r\n","import { Component, Input, inject } from '@angular/core';\r\n\r\nimport { TextBoxComponent } from '@ta/form-input';\r\nimport { InputTextBox } from '@ta/form-model';\r\n\r\nimport { Filter } from '../../models/types';\r\nimport { TaGridSessionService } from '../../services/grid-session.services';\r\nimport { gridSearchFieldsName } from '../../services/grid-view.service';\r\nimport { TaAbstractGridComponent } from '../abstract.component';\r\n\r\n@Component({\r\n  selector: 'ta-grid-search',\r\n  standalone: true,\r\n  imports: [TextBoxComponent],\r\n  templateUrl: './search.component.html',\r\n  styleUrl: './search.component.scss',\r\n})\r\nexport class TaGridSearchComponent extends TaAbstractGridComponent<any> {\r\n  @Input()\r\n  outOfBox = false;\r\n\r\n  public input = new InputTextBox();\r\n\r\n  private _session = inject(TaGridSessionService);\r\n\r\n  constructor() {\r\n    super();\r\n    this.input.createFormControl();\r\n  }\r\n  public valueChanged(value: string) {\r\n    const filters: Filter[] = [\r\n      {\r\n        field: gridSearchFieldsName,\r\n        type: 'like',\r\n        value: value.trim(),\r\n      },\r\n    ];\r\n    if (this.outOfBox) {\r\n      this._session.setFilter(this.gridId(), filters);\r\n    } else {\r\n      this.grid.filters?.apply(filters);\r\n    }\r\n  }\r\n}\r\n","<ta-input-textbox [input]=\"this.input\" (valueChanged)=\"this.valueChanged($event)\"></ta-input-textbox>\r\n","import { AfterViewInit, Component, ElementRef, Input, OnDestroy, ViewChild, inject, input } from '@angular/core';\r\n\r\nimport { ColMetaData, Preset } from '../../models/types';\r\nimport { TaGridSessionService } from '../../services/grid-session.services';\r\n//import { TaGridViewService } from '../../services/grid-view.service';\r\nimport { TaAbstractGridComponent } from '../abstract.component';\r\n\r\n@Component({\r\n  selector: 'ta-grid-container',\r\n  standalone: true,\r\n  imports: [],\r\n  templateUrl: './container.component.html',\r\n  styleUrl: './container.component.scss',\r\n})\r\nexport class TaGridContainerComponent<T = unknown>\r\n  extends TaAbstractGridComponent<T>\r\n  implements AfterViewInit, OnDestroy\r\n{\r\n  initialData = input<T[]>();\r\n\r\n  @Input()\r\n  colsMetaData: ColMetaData<any>[] = [];\r\n\r\n  @Input()\r\n  preset?: Preset[];\r\n\r\n  @ViewChild('table', { static: true }) tableElement!: ElementRef;\r\n\r\n  private _session = inject(TaGridSessionService);\r\n  //private _service = inject(TaGridViewService);\r\n\r\n  ngAfterViewInit() {\r\n    const raw = this._session.getFilter(this.gridId());\r\n\r\n    this._grid.init({\r\n      elementRef: this.tableElement,\r\n      colsMetaData: this.colsMetaData,\r\n      initialFilter: raw ?? [],\r\n      data: this.initialData(),\r\n      preset: this.preset,\r\n      // services: {\r\n      //   getData$: params => this._service.getData$<any>(this.model, params),\r\n      // },\r\n    });\r\n  }\r\n\r\n  override ngOnDestroy() {\r\n    this._grid.destroy();\r\n  }\r\n}\r\n","<div style=\"display: none\">\r\n  <div #table></div>\r\n</div>\r\n\r\n<ng-content></ng-content>\r\n","/*\r\n * Public API Surface of features\r\n */\r\n\r\nexport * from './models/types';\r\nexport * from './components/form/form.component';\r\nexport * from './components/grid/grid.component';\r\nexport * from './components/tags/tags.component';\r\nexport * from './components/control/control.component';\r\nexport * from './components/search/search.component';\r\n\r\nexport * from './components/container/container.component';\r\n","/*\r\n * Public API Surface of features\r\n */\r\n\r\nexport * from './lib/features/grid/public-api';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Tabulator"],"mappings":"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"}