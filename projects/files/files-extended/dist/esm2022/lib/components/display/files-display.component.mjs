import { AsyncPipe, NgIf } from "@angular/common";
import { Component, EventEmitter, Output, input } from "@angular/core";
import { FileListComponent } from "@ta/files-basic";
import { ToggleNavigationComponent } from "@ta/menu";
import { ErrorComponent, LoaderComponent } from "@ta/ui";
import { TaBaseComponent } from "@ta/utils";
import { UploadComponent } from "../upload/files-upload.component";
import * as i0 from "@angular/core";
export class FilesDisplayComponent extends TaBaseComponent {
    constructor() {
        super(...arguments);
        this.files$ = input.required();
        this.menu = input.required();
        this.canAddFile = input(true);
        this.tempFiles = input.required();
        this.fileType = input.required();
        this.fileSelected = new EventEmitter();
        this.moreInformationSelected = new EventEmitter();
        this.fileUploading = new EventEmitter();
    }
    get canSelectMultipleFiles() {
        switch (this.fileType()) {
            case "Document":
                return false;
            case "Image":
                return true;
            default:
                return false;
        }
    }
    get canDisplayTempsFiles() {
        return this.tempFiles()?.length > 0;
    }
    getFeature() {
        switch (this.fileType()) {
            case "Document":
                return ["upload-file"];
            case "Image":
                return ["upload-pic"];
            default:
                return [];
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: FilesDisplayComponent, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: FilesDisplayComponent, isStandalone: true, selector: "ta-files-display", inputs: { files$: { classPropertyName: "files$", publicName: "files$", isSignal: true, isRequired: true, transformFunction: null }, menu: { classPropertyName: "menu", publicName: "menu", isSignal: true, isRequired: true, transformFunction: null }, canAddFile: { classPropertyName: "canAddFile", publicName: "canAddFile", isSignal: true, isRequired: false, transformFunction: null }, tempFiles: { classPropertyName: "tempFiles", publicName: "tempFiles", isSignal: true, isRequired: true, transformFunction: null }, fileType: { classPropertyName: "fileType", publicName: "fileType", isSignal: true, isRequired: true, transformFunction: null } }, outputs: { fileSelected: "fileSelected", moreInformationSelected: "moreInformationSelected", fileUploading: "fileUploading" }, usesInheritance: true, ngImport: i0, template: "<div class=\"toggle-navigation\">\n  <ta-toggle-navigation\n    [menu]=\"this.menu()\"\n    [container]=\"'tab'\"\n  ></ta-toggle-navigation>\n</div>\n\n@if (this.canDisplayTempsFiles) {\n<div>\n  <ta-files-list [files]=\"this.tempFiles()\"></ta-files-list>\n  <hr />\n</div>\n}\n\n<ta-loader [isLoading]=\"this.requestState.isLoading()\" skeleton=\"fileList\">\n  <ta-error\n    [message]=\"this.requestState.getErrorMessage()\"\n    [code]=\"this.requestState.getErrorStatus()\"\n  >\n    <div class=\"list\">\n      <ta-files-list\n        [files]=\"(this.files$() | async) || []\"\n        (fileSelected)=\"this.fileSelected.emit($event)\"\n        (moreInformationSelected)=\"this.moreInformationSelected.emit($event)\"\n      >\n      </ta-files-list>\n    </div>\n  </ta-error>\n</ta-loader>\n\n@if (this.canAddFile() === true) {\n<div class=\"floating-add\">\n  <ta-files-upload\n    [features]=\"this.getFeature()\"\n    [canSelectMultipleFiles]=\"this.canSelectMultipleFiles\"\n    (filesPicked)=\"this.fileUploading.emit($event)\"\n  >\n  </ta-files-upload>\n</div>\n}\n", styles: [".toggle-navigation{margin-bottom:var(--ta-space-sm)}\n"], dependencies: [{ kind: "pipe", type: AsyncPipe, name: "async" }, { kind: "component", type: LoaderComponent, selector: "ta-loader", inputs: ["isLoading", "skeleton", "size", "text"] }, { kind: "component", type: ErrorComponent, selector: "ta-error", inputs: ["message", "code"] }, { kind: "component", type: UploadComponent, selector: "ta-files-upload", inputs: ["features", "canSelectMultipleFiles", "showInActionButton"], outputs: ["filesPicked"] }, { kind: "component", type: ToggleNavigationComponent, selector: "ta-toggle-navigation", inputs: ["menu", "container"] }, { kind: "component", type: FileListComponent, selector: "ta-files-list", inputs: ["files", "canDeleteFile"], outputs: ["fileSelected", "moreInformationSelected", "fileDeleted"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: FilesDisplayComponent, decorators: [{
            type: Component,
            args: [{ selector: "ta-files-display", standalone: true, imports: [
                        NgIf,
                        AsyncPipe,
                        LoaderComponent,
                        ErrorComponent,
                        UploadComponent,
                        ToggleNavigationComponent,
                        FileListComponent,
                    ], template: "<div class=\"toggle-navigation\">\n  <ta-toggle-navigation\n    [menu]=\"this.menu()\"\n    [container]=\"'tab'\"\n  ></ta-toggle-navigation>\n</div>\n\n@if (this.canDisplayTempsFiles) {\n<div>\n  <ta-files-list [files]=\"this.tempFiles()\"></ta-files-list>\n  <hr />\n</div>\n}\n\n<ta-loader [isLoading]=\"this.requestState.isLoading()\" skeleton=\"fileList\">\n  <ta-error\n    [message]=\"this.requestState.getErrorMessage()\"\n    [code]=\"this.requestState.getErrorStatus()\"\n  >\n    <div class=\"list\">\n      <ta-files-list\n        [files]=\"(this.files$() | async) || []\"\n        (fileSelected)=\"this.fileSelected.emit($event)\"\n        (moreInformationSelected)=\"this.moreInformationSelected.emit($event)\"\n      >\n      </ta-files-list>\n    </div>\n  </ta-error>\n</ta-loader>\n\n@if (this.canAddFile() === true) {\n<div class=\"floating-add\">\n  <ta-files-upload\n    [features]=\"this.getFeature()\"\n    [canSelectMultipleFiles]=\"this.canSelectMultipleFiles\"\n    (filesPicked)=\"this.fileUploading.emit($event)\"\n  >\n  </ta-files-upload>\n</div>\n}\n", styles: [".toggle-navigation{margin-bottom:var(--ta-space-sm)}\n"] }]
        }], propDecorators: { fileSelected: [{
                type: Output
            }], moreInformationSelected: [{
                type: Output
            }], fileUploading: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZXMtZGlzcGxheS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvZGlzcGxheS9maWxlcy1kaXNwbGF5LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9kaXNwbGF5L2ZpbGVzLWRpc3BsYXkuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBSXZFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3BELE9BQU8sRUFBUSx5QkFBeUIsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUMzRCxPQUFPLEVBQUUsY0FBYyxFQUFFLGVBQWUsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUN6RCxPQUFPLEVBQXFDLGVBQWUsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUUvRSxPQUFPLEVBQVcsZUFBZSxFQUFFLE1BQU0sa0NBQWtDLENBQUM7O0FBaUI1RSxNQUFNLE9BQU8scUJBQXNCLFNBQVEsZUFBZTtJQWYxRDs7UUFnQkUsV0FBTSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQTBCLENBQUM7UUFDbEQsU0FBSSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQVEsQ0FBQztRQUM5QixlQUFVLEdBQUcsS0FBSyxDQUFVLElBQUksQ0FBQyxDQUFDO1FBQ2xDLGNBQVMsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFjLENBQUM7UUFDekMsYUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQVksQ0FBQztRQUU1QixpQkFBWSxHQUNwQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ1gsNEJBQXVCLEdBQy9CLElBQUksWUFBWSxFQUFFLENBQUM7UUFDWCxrQkFBYSxHQUFrQyxJQUFJLFlBQVksRUFBRSxDQUFDO0tBMkI3RTtJQXpCQyxJQUFJLHNCQUFzQjtRQUN4QixRQUFRLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDO1lBQ3hCLEtBQUssVUFBVTtnQkFDYixPQUFPLEtBQUssQ0FBQztZQUNmLEtBQUssT0FBTztnQkFDVixPQUFPLElBQUksQ0FBQztZQUNkO2dCQUNFLE9BQU8sS0FBSyxDQUFDO1FBQ2pCLENBQUM7SUFDSCxDQUFDO0lBRUQsSUFBSSxvQkFBb0I7UUFDdEIsT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRU0sVUFBVTtRQUNmLFFBQVEsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUM7WUFDeEIsS0FBSyxVQUFVO2dCQUNiLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUN6QixLQUFLLE9BQU87Z0JBQ1YsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3hCO2dCQUNFLE9BQU8sRUFBRSxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7K0dBckNVLHFCQUFxQjttR0FBckIscUJBQXFCLHMyQkMzQmxDLDJqQ0F3Q0EsMkdEckJJLFNBQVMsOENBQ1QsZUFBZSx5R0FDZixjQUFjLGtGQUNkLGVBQWUsNEpBQ2YseUJBQXlCLGdHQUN6QixpQkFBaUI7OzRGQUdSLHFCQUFxQjtrQkFmakMsU0FBUzsrQkFDRSxrQkFBa0IsY0FHaEIsSUFBSSxXQUNQO3dCQUNQLElBQUk7d0JBQ0osU0FBUzt3QkFDVCxlQUFlO3dCQUNmLGNBQWM7d0JBQ2QsZUFBZTt3QkFDZix5QkFBeUI7d0JBQ3pCLGlCQUFpQjtxQkFDbEI7OEJBU1MsWUFBWTtzQkFBckIsTUFBTTtnQkFFRyx1QkFBdUI7c0JBQWhDLE1BQU07Z0JBRUcsYUFBYTtzQkFBdEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jUGlwZSwgTmdJZiB9IGZyb20gXCJAYW5ndWxhci9jb21tb25cIjtcbmltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBPdXRwdXQsIGlucHV0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcblxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJyeGpzXCI7XG5cbmltcG9ydCB7IEZpbGVMaXN0Q29tcG9uZW50IH0gZnJvbSBcIkB0YS9maWxlcy1iYXNpY1wiO1xuaW1wb3J0IHsgTWVudSwgVG9nZ2xlTmF2aWdhdGlvbkNvbXBvbmVudCB9IGZyb20gXCJAdGEvbWVudVwiO1xuaW1wb3J0IHsgRXJyb3JDb21wb25lbnQsIExvYWRlckNvbXBvbmVudCB9IGZyb20gXCJAdGEvdWlcIjtcbmltcG9ydCB7IEZpbGVEYXRhLCBGaWxlU3RydWN0dXJlLCBGaWxlVHlwZSwgVGFCYXNlQ29tcG9uZW50IH0gZnJvbSBcIkB0YS91dGlsc1wiO1xuXG5pbXBvcnQgeyBGZWF0dXJlLCBVcGxvYWRDb21wb25lbnQgfSBmcm9tIFwiLi4vdXBsb2FkL2ZpbGVzLXVwbG9hZC5jb21wb25lbnRcIjtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcInRhLWZpbGVzLWRpc3BsYXlcIixcbiAgdGVtcGxhdGVVcmw6IFwiLi9maWxlcy1kaXNwbGF5LmNvbXBvbmVudC5odG1sXCIsXG4gIHN0eWxlVXJsczogW1wiLi9maWxlcy1kaXNwbGF5LmNvbXBvbmVudC5zY3NzXCJdLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgTmdJZixcbiAgICBBc3luY1BpcGUsXG4gICAgTG9hZGVyQ29tcG9uZW50LFxuICAgIEVycm9yQ29tcG9uZW50LFxuICAgIFVwbG9hZENvbXBvbmVudCxcbiAgICBUb2dnbGVOYXZpZ2F0aW9uQ29tcG9uZW50LFxuICAgIEZpbGVMaXN0Q29tcG9uZW50LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBGaWxlc0Rpc3BsYXlDb21wb25lbnQgZXh0ZW5kcyBUYUJhc2VDb21wb25lbnQge1xuICBmaWxlcyQgPSBpbnB1dC5yZXF1aXJlZDxPYnNlcnZhYmxlPEZpbGVEYXRhW10+PigpO1xuICBtZW51ID0gaW5wdXQucmVxdWlyZWQ8TWVudT4oKTtcbiAgY2FuQWRkRmlsZSA9IGlucHV0PGJvb2xlYW4+KHRydWUpO1xuICB0ZW1wRmlsZXMgPSBpbnB1dC5yZXF1aXJlZDxGaWxlRGF0YVtdPigpO1xuICBmaWxlVHlwZSA9IGlucHV0LnJlcXVpcmVkPEZpbGVUeXBlPigpO1xuXG4gIEBPdXRwdXQoKSBmaWxlU2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxGaWxlRGF0YSAmIHsgaW5kZXg6IG51bWJlciB9PiA9XG4gICAgbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgbW9yZUluZm9ybWF0aW9uU2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxGaWxlRGF0YT4gPVxuICAgIG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIGZpbGVVcGxvYWRpbmc6IEV2ZW50RW1pdHRlcjxGaWxlU3RydWN0dXJlW10+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIGdldCBjYW5TZWxlY3RNdWx0aXBsZUZpbGVzKCk6IGJvb2xlYW4ge1xuICAgIHN3aXRjaCAodGhpcy5maWxlVHlwZSgpKSB7XG4gICAgICBjYXNlIFwiRG9jdW1lbnRcIjpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgY2FzZSBcIkltYWdlXCI6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGdldCBjYW5EaXNwbGF5VGVtcHNGaWxlcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50ZW1wRmlsZXMoKT8ubGVuZ3RoID4gMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRGZWF0dXJlKCk6IEZlYXR1cmVbXSB7XG4gICAgc3dpdGNoICh0aGlzLmZpbGVUeXBlKCkpIHtcbiAgICAgIGNhc2UgXCJEb2N1bWVudFwiOlxuICAgICAgICByZXR1cm4gW1widXBsb2FkLWZpbGVcIl07XG4gICAgICBjYXNlIFwiSW1hZ2VcIjpcbiAgICAgICAgcmV0dXJuIFtcInVwbG9hZC1waWNcIl07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwidG9nZ2xlLW5hdmlnYXRpb25cIj5cbiAgPHRhLXRvZ2dsZS1uYXZpZ2F0aW9uXG4gICAgW21lbnVdPVwidGhpcy5tZW51KClcIlxuICAgIFtjb250YWluZXJdPVwiJ3RhYidcIlxuICA+PC90YS10b2dnbGUtbmF2aWdhdGlvbj5cbjwvZGl2PlxuXG5AaWYgKHRoaXMuY2FuRGlzcGxheVRlbXBzRmlsZXMpIHtcbjxkaXY+XG4gIDx0YS1maWxlcy1saXN0IFtmaWxlc109XCJ0aGlzLnRlbXBGaWxlcygpXCI+PC90YS1maWxlcy1saXN0PlxuICA8aHIgLz5cbjwvZGl2PlxufVxuXG48dGEtbG9hZGVyIFtpc0xvYWRpbmddPVwidGhpcy5yZXF1ZXN0U3RhdGUuaXNMb2FkaW5nKClcIiBza2VsZXRvbj1cImZpbGVMaXN0XCI+XG4gIDx0YS1lcnJvclxuICAgIFttZXNzYWdlXT1cInRoaXMucmVxdWVzdFN0YXRlLmdldEVycm9yTWVzc2FnZSgpXCJcbiAgICBbY29kZV09XCJ0aGlzLnJlcXVlc3RTdGF0ZS5nZXRFcnJvclN0YXR1cygpXCJcbiAgPlxuICAgIDxkaXYgY2xhc3M9XCJsaXN0XCI+XG4gICAgICA8dGEtZmlsZXMtbGlzdFxuICAgICAgICBbZmlsZXNdPVwiKHRoaXMuZmlsZXMkKCkgfCBhc3luYykgfHwgW11cIlxuICAgICAgICAoZmlsZVNlbGVjdGVkKT1cInRoaXMuZmlsZVNlbGVjdGVkLmVtaXQoJGV2ZW50KVwiXG4gICAgICAgIChtb3JlSW5mb3JtYXRpb25TZWxlY3RlZCk9XCJ0aGlzLm1vcmVJbmZvcm1hdGlvblNlbGVjdGVkLmVtaXQoJGV2ZW50KVwiXG4gICAgICA+XG4gICAgICA8L3RhLWZpbGVzLWxpc3Q+XG4gICAgPC9kaXY+XG4gIDwvdGEtZXJyb3I+XG48L3RhLWxvYWRlcj5cblxuQGlmICh0aGlzLmNhbkFkZEZpbGUoKSA9PT0gdHJ1ZSkge1xuPGRpdiBjbGFzcz1cImZsb2F0aW5nLWFkZFwiPlxuICA8dGEtZmlsZXMtdXBsb2FkXG4gICAgW2ZlYXR1cmVzXT1cInRoaXMuZ2V0RmVhdHVyZSgpXCJcbiAgICBbY2FuU2VsZWN0TXVsdGlwbGVGaWxlc109XCJ0aGlzLmNhblNlbGVjdE11bHRpcGxlRmlsZXNcIlxuICAgIChmaWxlc1BpY2tlZCk9XCJ0aGlzLmZpbGVVcGxvYWRpbmcuZW1pdCgkZXZlbnQpXCJcbiAgPlxuICA8L3RhLWZpbGVzLXVwbG9hZD5cbjwvZGl2PlxufVxuIl19