import { AsyncPipe } from '@angular/common';
import { Component, EventEmitter, Output, input } from '@angular/core';
import { FileListComponent } from '@ta/files-basic';
import { NavigationComponent } from '@ta/menu';
import { ErrorComponent, LoaderComponent } from '@ta/ui';
import { TaBaseComponent } from '@ta/utils';
import { UploadComponent } from '../upload/files-upload.component';
import * as i0 from "@angular/core";
export class FilesDisplayComponent extends TaBaseComponent {
    constructor() {
        super(...arguments);
        this.files$ = input.required();
        this.menu = input.required();
        this.canAddFile = input(true);
        this.tempFiles = input.required();
        this.fileType = input.required();
        this.fileSelected = new EventEmitter();
        this.moreInformationSelected = new EventEmitter();
        this.fileUploading = new EventEmitter();
    }
    get canSelectMultipleFiles() {
        switch (this.fileType()) {
            case 'Document':
                return false;
            case 'Image':
                return true;
            default:
                return false;
        }
    }
    get canDisplayTempsFiles() {
        return this.tempFiles()?.length > 0;
    }
    getFeature() {
        switch (this.fileType()) {
            case 'Document':
                return ['upload-file'];
            case 'Image':
                return ['upload-pic'];
            default:
                return [];
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: FilesDisplayComponent, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: FilesDisplayComponent, isStandalone: true, selector: "ta-files-display", inputs: { files$: { classPropertyName: "files$", publicName: "files$", isSignal: true, isRequired: true, transformFunction: null }, menu: { classPropertyName: "menu", publicName: "menu", isSignal: true, isRequired: true, transformFunction: null }, canAddFile: { classPropertyName: "canAddFile", publicName: "canAddFile", isSignal: true, isRequired: false, transformFunction: null }, tempFiles: { classPropertyName: "tempFiles", publicName: "tempFiles", isSignal: true, isRequired: true, transformFunction: null }, fileType: { classPropertyName: "fileType", publicName: "fileType", isSignal: true, isRequired: true, transformFunction: null } }, outputs: { fileSelected: "fileSelected", moreInformationSelected: "moreInformationSelected", fileUploading: "fileUploading" }, usesInheritance: true, ngImport: i0, template: "<div class=\"toggle-navigation\">\n  <ta-menu-navigation [menu]=\"this.menu()\" [container]=\"'tab'\"></ta-menu-navigation>\n</div>\n\n@if (this.canDisplayTempsFiles) {\n  <div>\n    <ta-files-list [files]=\"this.tempFiles()\"></ta-files-list>\n    <hr />\n  </div>\n}\n\n<ta-loader [isLoading]=\"this.requestState.isLoading()\" skeleton=\"fileList\">\n  <ta-error [message]=\"this.requestState.getErrorMessage()\" [code]=\"this.requestState.getErrorStatus()\">\n    <div class=\"list\">\n      <ta-files-list\n        [files]=\"(this.files$() | async) || []\"\n        (fileSelected)=\"this.fileSelected.emit($event)\"\n        (moreInformationSelected)=\"this.moreInformationSelected.emit($event)\"\n      ></ta-files-list>\n    </div>\n  </ta-error>\n</ta-loader>\n\n@if (this.canAddFile() === true) {\n  <div class=\"floating-add\">\n    <ta-files-upload\n      [features]=\"this.getFeature()\"\n      [canSelectMultipleFiles]=\"this.canSelectMultipleFiles\"\n      (filesPicked)=\"this.fileUploading.emit($event)\"\n    ></ta-files-upload>\n  </div>\n}\n", styles: [".toggle-navigation{margin-bottom:var(--ta-space-sm)}\n"], dependencies: [{ kind: "pipe", type: AsyncPipe, name: "async" }, { kind: "component", type: LoaderComponent, selector: "ta-loader", inputs: ["isLoading", "skeleton", "size", "text"] }, { kind: "component", type: ErrorComponent, selector: "ta-error", inputs: ["message", "code"] }, { kind: "component", type: UploadComponent, selector: "ta-files-upload", inputs: ["features", "canSelectMultipleFiles", "showInActionButton"], outputs: ["filesPicked"] }, { kind: "component", type: FileListComponent, selector: "ta-files-list", inputs: ["files", "canDeleteFile"], outputs: ["fileSelected", "moreInformationSelected", "fileDeleted"] }, { kind: "component", type: NavigationComponent, selector: "ta-menu-navigation", inputs: ["menu", "container", "swiper", "options", "manuallyChanged$"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: FilesDisplayComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-files-display', standalone: true, imports: [AsyncPipe, LoaderComponent, ErrorComponent, UploadComponent, FileListComponent, NavigationComponent], template: "<div class=\"toggle-navigation\">\n  <ta-menu-navigation [menu]=\"this.menu()\" [container]=\"'tab'\"></ta-menu-navigation>\n</div>\n\n@if (this.canDisplayTempsFiles) {\n  <div>\n    <ta-files-list [files]=\"this.tempFiles()\"></ta-files-list>\n    <hr />\n  </div>\n}\n\n<ta-loader [isLoading]=\"this.requestState.isLoading()\" skeleton=\"fileList\">\n  <ta-error [message]=\"this.requestState.getErrorMessage()\" [code]=\"this.requestState.getErrorStatus()\">\n    <div class=\"list\">\n      <ta-files-list\n        [files]=\"(this.files$() | async) || []\"\n        (fileSelected)=\"this.fileSelected.emit($event)\"\n        (moreInformationSelected)=\"this.moreInformationSelected.emit($event)\"\n      ></ta-files-list>\n    </div>\n  </ta-error>\n</ta-loader>\n\n@if (this.canAddFile() === true) {\n  <div class=\"floating-add\">\n    <ta-files-upload\n      [features]=\"this.getFeature()\"\n      [canSelectMultipleFiles]=\"this.canSelectMultipleFiles\"\n      (filesPicked)=\"this.fileUploading.emit($event)\"\n    ></ta-files-upload>\n  </div>\n}\n", styles: [".toggle-navigation{margin-bottom:var(--ta-space-sm)}\n"] }]
        }], propDecorators: { fileSelected: [{
                type: Output
            }], moreInformationSelected: [{
                type: Output
            }], fileUploading: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZXMtZGlzcGxheS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvZGlzcGxheS9maWxlcy1kaXNwbGF5LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9kaXNwbGF5L2ZpbGVzLWRpc3BsYXkuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzVDLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFJdkUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDcEQsT0FBTyxFQUFRLG1CQUFtQixFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQ3JELE9BQU8sRUFBRSxjQUFjLEVBQUUsZUFBZSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ3pELE9BQU8sRUFBcUMsZUFBZSxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRS9FLE9BQU8sRUFBVyxlQUFlLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQzs7QUFTNUUsTUFBTSxPQUFPLHFCQUFzQixTQUFRLGVBQWU7SUFQMUQ7O1FBUUUsV0FBTSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQTBCLENBQUM7UUFDbEQsU0FBSSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQVEsQ0FBQztRQUM5QixlQUFVLEdBQUcsS0FBSyxDQUFVLElBQUksQ0FBQyxDQUFDO1FBQ2xDLGNBQVMsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFjLENBQUM7UUFDekMsYUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQVksQ0FBQztRQUU1QixpQkFBWSxHQUErQyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQzlFLDRCQUF1QixHQUEyQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ3JFLGtCQUFhLEdBQWtDLElBQUksWUFBWSxFQUFFLENBQUM7S0EyQjdFO0lBekJDLElBQUksc0JBQXNCO1FBQ3hCLFFBQVEsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUM7WUFDeEIsS0FBSyxVQUFVO2dCQUNiLE9BQU8sS0FBSyxDQUFDO1lBQ2YsS0FBSyxPQUFPO2dCQUNWLE9BQU8sSUFBSSxDQUFDO1lBQ2Q7Z0JBQ0UsT0FBTyxLQUFLLENBQUM7UUFDakIsQ0FBQztJQUNILENBQUM7SUFFRCxJQUFJLG9CQUFvQjtRQUN0QixPQUFPLElBQUksQ0FBQyxTQUFTLEVBQUUsRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFTSxVQUFVO1FBQ2YsUUFBUSxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQztZQUN4QixLQUFLLFVBQVU7Z0JBQ2IsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3pCLEtBQUssT0FBTztnQkFDVixPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDeEI7Z0JBQ0UsT0FBTyxFQUFFLENBQUM7UUFDZCxDQUFDO0lBQ0gsQ0FBQzsrR0FuQ1UscUJBQXFCO21HQUFyQixxQkFBcUIsczJCQ25CbEMscWlDQWdDQSwyR0RmWSxTQUFTLDhDQUFFLGVBQWUseUdBQUUsY0FBYyxrRkFBRSxlQUFlLDRKQUFFLGlCQUFpQixtS0FBRSxtQkFBbUI7OzRGQUVsRyxxQkFBcUI7a0JBUGpDLFNBQVM7K0JBQ0Usa0JBQWtCLGNBR2hCLElBQUksV0FDUCxDQUFDLFNBQVMsRUFBRSxlQUFlLEVBQUUsY0FBYyxFQUFFLGVBQWUsRUFBRSxpQkFBaUIsRUFBRSxtQkFBbUIsQ0FBQzs4QkFTcEcsWUFBWTtzQkFBckIsTUFBTTtnQkFDRyx1QkFBdUI7c0JBQWhDLE1BQU07Z0JBQ0csYUFBYTtzQkFBdEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jUGlwZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBpbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IEZpbGVMaXN0Q29tcG9uZW50IH0gZnJvbSAnQHRhL2ZpbGVzLWJhc2ljJztcbmltcG9ydCB7IE1lbnUsIE5hdmlnYXRpb25Db21wb25lbnQgfSBmcm9tICdAdGEvbWVudSc7XG5pbXBvcnQgeyBFcnJvckNvbXBvbmVudCwgTG9hZGVyQ29tcG9uZW50IH0gZnJvbSAnQHRhL3VpJztcbmltcG9ydCB7IEZpbGVEYXRhLCBGaWxlU3RydWN0dXJlLCBGaWxlVHlwZSwgVGFCYXNlQ29tcG9uZW50IH0gZnJvbSAnQHRhL3V0aWxzJztcblxuaW1wb3J0IHsgRmVhdHVyZSwgVXBsb2FkQ29tcG9uZW50IH0gZnJvbSAnLi4vdXBsb2FkL2ZpbGVzLXVwbG9hZC5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0YS1maWxlcy1kaXNwbGF5JyxcbiAgdGVtcGxhdGVVcmw6ICcuL2ZpbGVzLWRpc3BsYXkuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9maWxlcy1kaXNwbGF5LmNvbXBvbmVudC5zY3NzJ10sXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtBc3luY1BpcGUsIExvYWRlckNvbXBvbmVudCwgRXJyb3JDb21wb25lbnQsIFVwbG9hZENvbXBvbmVudCwgRmlsZUxpc3RDb21wb25lbnQsIE5hdmlnYXRpb25Db21wb25lbnRdLFxufSlcbmV4cG9ydCBjbGFzcyBGaWxlc0Rpc3BsYXlDb21wb25lbnQgZXh0ZW5kcyBUYUJhc2VDb21wb25lbnQge1xuICBmaWxlcyQgPSBpbnB1dC5yZXF1aXJlZDxPYnNlcnZhYmxlPEZpbGVEYXRhW10+PigpO1xuICBtZW51ID0gaW5wdXQucmVxdWlyZWQ8TWVudT4oKTtcbiAgY2FuQWRkRmlsZSA9IGlucHV0PGJvb2xlYW4+KHRydWUpO1xuICB0ZW1wRmlsZXMgPSBpbnB1dC5yZXF1aXJlZDxGaWxlRGF0YVtdPigpO1xuICBmaWxlVHlwZSA9IGlucHV0LnJlcXVpcmVkPEZpbGVUeXBlPigpO1xuXG4gIEBPdXRwdXQoKSBmaWxlU2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxGaWxlRGF0YSAmIHsgaW5kZXg6IG51bWJlciB9PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG1vcmVJbmZvcm1hdGlvblNlbGVjdGVkOiBFdmVudEVtaXR0ZXI8RmlsZURhdGE+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgZmlsZVVwbG9hZGluZzogRXZlbnRFbWl0dGVyPEZpbGVTdHJ1Y3R1cmVbXT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgZ2V0IGNhblNlbGVjdE11bHRpcGxlRmlsZXMoKTogYm9vbGVhbiB7XG4gICAgc3dpdGNoICh0aGlzLmZpbGVUeXBlKCkpIHtcbiAgICAgIGNhc2UgJ0RvY3VtZW50JzpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgY2FzZSAnSW1hZ2UnOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBnZXQgY2FuRGlzcGxheVRlbXBzRmlsZXMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGVtcEZpbGVzKCk/Lmxlbmd0aCA+IDA7XG4gIH1cblxuICBwdWJsaWMgZ2V0RmVhdHVyZSgpOiBGZWF0dXJlW10ge1xuICAgIHN3aXRjaCAodGhpcy5maWxlVHlwZSgpKSB7XG4gICAgICBjYXNlICdEb2N1bWVudCc6XG4gICAgICAgIHJldHVybiBbJ3VwbG9hZC1maWxlJ107XG4gICAgICBjYXNlICdJbWFnZSc6XG4gICAgICAgIHJldHVybiBbJ3VwbG9hZC1waWMnXTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJ0b2dnbGUtbmF2aWdhdGlvblwiPlxuICA8dGEtbWVudS1uYXZpZ2F0aW9uIFttZW51XT1cInRoaXMubWVudSgpXCIgW2NvbnRhaW5lcl09XCIndGFiJ1wiPjwvdGEtbWVudS1uYXZpZ2F0aW9uPlxuPC9kaXY+XG5cbkBpZiAodGhpcy5jYW5EaXNwbGF5VGVtcHNGaWxlcykge1xuICA8ZGl2PlxuICAgIDx0YS1maWxlcy1saXN0IFtmaWxlc109XCJ0aGlzLnRlbXBGaWxlcygpXCI+PC90YS1maWxlcy1saXN0PlxuICAgIDxociAvPlxuICA8L2Rpdj5cbn1cblxuPHRhLWxvYWRlciBbaXNMb2FkaW5nXT1cInRoaXMucmVxdWVzdFN0YXRlLmlzTG9hZGluZygpXCIgc2tlbGV0b249XCJmaWxlTGlzdFwiPlxuICA8dGEtZXJyb3IgW21lc3NhZ2VdPVwidGhpcy5yZXF1ZXN0U3RhdGUuZ2V0RXJyb3JNZXNzYWdlKClcIiBbY29kZV09XCJ0aGlzLnJlcXVlc3RTdGF0ZS5nZXRFcnJvclN0YXR1cygpXCI+XG4gICAgPGRpdiBjbGFzcz1cImxpc3RcIj5cbiAgICAgIDx0YS1maWxlcy1saXN0XG4gICAgICAgIFtmaWxlc109XCIodGhpcy5maWxlcyQoKSB8IGFzeW5jKSB8fCBbXVwiXG4gICAgICAgIChmaWxlU2VsZWN0ZWQpPVwidGhpcy5maWxlU2VsZWN0ZWQuZW1pdCgkZXZlbnQpXCJcbiAgICAgICAgKG1vcmVJbmZvcm1hdGlvblNlbGVjdGVkKT1cInRoaXMubW9yZUluZm9ybWF0aW9uU2VsZWN0ZWQuZW1pdCgkZXZlbnQpXCJcbiAgICAgID48L3RhLWZpbGVzLWxpc3Q+XG4gICAgPC9kaXY+XG4gIDwvdGEtZXJyb3I+XG48L3RhLWxvYWRlcj5cblxuQGlmICh0aGlzLmNhbkFkZEZpbGUoKSA9PT0gdHJ1ZSkge1xuICA8ZGl2IGNsYXNzPVwiZmxvYXRpbmctYWRkXCI+XG4gICAgPHRhLWZpbGVzLXVwbG9hZFxuICAgICAgW2ZlYXR1cmVzXT1cInRoaXMuZ2V0RmVhdHVyZSgpXCJcbiAgICAgIFtjYW5TZWxlY3RNdWx0aXBsZUZpbGVzXT1cInRoaXMuY2FuU2VsZWN0TXVsdGlwbGVGaWxlc1wiXG4gICAgICAoZmlsZXNQaWNrZWQpPVwidGhpcy5maWxlVXBsb2FkaW5nLmVtaXQoJGV2ZW50KVwiXG4gICAgPjwvdGEtZmlsZXMtdXBsb2FkPlxuICA8L2Rpdj5cbn1cbiJdfQ==