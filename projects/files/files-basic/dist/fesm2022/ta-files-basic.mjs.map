{"version":3,"file":"ta-files-basic.mjs","sources":["../../src/lib/components/list/card/file/file-card.component.ts","../../src/lib/components/list/card/file/file-card.component.html","../../src/lib/components/list/files-list.component.ts","../../src/lib/components/list/files-list.component.html","../../src/lib/components/edit/files-edit.component.ts","../../src/lib/components/edit/files-edit.component.html","../../src/lib/components/documents/list/list.component.ts","../../src/lib/components/documents/list/list.component.html","../../src/lib/files-basic.module.ts","../../src/public-api.ts","../../src/ta-files-basic.ts"],"sourcesContent":["import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { FontIconComponent, LocalIconComponent } from \"@ta/icons\";\nimport { TaIconType } from \"@ta/icons\";\nimport {\n  BadgeComponent,\n  CardComponent,\n  CardContentComponent,\n  CardCtaComponent,\n  CardHeaderComponent,\n  CardTagComponent,\n  CardTitleComponent,\n  TitleComponent,\n  TrigramComponent,\n} from \"@ta/ui\";\nimport { EFileExtension, FileData } from \"@ta/utils\";\n\n@Component({\n  selector: \"ta-file-card\",\n  templateUrl: \"./file-card.component.html\",\n  styleUrls: [\"./file-card.component.scss\"],\n  standalone: true,\n  imports: [\n    BadgeComponent,\n    CardComponent,\n    CardContentComponent,\n    CardCtaComponent,\n    CardHeaderComponent,\n    CardTagComponent,\n    CardTitleComponent,\n    FontIconComponent,\n    LocalIconComponent,\n    TitleComponent,\n    TrigramComponent,\n  ],\n})\nexport class FileCardComponent {\n  @Input() file!: FileData;\n\n  @Output()\n  fileSelected: EventEmitter<FileData> = new EventEmitter<FileData>();\n\n  @Output()\n  moreInformationSelected: EventEmitter<FileData> =\n    new EventEmitter<FileData>();\n\n  get localIcon() {\n    switch (this.file.fileExtension) {\n      case EFileExtension.PDF:\n        return TaIconType.Pdf;\n      case EFileExtension.Word:\n        return TaIconType.Doc;\n      case EFileExtension.Excel:\n        return TaIconType.Excel;\n      case EFileExtension.Image:\n        return TaIconType.Image;\n      default:\n        return TaIconType.UnknownFile;\n    }\n  }\n\n  get fileType(): string | null {\n    return this.file.fileMetaData?.fileType?.translatedValue || null;\n  }\n\n  get userTrigram(): string | null {\n    return this.file.fileMetaData?.owner?.naming?.trigram || null;\n  }\n\n  get fileSize(): number | null {\n    return this.file.fileMetaData?.fileSize || null;\n  }\n\n  get fileName(): string | null {\n    return this.file.fileMetaData?.fileName || null;\n  }\n\n  public onHeaderClicked() {\n    this.moreInformationSelected.emit(this.file);\n  }\n\n  public onBodyClicked() {\n    this.fileSelected.emit(this.file);\n  }\n}\n","<ta-card>\n  <ta-card-header>\n    <ta-card-tag class=\"space-between\">\n      <ta-trigram [value]=\"this.userTrigram\"> </ta-trigram>\n      <div (click)=\"this.onHeaderClicked()\">\n        <ta-font-icon name=\"more\" size=\"xs\"></ta-font-icon>\n      </div>\n    </ta-card-tag>\n    <ta-card-title>\n      <ta-title [level]=\"4\">{{ this.fileName }}</ta-title>\n    </ta-card-title>\n  </ta-card-header>\n  <ta-card-content>\n    <div (click)=\"this.onBodyClicked()\">\n      <ta-local-icon [type]=\"this.localIcon\" size=\"md\"></ta-local-icon>\n    </div>\n  </ta-card-content>\n  <ta-card-cta>\n    <ta-badge [value]=\"this.fileType ?? ''\"> </ta-badge>\n  </ta-card-cta>\n</ta-card>\n","import { NgFor, NgIf } from \"@angular/common\";\nimport { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { FontIconComponent, LocalIconComponent } from \"@ta/icons\";\nimport { EmptyComponent } from \"@ta/ui\";\nimport {\n  FileData,\n  FileType,\n  SafePipe,\n  StopPropagationDirective,\n  TaBaseComponent,\n} from \"@ta/utils\";\n\nimport { FileCardComponent } from \"./card/file/file-card.component\";\n\n@Component({\n  selector: \"ta-files-list\",\n  templateUrl: \"./files-list.component.html\",\n  styleUrls: [\"./files-list.component.scss\"],\n  standalone: true,\n  imports: [\n    NgIf,\n    NgFor,\n    EmptyComponent,\n    FileCardComponent,\n    FontIconComponent,\n    LocalIconComponent,\n    SafePipe,\n    StopPropagationDirective,\n  ],\n})\nexport class FileListComponent extends TaBaseComponent {\n  @Input()\n  files: FileData[] = [];\n\n  @Input()\n  canDeleteFile: boolean = false;\n\n  @Output()\n  fileSelected = new EventEmitter<FileData & { index: number }>();\n\n  @Output()\n  moreInformationSelected: EventEmitter<FileData> =\n    new EventEmitter<FileData>();\n\n  @Output()\n  fileDeleted = new EventEmitter<FileData>();\n\n  constructor() {\n    super();\n  }\n\n  public canDisplayFileType(fileType: FileType): boolean {\n    if (this.files && this.files[0]) return this.files[0].type === fileType;\n\n    return false;\n  }\n\n  public onFileSelected(file: FileData, index: number) {\n    if (file.isLoading) return;\n\n    this.fileSelected.emit({ ...file, ...{ index } });\n  }\n\n  public onMoreInformationSelected(file: FileData) {\n    if (file.isLoading) return;\n\n    this.moreInformationSelected.emit(file);\n  }\n\n  public deleteFile(fileData: FileData) {\n    this.fileDeleted.emit(fileData);\n  }\n}\n","<ta-empty [isEmpty]=\"this.files.length === 0\">\n  @if (this.canDisplayFileType('Image')) {\n  <div class=\"files-container\">\n    @for (file of this.files; track this.trackById($index, file); let i =\n    $index) {\n    <div class=\"info-container\" (click)=\"this.onFileSelected(file, i)\">\n      @if (this.canDeleteFile) {\n      <div class=\"delete\" (click)=\"this.deleteFile(file)\" appStopPropagation>\n        <div class=\"delete-icon\">\n          <ta-font-icon type=\"sm\" name=\"close\"></ta-font-icon>\n        </div>\n      </div>\n      } @if (file.type === 'Image') {\n      <img [src]=\"file.thumbnailUrl || file.url | safe : 'url'\" />\n      } @else if (file.type === 'Document') {\n      <ta-file-card [file]=\"file\"></ta-file-card>\n      } @if (file.isLoading) {\n      <div class=\"is-loading\">\n        <ta-local-icon\n          class=\"align-middle\"\n          [rotation]=\"file.isLoading\"\n          [type]=\"this.icon.Loader\"\n          [size]=\"'xs'\"\n        ></ta-local-icon>\n      </div>\n      } @if (file.isSelected) {\n      <div class=\"is-selected\">\n        <ta-local-icon\n          class=\"align-middle\"\n          [type]=\"this.icon.Checked\"\n          [size]=\"'xs'\"\n        ></ta-local-icon>\n      </div>\n      }\n    </div>\n    }\n  </div>\n  } @if (canDisplayFileType('Document')) {\n  <div class=\"row g-2 row-cols-1 row-cols-md-2 row-cols-xl-3 mb-space-lg\">\n    @for (file of this.files; track this.trackById($index, file); let i =\n    $index) {\n    <div>\n      @if (file.type === 'Document') {\n      <ta-file-card\n        (fileSelected)=\"this.onFileSelected(file, i)\"\n        (moreInformationSelected)=\"this.onMoreInformationSelected(file)\"\n        [file]=\"file\"\n      ></ta-file-card>\n      }\n    </div>\n    }\n  </div>\n  }\n</ta-empty>\n","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n} from \"@angular/core\";\n\nimport { NgIf, NgFor, NgClass } from \"@angular/common\";\nimport { FontIconComponent, MaterialIconComponent } from \"@ta/icons\";\nimport { InputSlider } from \"@ta/form-model\";\nimport { LoaderComponent } from \"@ta/ui\";\nimport {\n  TaBaseComponent,\n  determineNewSize,\n  getBlobImage,\n  isLight,\n} from \"@ta/utils\";\nimport { Observable } from \"rxjs\";\nimport ImageEditor from \"tui-image-editor\";\n\ntype Selection = \"line\" | \"shape\" | \"text\" | \"\";\ntype ShapeSelection = \"rect\" | \"triangle\" | \"circle\" | \"line\" | \"\";\n\n@Component({\n  selector: \"ta-files-edit\",\n  templateUrl: \"./files-edit.component.html\",\n  styleUrls: [\"./files-edit.component.scss\"],\n  standalone: true,\n  imports: [\n    NgIf,\n    NgFor,\n    NgClass,\n    FontIconComponent,\n    LoaderComponent,\n    MaterialIconComponent,\n  ],\n})\nexport class FileEditComponent\n  extends TaBaseComponent\n  implements OnInit, AfterViewInit, OnDestroy\n{\n  @Input()\n  imagePath!: string;\n\n  @Input()\n  saveImage$!: Observable<null>;\n\n  @Output()\n  savedImage: EventEmitter<Blob> = new EventEmitter();\n\n  public tuiImageEditor!: ImageEditor;\n\n  // control\n  public selection: Selection = \"\";\n  public shapeSelection: ShapeSelection = \"\";\n\n  public colorHexa: string = \"#000000\";\n  public colorList: string[] = [\n    \"#ff0d00\",\n    \"#ffa200\",\n    \"#f4ff1f\",\n    \"#34e610\",\n    \"#147001\",\n    \"#00cad1\",\n    \"#0034d1\",\n    \"#3d009e\",\n    \"#000000\",\n    \"#ffffff\",\n  ];\n\n  public objectActivated = null;\n\n  public brushSize: number = 20;\n  public slider = new InputSlider({\n    key: \"slider\",\n    class: \"w-100\",\n    max: 50,\n  });\n\n  public readonly isLight = isLight;\n\n  @ViewChild(\"containerRef\")\n  private _containerRef!: ElementRef<HTMLDivElement>;\n\n  @ViewChild(\"tuiRef\")\n  private _tuiRef!: ElementRef<HTMLDivElement>;\n  private _canvasSize: { width: number; height: number } = {\n    width: 0,\n    height: 0,\n  };\n\n  private _intoDrawing = false;\n\n  constructor() {\n    super();\n\n    this.slider.value = this.brushSize;\n    this.slider.createFormControl();\n    this.slider.changeValue$.subscribe((value) =>\n      this.changeBrushSize(value ?? 0)\n    );\n\n    window.addEventListener(\"keyup\", this.keyPress);\n  }\n\n  ngOnInit() {\n    if (this.saveImage$) {\n      this._registerSubscription(\n        this.saveImage$.subscribe(() => {\n          this.onSaveClick();\n        })\n      );\n    }\n  }\n\n  override ngOnDestroy(): void {\n    window.removeEventListener(\"keyup\", this.keyPress);\n\n    this.tuiImageEditor.destroy();\n  }\n  public ngAfterViewInit() {\n    this._createImageEditor();\n  }\n\n  public getHeight(): string {\n    return `${this._canvasSize.height}px`;\n  }\n  public getWidth(): string {\n    return `${this._canvasSize.width}px`;\n  }\n\n  public keyPress(event: KeyboardEvent): void {\n    if (event.key === \"Enter\") {\n      this._stopDrawing();\n    }\n  }\n  // control\n  public showPanel() {\n    return this.selection !== \"\" && !this._intoDrawing;\n  }\n  public changeSelection(newSelection: Selection) {\n    this.selection = newSelection;\n    this._intoDrawing = false;\n\n    if (!this.selection) {\n      this._stopDrawing();\n      return;\n    }\n\n    if (this.selection === \"line\") {\n      this.drawing(\"FREE_DRAWING\");\n      this.changeShapeSelection(\"\");\n      return;\n    }\n    if (this.selection === \"shape\") {\n      if (!this.shapeSelection) {\n        this.changeShapeSelection(\"line\");\n      }\n      return;\n    }\n    if (this.selection === \"text\") {\n      this.text();\n      this.changeShapeSelection(\"\");\n\n      return;\n    }\n  }\n  public changeShapeSelection(newSelection: ShapeSelection) {\n    this.shapeSelection = newSelection;\n\n    if (!this.shapeSelection) {\n      return;\n    }\n    if (this.shapeSelection === \"line\") {\n      this.drawing(\"LINE_DRAWING\");\n      return;\n    }\n\n    this.shape(this.shapeSelection);\n  }\n\n  public undo() {\n    this.tuiImageEditor.discardSelection();\n    this.tuiImageEditor.undo();\n  }\n  public redo() {\n    this.tuiImageEditor.discardSelection();\n    this.tuiImageEditor.redo();\n  }\n\n  public shape(type: \"rect\" | \"circle\" | \"triangle\") {\n    this._stopDrawing();\n    this.tuiImageEditor.setDrawingShape(type, this._getSettings());\n    this.tuiImageEditor.startDrawingMode(\"SHAPE\");\n  }\n\n  public drawing(type: \"LINE_DRAWING\" | \"FREE_DRAWING\") {\n    this._stopDrawing();\n    this.tuiImageEditor.startDrawingMode(type, this._getSettings());\n  }\n\n  public text() {\n    this._stopDrawing();\n    this.tuiImageEditor.startDrawingMode(\"TEXT\", this._getSettings());\n  }\n\n  public changeColor(color: string) {\n    this.colorHexa = color;\n    this._reflow();\n  }\n  public changeBrushSize(size: number) {\n    this.brushSize = size;\n    this._reflow();\n  }\n\n  public clear() {\n    if (this.objectActivated) {\n      this.tuiImageEditor.removeActiveObject();\n    }\n  }\n\n  public validation() {\n    this.onSaveClick();\n  }\n  public onSaveClick = async () => {\n    this.requestState.asked();\n\n    const data = this.tuiImageEditor.toDataURL({\n      format: \"png\",\n      quality: 0.4,\n    });\n\n    const blob = await getBlobImage(data);\n    this.savedImage.emit(blob);\n\n    this.requestState.completed();\n  };\n  private async _createImageEditor() {\n    this.tuiImageEditor = new ImageEditor(this._tuiRef.nativeElement, {\n      usageStatistics: false,\n    });\n    const crop = await this.tuiImageEditor.loadImageFromURL(\n      this.imagePath,\n      \"default\"\n    );\n    this._canvasSize = determineNewSize(\n      crop.newHeight,\n      crop.newWidth,\n      this._containerRef.nativeElement.clientWidth,\n      this._containerRef.nativeElement.clientHeight - 70\n    );\n    this.tuiImageEditor.resizeCanvasDimension({\n      width: this._canvasSize.width,\n      height: this._canvasSize.height,\n    });\n    this.tuiImageEditor.on(\"mousedown\", () => {\n      this._intoDrawing = true;\n    });\n    this.tuiImageEditor.on(\"objectActivated\", (data: any) => {\n      this.objectActivated = data;\n    });\n    this.tuiImageEditor.on(\"addText\", (pos: any) => {\n      this.tuiImageEditor.addText(\"TEXTE\", {\n        ...this._getSettings(),\n        ...{ position: pos.originPosition },\n      });\n    });\n  }\n\n  private _stopDrawing() {\n    this.tuiImageEditor.stopDrawingMode();\n    this.objectActivated = null;\n  }\n  private _reflow() {\n    if (this.selection === \"line\") {\n      this.tuiImageEditor.setBrush({\n        color: this.colorHexa,\n        width: this.brushSize,\n      });\n      return;\n    }\n\n    if (this.selection === \"shape\") {\n      this._stopDrawing();\n      this.changeShapeSelection(this.shapeSelection);\n      return;\n    }\n  }\n  private _getSettings() {\n    return {\n      color: this.colorHexa,\n      width: this.brushSize,\n      fill: \"transparent\",\n      stroke: this.colorHexa,\n      strokeWidth: this.brushSize,\n      styles: {\n        fill: this.colorHexa,\n        fontSize: this.brushSize * 8,\n      },\n    };\n  }\n}\n","<div class=\"edit\" #containerRef>\n  <div\n    #tuiRef\n    [style.height]=\"this.getHeight()\"\n    [style.width]=\"this.getWidth()\"\n    class=\"m-a image-container\"\n  ></div>\n\n  <ta-loader [isLoading]=\"this.requestState.isLoading()\">\n    <div class=\"control\">\n      @if (this.showPanel()) {\n      <div class=\"panel\">\n        @if (this.selection === 'line') {\n        <ng-template [ngTemplateOutlet]=\"Range\"></ng-template>\n        <ng-template [ngTemplateOutlet]=\"Colors\"></ng-template>\n        } @else if (this.selection === 'shape') {\n        <div class=\"row g-0 shape-selection\">\n          <div class=\"col\" (click)=\"this.changeShapeSelection('rect')\">\n            <div\n              class=\"item\"\n              [ngClass]=\"{ selected: this.shapeSelection === 'rect' }\"\n            >\n              <ta-material-icon type=\"sm\"\n                >check_box_outline_blank</ta-material-icon\n              >\n            </div>\n          </div>\n          <div class=\"col\" (click)=\"this.changeShapeSelection('triangle')\">\n            <div\n              class=\"item\"\n              [ngClass]=\"{ selected: this.shapeSelection === 'triangle' }\"\n            >\n              <ta-material-icon type=\"sm\">change_history</ta-material-icon>\n            </div>\n          </div>\n          <div class=\"col\" (click)=\"this.changeShapeSelection('circle')\">\n            <div\n              class=\"item\"\n              [ngClass]=\"{ selected: this.shapeSelection === 'circle' }\"\n            >\n              <ta-material-icon type=\"sm\">circle</ta-material-icon>\n            </div>\n          </div>\n          <div class=\"col\" (click)=\"this.changeShapeSelection('line')\">\n            <div\n              class=\"item\"\n              [ngClass]=\"{ selected: this.shapeSelection === 'line' }\"\n            >\n              <ta-material-icon type=\"sm\">straighten</ta-material-icon>\n            </div>\n          </div>\n        </div>\n        <ng-template [ngTemplateOutlet]=\"Range\"></ng-template>\n        <ng-template [ngTemplateOutlet]=\"Colors\"></ng-template>\n        } @else if (this.selection === 'text') {\n        <ng-template [ngTemplateOutlet]=\"Range\"></ng-template>\n        <ng-template [ngTemplateOutlet]=\"Colors\"></ng-template>\n        }\n      </div>\n      }\n\n      <div class=\"selection row g-0\">\n        <div class=\"col\" (click)=\"this.changeSelection('')\">\n          <div class=\"item\" [ngClass]=\"{ selected: this.selection === '' }\">\n            <ta-material-icon type=\"sm\">pan_tool</ta-material-icon>\n          </div>\n        </div>\n        <div class=\"col\" (click)=\"this.changeSelection('line')\">\n          <div class=\"item\" [ngClass]=\"{ selected: this.selection === 'line' }\">\n            <ta-material-icon type=\"sm\">draw</ta-material-icon>\n          </div>\n        </div>\n        <div class=\"col\" (click)=\"this.changeSelection('shape')\">\n          <div\n            class=\"item\"\n            [ngClass]=\"{ selected: this.selection === 'shape' }\"\n          >\n            <ta-material-icon type=\"sm\">interests</ta-material-icon>\n          </div>\n        </div>\n        <div class=\"col\" (click)=\"this.changeSelection('text')\">\n          <div class=\"item\" [ngClass]=\"{ selected: this.selection === 'text' }\">\n            <ta-material-icon type=\"sm\">text_fields</ta-material-icon>\n          </div>\n        </div>\n        <div class=\"col\" (click)=\"this.clear()\">\n          <div class=\"item\" [ngClass]=\"{ disabled: !this.objectActivated }\">\n            <ta-material-icon type=\"sm\">delete</ta-material-icon>\n          </div>\n        </div>\n        <span class=\"separator\"></span>\n        <div class=\"col\" (click)=\"this.undo()\">\n          <div class=\"item\">\n            <ta-material-icon type=\"sm\">undo</ta-material-icon>\n          </div>\n        </div>\n        <div class=\"col\" (click)=\"this.redo()\">\n          <div class=\"item\">\n            <ta-material-icon type=\"sm\">redo</ta-material-icon>\n          </div>\n        </div>\n        <span class=\"separator\"></span>\n        <div class=\"col\" (click)=\"this.validation()\">\n          <div class=\"item color-success\">\n            <ta-font-icon name=\"check-line\"></ta-font-icon>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ta-loader>\n</div>\n\n<ng-template #Colors>\n  <div class=\"colors\">\n    <div class=\"row g-0\">\n      @for (color of this.colorList; track color) {\n      <div class=\"col\" (click)=\"this.changeColor(color)\">\n        <div\n          class=\"color\"\n          [style.background-color]=\"color\"\n          [ngClass]=\"{ 'is-light': this.isLight(color) }\"\n        >\n          @if (this.colorHexa === color) {\n          <ta-material-icon [type]=\"'sm'\">done</ta-material-icon>\n          }\n        </div>\n      </div>\n      }\n    </div>\n  </div>\n</ng-template>\n<ng-template #Range>\n  <div class=\"range\">\n    <!-- <ta-input-slider [input]=\"this.slider\"></ta-input-slider> -->\n  </div>\n</ng-template>\n","import { AsyncPipe, NgFor, NgIf } from \"@angular/common\";\nimport { HttpErrorResponse } from \"@angular/common/http\";\nimport {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n  SimpleChanges,\n  inject,\n} from \"@angular/core\";\n\nimport { TranslateModule } from \"@ngx-translate/core\";\n\nimport { InputUploadValue } from \"@ta/form-model\";\nimport { FontIconComponent } from \"@ta/icons\";\nimport { DocumentDto, FileType, TaDocumentsService } from \"@ta/services\";\nimport {\n  ButtonToolComponent,\n  EmptyComponent,\n  ErrorComponent,\n  LinkComponent,\n  LoaderComponent,\n  MegaoctetComponent,\n  TextComponent,\n  TimeAgoComponent,\n} from \"@ta/ui\";\nimport { TaBaseComponent, downloadFile } from \"@ta/utils\";\n\n@Component({\n  selector: \"ta-documents-list\",\n  templateUrl: \"./list.component.html\",\n  styleUrls: [\"./list.component.scss\"],\n  standalone: true,\n  imports: [\n    NgIf,\n    NgFor,\n    AsyncPipe,\n    ButtonToolComponent,\n    EmptyComponent,\n    ErrorComponent,\n    FontIconComponent,\n    LinkComponent,\n    LoaderComponent,\n    MegaoctetComponent,\n    TextComponent,\n    TimeAgoComponent,\n    TranslateModule,\n  ],\n})\nexport class DocumentsListComponent\n  extends TaBaseComponent\n  implements OnInit, OnChanges\n{\n  @Input()\n  documentsIds!: string[];\n\n  @Input()\n  emptyMessage: string = \"\";\n\n  @Input()\n  actions: \"delete\" | \"select\" | \"\" = \"\";\n\n  @Input()\n  defaultSelected: string[] = [];\n\n  @Input()\n  readonly: boolean = false;\n\n  @Output()\n  remove = new EventEmitter<string>();\n\n  @Output()\n  checkedFilesChanged = new EventEmitter<InputUploadValue[]>();\n\n  private readonly _documentsService = inject(TaDocumentsService);\n\n  private _checkedFiles: InputUploadValue[] = [];\n  public FileType = FileType;\n\n  get documents$() {\n    return this._documentsService.getDocuments$(this.documentsIds);\n  }\n\n  ngOnInit() {\n    this._fetch();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    // this._fetch();\n  }\n\n  public openDocument(doc: DocumentDto) {\n    downloadFile(doc.url);\n  }\n\n  public removeDocument(doc: DocumentDto) {\n    this.remove.emit(doc.id);\n  }\n\n  public isChecked(doc: DocumentDto) {\n    return this._checkedFiles.find((x) => x.id === doc.id);\n  }\n\n  public check(doc: DocumentDto) {\n    if (this.isChecked(doc)) {\n      this._checkedFiles = this._checkedFiles.filter((x) => x.id !== doc.id);\n    } else {\n      this._checkedFiles.push({\n        id: doc.id,\n        name: doc.description,\n        url: doc.url,\n      });\n    }\n    this.checkedFilesChanged.emit(this._checkedFiles);\n  }\n\n  private _fetch() {\n    this.requestState.asked();\n    this._documentsService.fetchDocuments$(this.documentsIds).subscribe({\n      next: (documents) => {\n        this._checkedFiles = documents.filter((doc) =>\n          this.defaultSelected.includes(doc.id)\n        );\n      },\n      complete: () => this.requestState.completed(),\n      error: (error: HttpErrorResponse) => {\n        this.requestState.onError(error.status, error.statusText);\n      },\n    });\n  }\n}\n","<ta-loader\n  [isLoading]=\"this.requestState.isLoading()\"\n  *ngLet=\"this.documents$ | async as documents\"\n>\n  <ta-error\n    [message]=\"this.requestState.getErrorMessage()\"\n    [code]=\"this.requestState.getErrorStatus()\"\n  >\n    <ta-empty\n      [isEmpty]=\"!documents || documents.length === 0\"\n      [text]=\"this.emptyMessage\"\n      [showMessage]=\"!!this.emptyMessage\"\n    >\n      <div class=\"list flex-column g-space-sm\">\n        @for (doc of documents; track doc) {\n        <div>\n          <ng-container\n            *ngTemplateOutlet=\"\n              this.actions !== 'select' ? defaultTemplate : selectTemplate;\n              context: { doc: doc }\n            \"\n          ></ng-container>\n        </div>\n        }\n      </div>\n    </ta-empty>\n  </ta-error>\n</ta-loader>\n\n<ng-template #defaultTemplate let-doc=\"doc\">\n  <div class=\"flex-row g-space-xs justify-content-between\">\n    <div class=\"align-center\">\n      <ta-font-icon name=\"doc\" size=\"xs\"></ta-font-icon>\n      <div>\n        <ta-link [underline]=\"false\" (action)=\"this.openDocument(doc)\">{{\n          doc.name\n        }}</ta-link>\n        <div class=\"extra flex-row g-space-md\">\n          <ta-time-ago [date]=\"doc.uploadedDate\"></ta-time-ago>\n          <ta-megaoctet [octet]=\"doc.size\"></ta-megaoctet>\n        </div>\n      </div>\n    </div>\n    <div class=\"cta align-content-center\">\n      @if (this.actions === 'select') {\n      <input\n        [disabled]=\"this.readonly\"\n        type=\"checkbox\"\n        [checked]=\"this.isChecked(doc)\"\n        (click)=\"this.check(doc)\"\n      />\n      } @else if (this.actions === 'delete') {\n      <ta-button-tool\n        (action)=\"this.removeDocument(doc)\"\n        icon=\"delete\"\n        [size]=\"'sm'\"\n        [readonly]=\"this.readonly\"\n      ></ta-button-tool>\n      }\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #selectTemplate let-doc=\"doc\">\n  <div\n    class=\"card-document-upload flex-row g-space-xs justify-content-between\"\n    [class.selected]=\"this.isChecked(doc)\"\n    (click)=\"this.check(doc)\"\n  >\n    <div class=\"display flex-column align-items-start\">\n      <ta-link\n        [bold]=\"true\"\n        [underline]=\"false\"\n        (click)=\"$event.stopPropagation()\"\n        (action)=\"this.openDocument(doc)\"\n      >\n        {{ doc.name }}\n      </ta-link>\n      <div class=\"flex-row g-space-md\">\n        <div class=\"flex-row align-items-center\">\n          <ta-font-icon name=\"doc\" size=\"xs\"></ta-font-icon>\n          <ta-text>\n            {{\n              \"communication.documents.file-type.\" +\n                this.FileType[doc.fileType].toLocaleLowerCase() | translate\n            }}\n          </ta-text>\n        </div>\n        <ta-megaoctet [icon]=\"true\" [octet]=\"doc.size\"></ta-megaoctet>\n      </div>\n    </div>\n    <div class=\"button align-content-center\">\n      @if (this.actions === 'select') {\n      <input type=\"checkbox\" [checked]=\"this.isChecked(doc)\" />\n      } @else if (this.actions === 'delete') {\n      <ta-button-tool\n        (action)=\"this.removeDocument(doc)\"\n        icon=\"delete\"\n        [size]=\"'sm'\"\n      ></ta-button-tool>\n      }\n    </div>\n  </div>\n</ng-template>\n","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\n\nimport { TaIconsModule } from \"@ta/icons\";\nimport { TranslatePipe } from \"@ta/translation\";\nimport { TaCardModule, TaContainerModule, TaUiModule } from \"@ta/ui\";\nimport { SafePipe, TaDirectivePipeModule } from \"@ta/utils\";\n\nimport { DocumentsListComponent } from \"./components/documents/list/list.component\";\nimport { FileEditComponent } from \"./components/edit/files-edit.component\";\nimport { FileCardComponent } from \"./components/list/card/file/file-card.component\";\nimport { FileListComponent } from \"./components/list/files-list.component\";\n\n/**\n * @deprecated Use standalone components instead.\n * This module will be removed in a future version.\n *\n * @example\n * // Instead of importing the module:\n * // import { TaFilesBasicModule } from '@ta/library-name';\n *\n * // Import the standalone components directly:\n * import { FileListComponent, FileEditComponent, DocumentsListComponent } from '@ta/library-name';\n */\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    TaDirectivePipeModule,\n    TaUiModule,\n    TaCardModule,\n    TaContainerModule,\n    TaIconsModule,\n    TranslatePipe,\n    SafePipe,\n    FileListComponent,\n    FileCardComponent,\n    FileEditComponent,\n    DocumentsListComponent,\n  ],\n  exports: [FileListComponent, FileEditComponent, DocumentsListComponent],\n})\nexport class TaFilesBasicModule {}\n","/*\n * Public API Surface of files-basic\n */\n\nexport * from \"./lib/components/public-api\";\n\nexport * from \"./lib/files-basic.module\";\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}