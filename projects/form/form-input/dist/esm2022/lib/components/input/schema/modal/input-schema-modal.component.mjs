import { Component } from '@angular/core';
import { Subject } from 'rxjs';
import { FileEditComponent } from '@ta/files-basic';
import { TaBaseModal, newGuid } from '@ta/utils';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
export class InputSchemaModal extends TaBaseModal {
    constructor(dialogRef) {
        super();
        this.dialogRef = dialogRef;
        this.askImage$ = new Subject();
        this.imagePath = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+gAAAPoAQMAAAB3bUanAAAABlBMVEUAAAD8/vwnjUF/AAAAAXRSTlMAQObYZgAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAcVJREFUeJztzTEBAAAMAiD7l9YYOwYFSC/Fbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xb7g32cNHwzdl5x4gAAAABJRU5ErkJggg==';
        this.close = () => {
            this.dialogRef.close();
        };
        this.selected = () => {
            this.askImage$.next(null);
        };
        this.dialogRef.addPanelClass(['full-screen-modal', 'edit-mode']);
    }
    savedImage(blob) {
        const file = new File([blob], newGuid(), { type: blob.type });
        this.dialogRef.close({ file: { file, localUrl: this.imagePath } });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: InputSchemaModal, deps: [{ token: i1.MatDialogRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.14", type: InputSchemaModal, isStandalone: true, selector: "ng-component", usesInheritance: true, ngImport: i0, template: "<div class=\"edit-schema-container\">\n  <ta-files-edit\n    [imagePath]=\"this.imagePath\"\n    [saveImage$]=\"this.askImage$\"\n    (savedImage)=\"this.savedImage($event)\"\n  ></ta-files-edit>\n</div>\n", styles: [".edit-schema-container{height:80vh;padding-bottom:70px}\n"], dependencies: [{ kind: "component", type: FileEditComponent, selector: "ta-files-edit", inputs: ["imagePath", "saveImage$"], outputs: ["savedImage"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: InputSchemaModal, decorators: [{
            type: Component,
            args: [{ selector: '', standalone: true, imports: [FileEditComponent], template: "<div class=\"edit-schema-container\">\n  <ta-files-edit\n    [imagePath]=\"this.imagePath\"\n    [saveImage$]=\"this.askImage$\"\n    (savedImage)=\"this.savedImage($event)\"\n  ></ta-files-edit>\n</div>\n", styles: [".edit-schema-container{height:80vh;padding-bottom:70px}\n"] }]
        }], ctorParameters: () => [{ type: i1.MatDialogRef }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtc2NoZW1hLW1vZGFsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9zY2hlbWEvbW9kYWwvaW5wdXQtc2NoZW1hLW1vZGFsLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9zY2hlbWEvbW9kYWwvaW5wdXQtc2NoZW1hLW1vZGFsLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHMUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUvQixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNwRCxPQUFPLEVBQWlCLFdBQVcsRUFBRSxPQUFPLEVBQUUsTUFBTSxXQUFXLENBQUM7OztBQVNoRSxNQUFNLE9BQU8sZ0JBQWlCLFNBQVEsV0FBVztJQUsvQyxZQUFtQixTQUFrRTtRQUNuRixLQUFLLEVBQUUsQ0FBQztRQURTLGNBQVMsR0FBVCxTQUFTLENBQXlEO1FBSjlFLGNBQVMsR0FBRyxJQUFJLE9BQU8sRUFBUSxDQUFDO1FBQ2hDLGNBQVMsR0FDZCx3d0JBQXd3QixDQUFDO1FBUXB3QixVQUFLLEdBQUcsR0FBRyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDekIsQ0FBQyxDQUFDO1FBQ0ssYUFBUSxHQUFHLEdBQUcsRUFBRTtZQUNyQixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixDQUFDLENBQUM7UUFSQSxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDLG1CQUFtQixFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUM7SUFDbkUsQ0FBQztJQVFNLFVBQVUsQ0FBQyxJQUFVO1FBQzFCLE1BQU0sSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDOUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDckUsQ0FBQzsrR0FwQlUsZ0JBQWdCO21HQUFoQixnQkFBZ0IsK0ZDZjdCLCtNQU9BLG1IRE1ZLGlCQUFpQjs7NEZBRWhCLGdCQUFnQjtrQkFQNUIsU0FBUzsrQkFDRSxFQUFFLGNBR0EsSUFBSSxXQUNQLENBQUMsaUJBQWlCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdERpYWxvZ1JlZiB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XG5cbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgRmlsZUVkaXRDb21wb25lbnQgfSBmcm9tICdAdGEvZmlsZXMtYmFzaWMnO1xuaW1wb3J0IHsgRmlsZVN0cnVjdHVyZSwgVGFCYXNlTW9kYWwsIG5ld0d1aWQgfSBmcm9tICdAdGEvdXRpbHMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICcnLFxuICBzdHlsZVVybHM6IFsnLi9pbnB1dC1zY2hlbWEtbW9kYWwuY29tcG9uZW50LnNjc3MnXSxcbiAgdGVtcGxhdGVVcmw6ICcuL2lucHV0LXNjaGVtYS1tb2RhbC5jb21wb25lbnQuaHRtbCcsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtGaWxlRWRpdENvbXBvbmVudF0sXG59KVxuZXhwb3J0IGNsYXNzIElucHV0U2NoZW1hTW9kYWwgZXh0ZW5kcyBUYUJhc2VNb2RhbCB7XG4gIHB1YmxpYyBhc2tJbWFnZSQgPSBuZXcgU3ViamVjdDxudWxsPigpO1xuICBwdWJsaWMgaW1hZ2VQYXRoID1cbiAgICAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUErZ0FBQVBvQVFNQUFBQjNiVWFuQUFBQUJsQk1WRVVBQUFEOC92d25qVUYvQUFBQUFYUlNUbE1BUU9iWVpnQUFBQWx3U0ZsekFBQU94QUFBRHNRQmxTc09Hd0FBQWNWSlJFRlVlSnp0elRFQkFBQU1BaUQ3bDlZWU93WUZTQy9GYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hiN2czMmNOSHd6ZGw1eDRnQUFBQUJKUlU1RXJrSmdnZz09JztcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgZGlhbG9nUmVmOiBNYXREaWFsb2dSZWY8SW5wdXRTY2hlbWFNb2RhbCwgeyBmaWxlOiBGaWxlU3RydWN0dXJlIH0+KSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuZGlhbG9nUmVmLmFkZFBhbmVsQ2xhc3MoWydmdWxsLXNjcmVlbi1tb2RhbCcsICdlZGl0LW1vZGUnXSk7XG4gIH1cblxuICBwdWJsaWMgY2xvc2UgPSAoKSA9PiB7XG4gICAgdGhpcy5kaWFsb2dSZWYuY2xvc2UoKTtcbiAgfTtcbiAgcHVibGljIHNlbGVjdGVkID0gKCkgPT4ge1xuICAgIHRoaXMuYXNrSW1hZ2UkLm5leHQobnVsbCk7XG4gIH07XG4gIHB1YmxpYyBzYXZlZEltYWdlKGJsb2I6IEJsb2IpOiB2b2lkIHtcbiAgICBjb25zdCBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBuZXdHdWlkKCksIHsgdHlwZTogYmxvYi50eXBlIH0pO1xuICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKHsgZmlsZTogeyBmaWxlLCBsb2NhbFVybDogdGhpcy5pbWFnZVBhdGggfSB9KTtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cImVkaXQtc2NoZW1hLWNvbnRhaW5lclwiPlxuICA8dGEtZmlsZXMtZWRpdFxuICAgIFtpbWFnZVBhdGhdPVwidGhpcy5pbWFnZVBhdGhcIlxuICAgIFtzYXZlSW1hZ2UkXT1cInRoaXMuYXNrSW1hZ2UkXCJcbiAgICAoc2F2ZWRJbWFnZSk9XCJ0aGlzLnNhdmVkSW1hZ2UoJGV2ZW50KVwiXG4gID48L3RhLWZpbGVzLWVkaXQ+XG48L2Rpdj5cbiJdfQ==