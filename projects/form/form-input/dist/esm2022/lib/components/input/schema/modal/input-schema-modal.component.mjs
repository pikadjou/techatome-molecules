import { Component } from "@angular/core";
import { Subject } from "rxjs";
import { FileEditComponent } from "@ta/files-basic";
import { TaBaseModal, newGuid } from "@ta/utils";
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
export class InputSchemaModal extends TaBaseModal {
    constructor(dialogRef) {
        super();
        this.dialogRef = dialogRef;
        this.askImage$ = new Subject();
        this.imagePath = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+gAAAPoAQMAAAB3bUanAAAABlBMVEUAAAD8/vwnjUF/AAAAAXRSTlMAQObYZgAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAcVJREFUeJztzTEBAAAMAiD7l9YYOwYFSC/Fbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xa73W632+12u91ut9vtdrvdbrfb7Xb7g32cNHwzdl5x4gAAAABJRU5ErkJggg==";
        this.close = () => {
            this.dialogRef.close();
        };
        this.selected = () => {
            this.askImage$.next(null);
        };
        this.dialogRef.addPanelClass(["full-screen-modal", "edit-mode"]);
    }
    savedImage(blob) {
        const file = new File([blob], newGuid(), { type: blob.type });
        this.dialogRef.close({ file: { file, localUrl: this.imagePath } });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: InputSchemaModal, deps: [{ token: i1.MatDialogRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.14", type: InputSchemaModal, isStandalone: true, selector: "ng-component", usesInheritance: true, ngImport: i0, template: "<div class=\"edit-schema-container\">\n  <ta-files-edit\n    [imagePath]=\"this.imagePath\"\n    [saveImage$]=\"this.askImage$\"\n    (savedImage)=\"this.savedImage($event)\"\n  ></ta-files-edit>\n</div>\n", styles: [".edit-schema-container{height:80vh;padding-bottom:70px}\n"], dependencies: [{ kind: "component", type: FileEditComponent, selector: "ta-files-edit", inputs: ["imagePath", "saveImage$"], outputs: ["savedImage"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: InputSchemaModal, decorators: [{
            type: Component,
            args: [{ selector: "", standalone: true, imports: [FileEditComponent], template: "<div class=\"edit-schema-container\">\n  <ta-files-edit\n    [imagePath]=\"this.imagePath\"\n    [saveImage$]=\"this.askImage$\"\n    (savedImage)=\"this.savedImage($event)\"\n  ></ta-files-edit>\n</div>\n", styles: [".edit-schema-container{height:80vh;padding-bottom:70px}\n"] }]
        }], ctorParameters: () => [{ type: i1.MatDialogRef }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtc2NoZW1hLW1vZGFsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9zY2hlbWEvbW9kYWwvaW5wdXQtc2NoZW1hLW1vZGFsLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9zY2hlbWEvbW9kYWwvaW5wdXQtc2NoZW1hLW1vZGFsLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHMUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUvQixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNwRCxPQUFPLEVBQWlCLFdBQVcsRUFBRSxPQUFPLEVBQUUsTUFBTSxXQUFXLENBQUM7OztBQVNoRSxNQUFNLE9BQU8sZ0JBQWlCLFNBQVEsV0FBVztJQUsvQyxZQUNTLFNBQWtFO1FBRXpFLEtBQUssRUFBRSxDQUFDO1FBRkQsY0FBUyxHQUFULFNBQVMsQ0FBeUQ7UUFMcEUsY0FBUyxHQUFHLElBQUksT0FBTyxFQUFRLENBQUM7UUFDaEMsY0FBUyxHQUNkLHd3QkFBd3dCLENBQUM7UUFVcHdCLFVBQUssR0FBRyxHQUFHLEVBQUU7WUFDbEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN6QixDQUFDLENBQUM7UUFDSyxhQUFRLEdBQUcsR0FBRyxFQUFFO1lBQ3JCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVCLENBQUMsQ0FBQztRQVJBLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUMsbUJBQW1CLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztJQUNuRSxDQUFDO0lBUU0sVUFBVSxDQUFDLElBQVU7UUFDMUIsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUM5RCxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNyRSxDQUFDOytHQXRCVSxnQkFBZ0I7bUdBQWhCLGdCQUFnQiwrRkNmN0IsK01BT0EsbUhETVksaUJBQWlCOzs0RkFFaEIsZ0JBQWdCO2tCQVA1QixTQUFTOytCQUNFLEVBQUUsY0FHQSxJQUFJLFdBQ1AsQ0FBQyxpQkFBaUIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBNYXREaWFsb2dSZWYgfSBmcm9tIFwiQGFuZ3VsYXIvbWF0ZXJpYWwvZGlhbG9nXCI7XG5cbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xuXG5pbXBvcnQgeyBGaWxlRWRpdENvbXBvbmVudCB9IGZyb20gXCJAdGEvZmlsZXMtYmFzaWNcIjtcbmltcG9ydCB7IEZpbGVTdHJ1Y3R1cmUsIFRhQmFzZU1vZGFsLCBuZXdHdWlkIH0gZnJvbSBcIkB0YS91dGlsc1wiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6IFwiXCIsXG4gIHN0eWxlVXJsczogW1wiLi9pbnB1dC1zY2hlbWEtbW9kYWwuY29tcG9uZW50LnNjc3NcIl0sXG4gIHRlbXBsYXRlVXJsOiBcIi4vaW5wdXQtc2NoZW1hLW1vZGFsLmNvbXBvbmVudC5odG1sXCIsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtGaWxlRWRpdENvbXBvbmVudF0sXG59KVxuZXhwb3J0IGNsYXNzIElucHV0U2NoZW1hTW9kYWwgZXh0ZW5kcyBUYUJhc2VNb2RhbCB7XG4gIHB1YmxpYyBhc2tJbWFnZSQgPSBuZXcgU3ViamVjdDxudWxsPigpO1xuICBwdWJsaWMgaW1hZ2VQYXRoID1cbiAgICBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBK2dBQUFQb0FRTUFBQUIzYlVhbkFBQUFCbEJNVkVVQUFBRDgvdndualVGL0FBQUFBWFJTVGxNQVFPYllaZ0FBQUFsd1NGbHpBQUFPeEFBQURzUUJsU3NPR3dBQUFjVkpSRUZVZUp6dHpURUJBQUFNQWlEN2w5WVlPd1lGU0MvRmJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYTczVzYzMisxMnU5MXV0OXZ0ZHJ2ZGJyZmI3WGE3M1c2MzIrMTJ1OTF1dDl2dGRydmRicmZiN1hhNzNXNjMyKzEydTkxdXQ5dnRkcnZkYnJmYjdYYjdnMzJjTkh3emRsNXg0Z0FBQUFCSlJVNUVya0pnZ2c9PVwiO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBkaWFsb2dSZWY6IE1hdERpYWxvZ1JlZjxJbnB1dFNjaGVtYU1vZGFsLCB7IGZpbGU6IEZpbGVTdHJ1Y3R1cmUgfT5cbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuZGlhbG9nUmVmLmFkZFBhbmVsQ2xhc3MoW1wiZnVsbC1zY3JlZW4tbW9kYWxcIiwgXCJlZGl0LW1vZGVcIl0pO1xuICB9XG5cbiAgcHVibGljIGNsb3NlID0gKCkgPT4ge1xuICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKCk7XG4gIH07XG4gIHB1YmxpYyBzZWxlY3RlZCA9ICgpID0+IHtcbiAgICB0aGlzLmFza0ltYWdlJC5uZXh0KG51bGwpO1xuICB9O1xuICBwdWJsaWMgc2F2ZWRJbWFnZShibG9iOiBCbG9iKTogdm9pZCB7XG4gICAgY29uc3QgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgbmV3R3VpZCgpLCB7IHR5cGU6IGJsb2IudHlwZSB9KTtcbiAgICB0aGlzLmRpYWxvZ1JlZi5jbG9zZSh7IGZpbGU6IHsgZmlsZSwgbG9jYWxVcmw6IHRoaXMuaW1hZ2VQYXRoIH0gfSk7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJlZGl0LXNjaGVtYS1jb250YWluZXJcIj5cbiAgPHRhLWZpbGVzLWVkaXRcbiAgICBbaW1hZ2VQYXRoXT1cInRoaXMuaW1hZ2VQYXRoXCJcbiAgICBbc2F2ZUltYWdlJF09XCJ0aGlzLmFza0ltYWdlJFwiXG4gICAgKHNhdmVkSW1hZ2UpPVwidGhpcy5zYXZlZEltYWdlKCRldmVudClcIlxuICA+PC90YS1maWxlcy1lZGl0PlxuPC9kaXY+XG4iXX0=