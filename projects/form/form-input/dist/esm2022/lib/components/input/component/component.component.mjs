import { NgTemplateOutlet } from '@angular/common';
import { Component, inject } from '@angular/core';
import { ReactiveFormsModule } from '@angular/forms';
import { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';
import { Subject } from 'rxjs';
import { FontIconComponent } from '@ta/icons';
import { LayoutModalComponent } from '@ta/ui';
import { TaBaseModal } from '@ta/utils';
import { TaAbstractInputComponent } from '../../abstract.component';
import { InputLayoutComponent } from '../../input-layout/input-layout.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
export class ComponentInputComponent extends TaAbstractInputComponent {
    constructor() {
        super(...arguments);
        this.dialog = inject(MatDialog);
    }
    open() {
        this.dialog.open(TemplateModal, {
            data: {
                input: this.input,
            },
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: ComponentInputComponent, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.14", type: ComponentInputComponent, isStandalone: true, selector: "ta-input-component", usesInheritance: true, ngImport: i0, template: "<ta-input-layout [input]=\"this.input\">\n  <div class=\"component-container\">\n    <input\n      #box\n      #focusedElement\n      class=\"form-control\"\n      [value]=\"this.input.value\"\n      [formControl]=\"$any(this.input.formControl)\"\n      [readonly]=\"this.input.disabled\"\n      type=\"text\"\n    />\n    <div class=\"cta\" (click)=\"this.open()\">\n      <ta-font-icon name=\"ressources\"></ta-font-icon>\n    </div>\n  </div>\n</ta-input-layout>\n", styles: [".component-container{position:relative}.cta{position:absolute;top:0;right:0;padding:var(--ta-space-sm)}\n"], dependencies: [{ kind: "component", type: InputLayoutComponent, selector: "ta-input-layout", inputs: ["input", "width", "height"] }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "directive", type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "component", type: FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: ComponentInputComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-input-component', standalone: true, imports: [InputLayoutComponent, ReactiveFormsModule, FontIconComponent], template: "<ta-input-layout [input]=\"this.input\">\n  <div class=\"component-container\">\n    <input\n      #box\n      #focusedElement\n      class=\"form-control\"\n      [value]=\"this.input.value\"\n      [formControl]=\"$any(this.input.formControl)\"\n      [readonly]=\"this.input.disabled\"\n      type=\"text\"\n    />\n    <div class=\"cta\" (click)=\"this.open()\">\n      <ta-font-icon name=\"ressources\"></ta-font-icon>\n    </div>\n  </div>\n</ta-input-layout>\n", styles: [".component-container{position:relative}.cta{position:absolute;top:0;right:0;padding:var(--ta-space-sm)}\n"] }]
        }] });
export class TemplateModal extends TaBaseModal {
    constructor() {
        super();
        this.dialogRef = inject((MatDialogRef));
        this.data = inject(MAT_DIALOG_DATA);
        this.selectedValue$ = new Subject();
        this._registerSubscription(this.selectedValue$.subscribe({
            next: value => this.select(value),
        }));
    }
    select(value) {
        this.data.input.selectedValue$.next(value);
        this.dialogRef.close();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: TemplateModal, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: TemplateModal, isStandalone: true, selector: "ng-component", usesInheritance: true, ngImport: i0, template: "<ta-layout-modal style=\"classic\" title=\"input.component.modal.title\">\n  @if(this.data.input.template) {\n  <ng-template\n    [ngTemplateOutlet]=\"this.data.input.template\"\n    [ngTemplateOutletContext]=\"{ selectedValue$: this.selectedValue$ }\"\n  ></ng-template>\n  }\n</ta-layout-modal>\n", dependencies: [{ kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "component", type: LayoutModalComponent, selector: "ta-layout-modal", inputs: ["style", "title"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: TemplateModal, decorators: [{
            type: Component,
            args: [{ selector: '', standalone: true, imports: [NgTemplateOutlet, LayoutModalComponent], template: "<ta-layout-modal style=\"classic\" title=\"input.component.modal.title\">\n  @if(this.data.input.template) {\n  <ng-template\n    [ngTemplateOutlet]=\"this.data.input.template\"\n    [ngTemplateOutletContext]=\"{ selectedValue$: this.selectedValue$ }\"\n  ></ng-template>\n  }\n</ta-layout-modal>\n" }]
        }], ctorParameters: () => [] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9jb21wb25lbnQvY29tcG9uZW50LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9jb21wb25lbnQvY29tcG9uZW50LmNvbXBvbmVudC5odG1sIiwiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb21wb25lbnRzL2lucHV0L2NvbXBvbmVudC9tb2RhbC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRXBGLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFHL0IsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQzlDLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUM5QyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRXhDLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDJDQUEyQyxDQUFDOzs7QUFTakYsTUFBTSxPQUFPLHVCQUF3QixTQUFRLHdCQUF3QztJQVByRjs7UUFRVyxXQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0tBU3JDO0lBUFEsSUFBSTtRQUNULElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUM5QixJQUFJLEVBQUU7Z0JBQ0osS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO2FBQ2xCO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQzsrR0FUVSx1QkFBdUI7bUdBQXZCLHVCQUF1QixxR0N0QnBDLHFkQWdCQSxtS0RFWSxvQkFBb0IsaUdBQUUsbUJBQW1CLDBrQkFBRSxpQkFBaUI7OzRGQUkzRCx1QkFBdUI7a0JBUG5DLFNBQVM7K0JBQ0Usb0JBQW9CLGNBQ2xCLElBQUksV0FDUCxDQUFDLG9CQUFvQixFQUFFLG1CQUFtQixFQUFFLGlCQUFpQixDQUFDOztBQXlCekUsTUFBTSxPQUFPLGFBQWMsU0FBUSxXQUFXO0lBTTVDO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFORCxjQUFTLEdBQUcsTUFBTSxDQUFDLENBQUEsWUFBMkIsQ0FBQSxDQUFDLENBQUM7UUFDaEQsU0FBSSxHQUFzQixNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7UUFFbEQsbUJBQWMsR0FBRyxJQUFJLE9BQU8sRUFBVSxDQUFDO1FBSzlDLElBQUksQ0FBQyxxQkFBcUIsQ0FDeEIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUM7WUFDNUIsSUFBSSxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7U0FDbEMsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDO0lBRU0sTUFBTSxDQUFDLEtBQWE7UUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUUzQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3pCLENBQUM7K0dBcEJVLGFBQWE7bUdBQWIsYUFBYSwrRkUzQzFCLDRTQVFBLDRDRmdDWSxnQkFBZ0Isb0pBQUUsb0JBQW9COzs0RkFHckMsYUFBYTtrQkFOekIsU0FBUzsrQkFDRSxFQUFFLGNBQ0EsSUFBSSxXQUNQLENBQUMsZ0JBQWdCLEVBQUUsb0JBQW9CLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZ1RlbXBsYXRlT3V0bGV0IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENvbXBvbmVudCwgaW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTUFUX0RJQUxPR19EQVRBLCBNYXREaWFsb2csIE1hdERpYWxvZ1JlZiB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XG5cbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgSW5wdXRDb21wb25lbnQgfSBmcm9tICdAdGEvZm9ybS1tb2RlbCc7XG5pbXBvcnQgeyBGb250SWNvbkNvbXBvbmVudCB9IGZyb20gJ0B0YS9pY29ucyc7XG5pbXBvcnQgeyBMYXlvdXRNb2RhbENvbXBvbmVudCB9IGZyb20gJ0B0YS91aSc7XG5pbXBvcnQgeyBUYUJhc2VNb2RhbCB9IGZyb20gJ0B0YS91dGlscyc7XG5cbmltcG9ydCB7IFRhQWJzdHJhY3RJbnB1dENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Fic3RyYWN0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBJbnB1dExheW91dENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2lucHV0LWxheW91dC9pbnB1dC1sYXlvdXQuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGEtaW5wdXQtY29tcG9uZW50JyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW0lucHV0TGF5b3V0Q29tcG9uZW50LCBSZWFjdGl2ZUZvcm1zTW9kdWxlLCBGb250SWNvbkNvbXBvbmVudF0sXG4gIHRlbXBsYXRlVXJsOiAnLi9jb21wb25lbnQuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybDogJy4vY29tcG9uZW50LmNvbXBvbmVudC5zY3NzJyxcbn0pXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50SW5wdXRDb21wb25lbnQgZXh0ZW5kcyBUYUFic3RyYWN0SW5wdXRDb21wb25lbnQ8SW5wdXRDb21wb25lbnQ+IHtcbiAgcmVhZG9ubHkgZGlhbG9nID0gaW5qZWN0KE1hdERpYWxvZyk7XG5cbiAgcHVibGljIG9wZW4oKSB7XG4gICAgdGhpcy5kaWFsb2cub3BlbihUZW1wbGF0ZU1vZGFsLCB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGlucHV0OiB0aGlzLmlucHV0LFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufVxuXG50eXBlIFRlbXBsYXRlTW9kYWxEYXRhID0ge1xuICBpbnB1dDogSW5wdXRDb21wb25lbnQ7XG59O1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnJyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW05nVGVtcGxhdGVPdXRsZXQsIExheW91dE1vZGFsQ29tcG9uZW50XSxcbiAgdGVtcGxhdGVVcmw6ICcuL21vZGFsLmh0bWwnLFxufSlcbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZU1vZGFsIGV4dGVuZHMgVGFCYXNlTW9kYWwge1xuICByZWFkb25seSBkaWFsb2dSZWYgPSBpbmplY3QoTWF0RGlhbG9nUmVmPFRlbXBsYXRlTW9kYWw+KTtcbiAgcmVhZG9ubHkgZGF0YTogVGVtcGxhdGVNb2RhbERhdGEgPSBpbmplY3QoTUFUX0RJQUxPR19EQVRBKTtcblxuICByZWFkb25seSBzZWxlY3RlZFZhbHVlJCA9IG5ldyBTdWJqZWN0PHN0cmluZz4oKTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fcmVnaXN0ZXJTdWJzY3JpcHRpb24oXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWUkLnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQ6IHZhbHVlID0+IHRoaXMuc2VsZWN0KHZhbHVlKSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3QodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuZGF0YS5pbnB1dC5zZWxlY3RlZFZhbHVlJC5uZXh0KHZhbHVlKTtcblxuICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKCk7XG4gIH1cbn1cbiIsIjx0YS1pbnB1dC1sYXlvdXQgW2lucHV0XT1cInRoaXMuaW5wdXRcIj5cbiAgPGRpdiBjbGFzcz1cImNvbXBvbmVudC1jb250YWluZXJcIj5cbiAgICA8aW5wdXRcbiAgICAgICNib3hcbiAgICAgICNmb2N1c2VkRWxlbWVudFxuICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgW3ZhbHVlXT1cInRoaXMuaW5wdXQudmFsdWVcIlxuICAgICAgW2Zvcm1Db250cm9sXT1cIiRhbnkodGhpcy5pbnB1dC5mb3JtQ29udHJvbClcIlxuICAgICAgW3JlYWRvbmx5XT1cInRoaXMuaW5wdXQuZGlzYWJsZWRcIlxuICAgICAgdHlwZT1cInRleHRcIlxuICAgIC8+XG4gICAgPGRpdiBjbGFzcz1cImN0YVwiIChjbGljayk9XCJ0aGlzLm9wZW4oKVwiPlxuICAgICAgPHRhLWZvbnQtaWNvbiBuYW1lPVwicmVzc291cmNlc1wiPjwvdGEtZm9udC1pY29uPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvdGEtaW5wdXQtbGF5b3V0PlxuIiwiPHRhLWxheW91dC1tb2RhbCBzdHlsZT1cImNsYXNzaWNcIiB0aXRsZT1cImlucHV0LmNvbXBvbmVudC5tb2RhbC50aXRsZVwiPlxuICBAaWYodGhpcy5kYXRhLmlucHV0LnRlbXBsYXRlKSB7XG4gIDxuZy10ZW1wbGF0ZVxuICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInRoaXMuZGF0YS5pbnB1dC50ZW1wbGF0ZVwiXG4gICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgc2VsZWN0ZWRWYWx1ZSQ6IHRoaXMuc2VsZWN0ZWRWYWx1ZSQgfVwiXG4gID48L25nLXRlbXBsYXRlPlxuICB9XG48L3RhLWxheW91dC1tb2RhbD5cbiJdfQ==