import { NgTemplateOutlet } from '@angular/common';
import { Component, inject } from '@angular/core';
import { ReactiveFormsModule } from '@angular/forms';
import { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';
import { Subject } from 'rxjs';
import { TaIconsModule } from '@ta/icons';
import { TaLayoutModule, TaUiModule } from '@ta/ui';
import { TaBaseModal } from '@ta/utils';
import { TaAbstractInputComponent } from '../../abstract.component';
import { InputLayoutComponent } from '../../input-layout/input-layout.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@ta/icons";
import * as i3 from "@ta/ui";
export class ComponentInputComponent extends TaAbstractInputComponent {
    constructor() {
        super(...arguments);
        this.dialog = inject(MatDialog);
    }
    open() {
        this.dialog.open(TemplateModal, {
            data: {
                input: this.input,
            },
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: ComponentInputComponent, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.14", type: ComponentInputComponent, isStandalone: true, selector: "ta-input-component", usesInheritance: true, ngImport: i0, template: "<ta-input-layout [input]=\"this.input\">\r\n  <div class=\"component-container\">\r\n    <input\r\n      #box\r\n      #focusedElement\r\n      class=\"form-control\"\r\n      [value]=\"this.input.value\"\r\n      [formControl]=\"$any(this.input.formControl)\"\r\n      [readonly]=\"this.input.disabled\"\r\n      type=\"text\"\r\n    />\r\n    <div class=\"cta\" (click)=\"this.open()\">\r\n      <ta-font-icon name=\"ressources\"></ta-font-icon>\r\n    </div>\r\n  </div>\r\n</ta-input-layout>\r\n", styles: [".component-container{position:relative}.cta{position:absolute;top:0;right:0;padding:var(--ta-space-sm)}\n"], dependencies: [{ kind: "component", type: InputLayoutComponent, selector: "ta-input-layout", inputs: ["input", "width", "height"] }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "directive", type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "ngmodule", type: TaIconsModule }, { kind: "component", type: i2.FontIconComponent, selector: "ta-font-icon", inputs: ["name", "type"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: ComponentInputComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-input-component', standalone: true, imports: [InputLayoutComponent, ReactiveFormsModule, TaIconsModule], template: "<ta-input-layout [input]=\"this.input\">\r\n  <div class=\"component-container\">\r\n    <input\r\n      #box\r\n      #focusedElement\r\n      class=\"form-control\"\r\n      [value]=\"this.input.value\"\r\n      [formControl]=\"$any(this.input.formControl)\"\r\n      [readonly]=\"this.input.disabled\"\r\n      type=\"text\"\r\n    />\r\n    <div class=\"cta\" (click)=\"this.open()\">\r\n      <ta-font-icon name=\"ressources\"></ta-font-icon>\r\n    </div>\r\n  </div>\r\n</ta-input-layout>\r\n", styles: [".component-container{position:relative}.cta{position:absolute;top:0;right:0;padding:var(--ta-space-sm)}\n"] }]
        }] });
export class TemplateModal extends TaBaseModal {
    constructor() {
        super();
        this.dialogRef = inject((MatDialogRef));
        this.data = inject(MAT_DIALOG_DATA);
        this.selectedValue$ = new Subject();
        this.dialogRef.addPanelClass('classic-modal');
        this._registerSubscription(this.selectedValue$.subscribe({
            next: value => this.select(value),
        }));
    }
    select(value) {
        this.data.input.selectedValue$.next(value);
        this.dialogRef.close();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: TemplateModal, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: TemplateModal, isStandalone: true, selector: "ng-component", usesInheritance: true, ngImport: i0, template: "<ta-layout-modal style=\"classic\" title=\"input.component.modal.title\">\r\n  @if(this.data.input.template) {\r\n  <ng-template\r\n    [ngTemplateOutlet]=\"this.data.input.template\"\r\n    [ngTemplateOutletContext]=\"{ selectedValue$: this.selectedValue$ }\"\r\n  ></ng-template>\r\n  }\r\n</ta-layout-modal>\r\n", dependencies: [{ kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: TaLayoutModule }, { kind: "component", type: i3.LayoutModalComponent, selector: "ta-layout-modal", inputs: ["style", "title"] }, { kind: "ngmodule", type: TaUiModule }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: TemplateModal, decorators: [{
            type: Component,
            args: [{ selector: '', standalone: true, imports: [NgTemplateOutlet, TaLayoutModule, TaUiModule], template: "<ta-layout-modal style=\"classic\" title=\"input.component.modal.title\">\r\n  @if(this.data.input.template) {\r\n  <ng-template\r\n    [ngTemplateOutlet]=\"this.data.input.template\"\r\n    [ngTemplateOutletContext]=\"{ selectedValue$: this.selectedValue$ }\"\r\n  ></ng-template>\r\n  }\r\n</ta-layout-modal>\r\n" }]
        }], ctorParameters: () => [] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9jb21wb25lbnQvY29tcG9uZW50LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9jb21wb25lbnQvY29tcG9uZW50LmNvbXBvbmVudC5odG1sIiwiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb21wb25lbnRzL2lucHV0L2NvbXBvbmVudC9tb2RhbC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3JELE9BQU8sRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRXBGLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFHL0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUMxQyxPQUFPLEVBQUUsY0FBYyxFQUFFLFVBQVUsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUNwRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRXhDLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDJDQUEyQyxDQUFDOzs7OztBQVNqRixNQUFNLE9BQU8sdUJBQXdCLFNBQVEsd0JBQXdDO0lBUHJGOztRQVFXLFdBQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7S0FTckM7SUFQUSxJQUFJO1FBQ1QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQzlCLElBQUksRUFBRTtnQkFDSixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7YUFDbEI7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDOytHQVRVLHVCQUF1QjttR0FBdkIsdUJBQXVCLHFHQ3RCcEMscWZBZ0JBLG1LREVZLG9CQUFvQixpR0FBRSxtQkFBbUIseWtCQUFFLGFBQWE7OzRGQUl2RCx1QkFBdUI7a0JBUG5DLFNBQVM7K0JBQ0Usb0JBQW9CLGNBQ2xCLElBQUksV0FDUCxDQUFDLG9CQUFvQixFQUFFLG1CQUFtQixFQUFFLGFBQWEsQ0FBQzs7QUF5QnJFLE1BQU0sT0FBTyxhQUFjLFNBQVEsV0FBVztJQU01QztRQUNFLEtBQUssRUFBRSxDQUFDO1FBTkQsY0FBUyxHQUFHLE1BQU0sQ0FBQyxDQUFBLFlBQTJCLENBQUEsQ0FBQyxDQUFDO1FBQ2hELFNBQUksR0FBc0IsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBRWxELG1CQUFjLEdBQUcsSUFBSSxPQUFPLEVBQVUsQ0FBQztRQUs5QyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUU5QyxJQUFJLENBQUMscUJBQXFCLENBQ3hCLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDO1lBQzVCLElBQUksRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1NBQ2xDLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUFhO1FBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFM0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN6QixDQUFDOytHQXRCVSxhQUFhO21HQUFiLGFBQWEsK0ZFM0MxQiw0VEFRQSw0Q0ZnQ1ksZ0JBQWdCLG1KQUFFLGNBQWMsNklBQUUsVUFBVTs7NEZBRzNDLGFBQWE7a0JBTnpCLFNBQVM7K0JBQ0UsRUFBRSxjQUNBLElBQUksV0FDUCxDQUFDLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxVQUFVLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZ1RlbXBsYXRlT3V0bGV0IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENvbXBvbmVudCwgaW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTUFUX0RJQUxPR19EQVRBLCBNYXREaWFsb2csIE1hdERpYWxvZ1JlZiB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XG5cbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgSW5wdXRDb21wb25lbnQgfSBmcm9tICdAdGEvZm9ybS1tb2RlbCc7XG5pbXBvcnQgeyBUYUljb25zTW9kdWxlIH0gZnJvbSAnQHRhL2ljb25zJztcbmltcG9ydCB7IFRhTGF5b3V0TW9kdWxlLCBUYVVpTW9kdWxlIH0gZnJvbSAnQHRhL3VpJztcbmltcG9ydCB7IFRhQmFzZU1vZGFsIH0gZnJvbSAnQHRhL3V0aWxzJztcblxuaW1wb3J0IHsgVGFBYnN0cmFjdElucHV0Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vYWJzdHJhY3QuY29tcG9uZW50JztcbmltcG9ydCB7IElucHV0TGF5b3V0Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vaW5wdXQtbGF5b3V0L2lucHV0LWxheW91dC5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0YS1pbnB1dC1jb21wb25lbnQnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbSW5wdXRMYXlvdXRDb21wb25lbnQsIFJlYWN0aXZlRm9ybXNNb2R1bGUsIFRhSWNvbnNNb2R1bGVdLFxuICB0ZW1wbGF0ZVVybDogJy4vY29tcG9uZW50LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmw6ICcuL2NvbXBvbmVudC5jb21wb25lbnQuc2NzcycsXG59KVxuZXhwb3J0IGNsYXNzIENvbXBvbmVudElucHV0Q29tcG9uZW50IGV4dGVuZHMgVGFBYnN0cmFjdElucHV0Q29tcG9uZW50PElucHV0Q29tcG9uZW50PiB7XG4gIHJlYWRvbmx5IGRpYWxvZyA9IGluamVjdChNYXREaWFsb2cpO1xuXG4gIHB1YmxpYyBvcGVuKCkge1xuICAgIHRoaXMuZGlhbG9nLm9wZW4oVGVtcGxhdGVNb2RhbCwge1xuICAgICAgZGF0YToge1xuICAgICAgICBpbnB1dDogdGhpcy5pbnB1dCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxudHlwZSBUZW1wbGF0ZU1vZGFsRGF0YSA9IHtcbiAgaW5wdXQ6IElucHV0Q29tcG9uZW50O1xufTtcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJycsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtOZ1RlbXBsYXRlT3V0bGV0LCBUYUxheW91dE1vZHVsZSwgVGFVaU1vZHVsZV0sXG4gIHRlbXBsYXRlVXJsOiAnLi9tb2RhbC5odG1sJyxcbn0pXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVNb2RhbCBleHRlbmRzIFRhQmFzZU1vZGFsIHtcbiAgcmVhZG9ubHkgZGlhbG9nUmVmID0gaW5qZWN0KE1hdERpYWxvZ1JlZjxUZW1wbGF0ZU1vZGFsPik7XG4gIHJlYWRvbmx5IGRhdGE6IFRlbXBsYXRlTW9kYWxEYXRhID0gaW5qZWN0KE1BVF9ESUFMT0dfREFUQSk7XG5cbiAgcmVhZG9ubHkgc2VsZWN0ZWRWYWx1ZSQgPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuZGlhbG9nUmVmLmFkZFBhbmVsQ2xhc3MoJ2NsYXNzaWMtbW9kYWwnKTtcblxuICAgIHRoaXMuX3JlZ2lzdGVyU3Vic2NyaXB0aW9uKFxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlJC5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiB2YWx1ZSA9PiB0aGlzLnNlbGVjdCh2YWx1ZSksXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0KHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmRhdGEuaW5wdXQuc2VsZWN0ZWRWYWx1ZSQubmV4dCh2YWx1ZSk7XG5cbiAgICB0aGlzLmRpYWxvZ1JlZi5jbG9zZSgpO1xuICB9XG59XG4iLCI8dGEtaW5wdXQtbGF5b3V0IFtpbnB1dF09XCJ0aGlzLmlucHV0XCI+XHJcbiAgPGRpdiBjbGFzcz1cImNvbXBvbmVudC1jb250YWluZXJcIj5cclxuICAgIDxpbnB1dFxyXG4gICAgICAjYm94XHJcbiAgICAgICNmb2N1c2VkRWxlbWVudFxyXG4gICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgIFt2YWx1ZV09XCJ0aGlzLmlucHV0LnZhbHVlXCJcclxuICAgICAgW2Zvcm1Db250cm9sXT1cIiRhbnkodGhpcy5pbnB1dC5mb3JtQ29udHJvbClcIlxyXG4gICAgICBbcmVhZG9ubHldPVwidGhpcy5pbnB1dC5kaXNhYmxlZFwiXHJcbiAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgIC8+XHJcbiAgICA8ZGl2IGNsYXNzPVwiY3RhXCIgKGNsaWNrKT1cInRoaXMub3BlbigpXCI+XHJcbiAgICAgIDx0YS1mb250LWljb24gbmFtZT1cInJlc3NvdXJjZXNcIj48L3RhLWZvbnQtaWNvbj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L3RhLWlucHV0LWxheW91dD5cclxuIiwiPHRhLWxheW91dC1tb2RhbCBzdHlsZT1cImNsYXNzaWNcIiB0aXRsZT1cImlucHV0LmNvbXBvbmVudC5tb2RhbC50aXRsZVwiPlxyXG4gIEBpZih0aGlzLmRhdGEuaW5wdXQudGVtcGxhdGUpIHtcclxuICA8bmctdGVtcGxhdGVcclxuICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInRoaXMuZGF0YS5pbnB1dC50ZW1wbGF0ZVwiXHJcbiAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyBzZWxlY3RlZFZhbHVlJDogdGhpcy5zZWxlY3RlZFZhbHVlJCB9XCJcclxuICA+PC9uZy10ZW1wbGF0ZT5cclxuICB9XHJcbjwvdGEtbGF5b3V0LW1vZGFsPlxyXG4iXX0=