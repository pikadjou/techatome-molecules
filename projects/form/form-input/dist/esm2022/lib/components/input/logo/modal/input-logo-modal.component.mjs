import { Component, Inject } from '@angular/core';
import { MAT_DIALOG_DATA } from '@angular/material/dialog';
import { map } from 'rxjs';
import { FontIconComponent } from '@ta/icons';
import { TranslatePipe } from '@ta/translation';
import { ButtonComponent, DualButtonComponent, TitleComponent } from '@ta/ui';
import { TaBaseModal, TemporaryFile, pickImages } from '@ta/utils';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
// eslint-disable-next-line @angular-eslint/component-class-suffix
export class InputLogoModal extends TaBaseModal {
    constructor(dialogRef, data) {
        super();
        this.dialogRef = dialogRef;
        this.data = data;
        this.selection = null;
        this.tempFiles = new TemporaryFile();
        this.uploadPics = async () => {
            const pics = await pickImages();
            if (pics.length > 0) {
                if (this.data.input.update) {
                    this.tempFiles.addFiles(pics);
                    // For logo, pass only the first image (not an array)
                    this.data.input.update(pics[0]);
                }
                // For logo, automatically select the first uploaded image
                this.selection = pics[0].localUrl;
            }
        };
        this.selected = () => {
            this.dialogRef.close(this.selection);
        };
        this.cancel = () => {
            this.dialogRef.close(undefined);
        };
        this.clearSelection = () => {
            this.selection = null;
        };
        this.dialogRef.addPanelClass(['full-screen-modal', 'forced']);
        this.selection = this.data.selection;
    }
    ngOnInit() {
        if (this.data.input.availableFile$) {
            this._registerSubscription(this.data.input.availableFile$.subscribe(() => this.tempFiles.removeAll()));
        }
    }
    getPics$() {
        return this.data.input.availableFile$?.pipe(map(file => ({
            ...file,
            isSelected: this.selection === file.url,
        })));
    }
    onFileSelected(file) {
        // For logo, only one selection is allowed
        this.selection = this.selection === file.url ? null : file.url;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: InputLogoModal, deps: [{ token: i1.MatDialogRef }, { token: MAT_DIALOG_DATA }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: InputLogoModal, isStandalone: true, selector: "ng-component", usesInheritance: true, ngImport: i0, template: "<div class=\"p-space-xl flex-column\">\r\n  <div class=\"flex-column align-center\">\r\n    <ta-title [level]=\"3\">{{ 'input.logo.modal.title' | translate }}</ta-title>\r\n    \r\n    @if (this.selection) {\r\n      <div class=\"flex-column align-center mt-space-lg mb-space-lg\">\r\n        <img [src]=\"this.selection\" alt=\"{{ 'input.logo.modal.current-alt' | translate }}\" class=\"selected-logo bdr-radius-rounded\" />\r\n        <p class=\"mt-space-sm\">{{ 'input.logo.modal.current-description' | translate }}</p>\r\n      </div>\r\n    }\r\n\r\n    <div class=\"flex-column g-space-md full-width\" style=\"max-width: 300px;\">\r\n      <ta-button \r\n        type=\"primary\" \r\n        (action)=\"this.uploadPics()\"\r\n        [options]=\"{ class: 'full-width' }\"\r\n        icon=\"add\"\r\n      >\r\n        {{ 'input.logo.modal.choose' | translate }}\r\n      </ta-button>\r\n      \r\n      @if (this.selection) {\r\n        <ta-button \r\n          type=\"secondary\" \r\n          (action)=\"this.clearSelection()\"\r\n          [options]=\"{ class: 'full-width' }\"\r\n        >\r\n          {{ 'input.logo.modal.clear' | translate }}\r\n        </ta-button>\r\n      }\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"mt-space-xl pt-space-lg\" style=\"border-top: 1px solid var(--ta-border-secondary);\">\r\n    <ta-dual-button\r\n      [isFull]=\"true\"\r\n      [first]=\"{\r\n        icon: 'close',\r\n        label: 'input.logo.modal.cancel',\r\n        callback: this.cancel,\r\n      }\"\r\n      [second]=\"{\r\n        icon: 'check-line',\r\n        label: 'input.logo.modal.confirm',\r\n        callback: this.selected,\r\n      }\"\r\n    ></ta-dual-button>\r\n  </div>\r\n</div>", styles: [".selected-logo{width:150px;height:150px;object-fit:cover;border:2px solid var(--ta-border-secondary)}p{margin:0;color:var(--ta-text-secondary);font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}\n"], dependencies: [{ kind: "component", type: ButtonComponent, selector: "ta-button", inputs: ["state", "type", "size", "icon", "options", "stopPropagationActivation"], outputs: ["action"] }, { kind: "component", type: TitleComponent, selector: "ta-title", inputs: ["level", "isTheme", "isBold"] }, { kind: "component", type: DualButtonComponent, selector: "ta-dual-button", inputs: ["isFull", "first", "second", "type"] }, { kind: "pipe", type: TranslatePipe, name: "translate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: InputLogoModal, decorators: [{
            type: Component,
            args: [{ selector: '', standalone: true, imports: [ButtonComponent, FontIconComponent, TitleComponent, DualButtonComponent, TranslatePipe], template: "<div class=\"p-space-xl flex-column\">\r\n  <div class=\"flex-column align-center\">\r\n    <ta-title [level]=\"3\">{{ 'input.logo.modal.title' | translate }}</ta-title>\r\n    \r\n    @if (this.selection) {\r\n      <div class=\"flex-column align-center mt-space-lg mb-space-lg\">\r\n        <img [src]=\"this.selection\" alt=\"{{ 'input.logo.modal.current-alt' | translate }}\" class=\"selected-logo bdr-radius-rounded\" />\r\n        <p class=\"mt-space-sm\">{{ 'input.logo.modal.current-description' | translate }}</p>\r\n      </div>\r\n    }\r\n\r\n    <div class=\"flex-column g-space-md full-width\" style=\"max-width: 300px;\">\r\n      <ta-button \r\n        type=\"primary\" \r\n        (action)=\"this.uploadPics()\"\r\n        [options]=\"{ class: 'full-width' }\"\r\n        icon=\"add\"\r\n      >\r\n        {{ 'input.logo.modal.choose' | translate }}\r\n      </ta-button>\r\n      \r\n      @if (this.selection) {\r\n        <ta-button \r\n          type=\"secondary\" \r\n          (action)=\"this.clearSelection()\"\r\n          [options]=\"{ class: 'full-width' }\"\r\n        >\r\n          {{ 'input.logo.modal.clear' | translate }}\r\n        </ta-button>\r\n      }\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"mt-space-xl pt-space-lg\" style=\"border-top: 1px solid var(--ta-border-secondary);\">\r\n    <ta-dual-button\r\n      [isFull]=\"true\"\r\n      [first]=\"{\r\n        icon: 'close',\r\n        label: 'input.logo.modal.cancel',\r\n        callback: this.cancel,\r\n      }\"\r\n      [second]=\"{\r\n        icon: 'check-line',\r\n        label: 'input.logo.modal.confirm',\r\n        callback: this.selected,\r\n      }\"\r\n    ></ta-dual-button>\r\n  </div>\r\n</div>", styles: [".selected-logo{width:150px;height:150px;object-fit:cover;border:2px solid var(--ta-border-secondary)}p{margin:0;color:var(--ta-text-secondary);font-size:var(--ta-font-body-sm-default-size);line-height:var(--ta-font-body-sm-default-line);font-weight:var(--ta-font-body-sm-default-weight)}\n"] }]
        }], ctorParameters: () => [{ type: i1.MatDialogRef }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [MAT_DIALOG_DATA]
                }] }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtbG9nby1tb2RhbC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvaW5wdXQvbG9nby9tb2RhbC9pbnB1dC1sb2dvLW1vZGFsLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9sb2dvL21vZGFsL2lucHV0LWxvZ28tbW9kYWwuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDMUQsT0FBTyxFQUFFLGVBQWUsRUFBZ0IsTUFBTSwwQkFBMEIsQ0FBQztBQUV6RSxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRTNCLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUM5QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDaEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxtQkFBbUIsRUFBRSxjQUFjLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDOUUsT0FBTyxFQUFZLFdBQVcsRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFFLE1BQU0sV0FBVyxDQUFDOzs7QUFXN0Usa0VBQWtFO0FBQ2xFLE1BQU0sT0FBTyxjQUFlLFNBQVEsV0FBVztJQUs3QyxZQUNTLFNBQXVDLEVBQ2QsSUFBb0I7UUFFcEQsS0FBSyxFQUFFLENBQUM7UUFIRCxjQUFTLEdBQVQsU0FBUyxDQUE4QjtRQUNkLFNBQUksR0FBSixJQUFJLENBQWdCO1FBTi9DLGNBQVMsR0FBa0IsSUFBSSxDQUFDO1FBRWhDLGNBQVMsR0FBRyxJQUFJLGFBQWEsRUFBRSxDQUFDO1FBZ0NoQyxlQUFVLEdBQUcsS0FBSyxJQUFJLEVBQUU7WUFDN0IsTUFBTSxJQUFJLEdBQUcsTUFBTSxVQUFVLEVBQUUsQ0FBQztZQUNoQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQ3BCLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7b0JBQzNCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUM5QixxREFBcUQ7b0JBQ3JELElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEMsQ0FBQztnQkFDRCwwREFBMEQ7Z0JBQzFELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVMsQ0FBQztZQUNyQyxDQUFDO1FBQ0gsQ0FBQyxDQUFDO1FBRUssYUFBUSxHQUFHLEdBQUcsRUFBRTtZQUNyQixJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdkMsQ0FBQyxDQUFDO1FBRUssV0FBTSxHQUFHLEdBQUcsRUFBRTtZQUNuQixJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNsQyxDQUFDLENBQUM7UUFFSyxtQkFBYyxHQUFHLEdBQUcsRUFBRTtZQUMzQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUN4QixDQUFDLENBQUM7UUEvQ0EsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQzlELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDdkMsQ0FBQztJQUVELFFBQVE7UUFDTixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ25DLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3pHLENBQUM7SUFDSCxDQUFDO0lBRU0sUUFBUTtRQUNiLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLElBQUksQ0FDekMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNYLEdBQUcsSUFBSTtZQUNQLFVBQVUsRUFBRSxJQUFJLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxHQUFHO1NBQ3hDLENBQUMsQ0FBQyxDQUNKLENBQUM7SUFDSixDQUFDO0lBRU0sY0FBYyxDQUFDLElBQWM7UUFDbEMsMENBQTBDO1FBQzFDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDakUsQ0FBQzsrR0FqQ1UsY0FBYyw4Q0FPZixlQUFlO21HQVBkLGNBQWMsK0ZDcEIzQixnckRBZ0RNLDJWRC9CTSxlQUFlLDhKQUFxQixjQUFjLDZGQUFFLG1CQUFtQixxR0FBRSxhQUFhOzs0RkFHckYsY0FBYztrQkFSMUIsU0FBUzsrQkFDRSxFQUFFLGNBR0EsSUFBSSxXQUNQLENBQUMsZUFBZSxFQUFFLGlCQUFpQixFQUFFLGNBQWMsRUFBRSxtQkFBbUIsRUFBRSxhQUFhLENBQUM7OzBCQVU5RixNQUFNOzJCQUFDLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEluamVjdCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE1BVF9ESUFMT0dfREFUQSwgTWF0RGlhbG9nUmVmIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZGlhbG9nJztcclxuXHJcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHsgRm9udEljb25Db21wb25lbnQgfSBmcm9tICdAdGEvaWNvbnMnO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGVQaXBlIH0gZnJvbSAnQHRhL3RyYW5zbGF0aW9uJztcclxuaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50LCBEdWFsQnV0dG9uQ29tcG9uZW50LCBUaXRsZUNvbXBvbmVudCB9IGZyb20gJ0B0YS91aSc7XHJcbmltcG9ydCB7IEZpbGVEYXRhLCBUYUJhc2VNb2RhbCwgVGVtcG9yYXJ5RmlsZSwgcGlja0ltYWdlcyB9IGZyb20gJ0B0YS91dGlscyc7XHJcblxyXG5pbXBvcnQgeyBMb2dvRGlhbG9nRGF0YSB9IGZyb20gJy4uL2lucHV0LWxvZ28uY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnJyxcclxuICBzdHlsZVVybHM6IFsnLi9pbnB1dC1sb2dvLW1vZGFsLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2lucHV0LWxvZ28tbW9kYWwuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0YW5kYWxvbmU6IHRydWUsXHJcbiAgaW1wb3J0czogW0J1dHRvbkNvbXBvbmVudCwgRm9udEljb25Db21wb25lbnQsIFRpdGxlQ29tcG9uZW50LCBEdWFsQnV0dG9uQ29tcG9uZW50LCBUcmFuc2xhdGVQaXBlXSxcclxufSlcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9jb21wb25lbnQtY2xhc3Mtc3VmZml4XHJcbmV4cG9ydCBjbGFzcyBJbnB1dExvZ29Nb2RhbCBleHRlbmRzIFRhQmFzZU1vZGFsIGltcGxlbWVudHMgT25Jbml0IHtcclxuICBwdWJsaWMgc2VsZWN0aW9uOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHVibGljIHRlbXBGaWxlcyA9IG5ldyBUZW1wb3JhcnlGaWxlKCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIGRpYWxvZ1JlZjogTWF0RGlhbG9nUmVmPElucHV0TG9nb01vZGFsPixcclxuICAgIEBJbmplY3QoTUFUX0RJQUxPR19EQVRBKSBwdWJsaWMgZGF0YTogTG9nb0RpYWxvZ0RhdGFcclxuICApIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5kaWFsb2dSZWYuYWRkUGFuZWxDbGFzcyhbJ2Z1bGwtc2NyZWVuLW1vZGFsJywgJ2ZvcmNlZCddKTtcclxuICAgIHRoaXMuc2VsZWN0aW9uID0gdGhpcy5kYXRhLnNlbGVjdGlvbjtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgaWYgKHRoaXMuZGF0YS5pbnB1dC5hdmFpbGFibGVGaWxlJCkge1xyXG4gICAgICB0aGlzLl9yZWdpc3RlclN1YnNjcmlwdGlvbih0aGlzLmRhdGEuaW5wdXQuYXZhaWxhYmxlRmlsZSQuc3Vic2NyaWJlKCgpID0+IHRoaXMudGVtcEZpbGVzLnJlbW92ZUFsbCgpKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0UGljcyQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhLmlucHV0LmF2YWlsYWJsZUZpbGUkPy5waXBlKFxyXG4gICAgICBtYXAoZmlsZSA9PiAoe1xyXG4gICAgICAgIC4uLmZpbGUsXHJcbiAgICAgICAgaXNTZWxlY3RlZDogdGhpcy5zZWxlY3Rpb24gPT09IGZpbGUudXJsLFxyXG4gICAgICB9KSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb25GaWxlU2VsZWN0ZWQoZmlsZTogRmlsZURhdGEpIHtcclxuICAgIC8vIEZvciBsb2dvLCBvbmx5IG9uZSBzZWxlY3Rpb24gaXMgYWxsb3dlZFxyXG4gICAgdGhpcy5zZWxlY3Rpb24gPSB0aGlzLnNlbGVjdGlvbiA9PT0gZmlsZS51cmwgPyBudWxsIDogZmlsZS51cmw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdXBsb2FkUGljcyA9IGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHBpY3MgPSBhd2FpdCBwaWNrSW1hZ2VzKCk7XHJcbiAgICBpZiAocGljcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmICh0aGlzLmRhdGEuaW5wdXQudXBkYXRlKSB7XHJcbiAgICAgICAgdGhpcy50ZW1wRmlsZXMuYWRkRmlsZXMocGljcyk7XHJcbiAgICAgICAgLy8gRm9yIGxvZ28sIHBhc3Mgb25seSB0aGUgZmlyc3QgaW1hZ2UgKG5vdCBhbiBhcnJheSlcclxuICAgICAgICB0aGlzLmRhdGEuaW5wdXQudXBkYXRlKHBpY3NbMF0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEZvciBsb2dvLCBhdXRvbWF0aWNhbGx5IHNlbGVjdCB0aGUgZmlyc3QgdXBsb2FkZWQgaW1hZ2VcclxuICAgICAgdGhpcy5zZWxlY3Rpb24gPSBwaWNzWzBdLmxvY2FsVXJsITtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwdWJsaWMgc2VsZWN0ZWQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLmRpYWxvZ1JlZi5jbG9zZSh0aGlzLnNlbGVjdGlvbik7XHJcbiAgfTtcclxuXHJcbiAgcHVibGljIGNhbmNlbCA9ICgpID0+IHtcclxuICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKHVuZGVmaW5lZCk7XHJcbiAgfTtcclxuXHJcbiAgcHVibGljIGNsZWFyU2VsZWN0aW9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZWxlY3Rpb24gPSBudWxsO1xyXG4gIH07XHJcbn1cclxuIiwiPGRpdiBjbGFzcz1cInAtc3BhY2UteGwgZmxleC1jb2x1bW5cIj5cclxuICA8ZGl2IGNsYXNzPVwiZmxleC1jb2x1bW4gYWxpZ24tY2VudGVyXCI+XHJcbiAgICA8dGEtdGl0bGUgW2xldmVsXT1cIjNcIj57eyAnaW5wdXQubG9nby5tb2RhbC50aXRsZScgfCB0cmFuc2xhdGUgfX08L3RhLXRpdGxlPlxyXG4gICAgXHJcbiAgICBAaWYgKHRoaXMuc2VsZWN0aW9uKSB7XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWNvbHVtbiBhbGlnbi1jZW50ZXIgbXQtc3BhY2UtbGcgbWItc3BhY2UtbGdcIj5cclxuICAgICAgICA8aW1nIFtzcmNdPVwidGhpcy5zZWxlY3Rpb25cIiBhbHQ9XCJ7eyAnaW5wdXQubG9nby5tb2RhbC5jdXJyZW50LWFsdCcgfCB0cmFuc2xhdGUgfX1cIiBjbGFzcz1cInNlbGVjdGVkLWxvZ28gYmRyLXJhZGl1cy1yb3VuZGVkXCIgLz5cclxuICAgICAgICA8cCBjbGFzcz1cIm10LXNwYWNlLXNtXCI+e3sgJ2lucHV0LmxvZ28ubW9kYWwuY3VycmVudC1kZXNjcmlwdGlvbicgfCB0cmFuc2xhdGUgfX08L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgfVxyXG5cclxuICAgIDxkaXYgY2xhc3M9XCJmbGV4LWNvbHVtbiBnLXNwYWNlLW1kIGZ1bGwtd2lkdGhcIiBzdHlsZT1cIm1heC13aWR0aDogMzAwcHg7XCI+XHJcbiAgICAgIDx0YS1idXR0b24gXHJcbiAgICAgICAgdHlwZT1cInByaW1hcnlcIiBcclxuICAgICAgICAoYWN0aW9uKT1cInRoaXMudXBsb2FkUGljcygpXCJcclxuICAgICAgICBbb3B0aW9uc109XCJ7IGNsYXNzOiAnZnVsbC13aWR0aCcgfVwiXHJcbiAgICAgICAgaWNvbj1cImFkZFwiXHJcbiAgICAgID5cclxuICAgICAgICB7eyAnaW5wdXQubG9nby5tb2RhbC5jaG9vc2UnIHwgdHJhbnNsYXRlIH19XHJcbiAgICAgIDwvdGEtYnV0dG9uPlxyXG4gICAgICBcclxuICAgICAgQGlmICh0aGlzLnNlbGVjdGlvbikge1xyXG4gICAgICAgIDx0YS1idXR0b24gXHJcbiAgICAgICAgICB0eXBlPVwic2Vjb25kYXJ5XCIgXHJcbiAgICAgICAgICAoYWN0aW9uKT1cInRoaXMuY2xlYXJTZWxlY3Rpb24oKVwiXHJcbiAgICAgICAgICBbb3B0aW9uc109XCJ7IGNsYXNzOiAnZnVsbC13aWR0aCcgfVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge3sgJ2lucHV0LmxvZ28ubW9kYWwuY2xlYXInIHwgdHJhbnNsYXRlIH19XHJcbiAgICAgICAgPC90YS1idXR0b24+XHJcbiAgICAgIH1cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG5cclxuICA8ZGl2IGNsYXNzPVwibXQtc3BhY2UteGwgcHQtc3BhY2UtbGdcIiBzdHlsZT1cImJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS10YS1ib3JkZXItc2Vjb25kYXJ5KTtcIj5cclxuICAgIDx0YS1kdWFsLWJ1dHRvblxyXG4gICAgICBbaXNGdWxsXT1cInRydWVcIlxyXG4gICAgICBbZmlyc3RdPVwie1xyXG4gICAgICAgIGljb246ICdjbG9zZScsXHJcbiAgICAgICAgbGFiZWw6ICdpbnB1dC5sb2dvLm1vZGFsLmNhbmNlbCcsXHJcbiAgICAgICAgY2FsbGJhY2s6IHRoaXMuY2FuY2VsLFxyXG4gICAgICB9XCJcclxuICAgICAgW3NlY29uZF09XCJ7XHJcbiAgICAgICAgaWNvbjogJ2NoZWNrLWxpbmUnLFxyXG4gICAgICAgIGxhYmVsOiAnaW5wdXQubG9nby5tb2RhbC5jb25maXJtJyxcclxuICAgICAgICBjYWxsYmFjazogdGhpcy5zZWxlY3RlZCxcclxuICAgICAgfVwiXHJcbiAgICA+PC90YS1kdWFsLWJ1dHRvbj5cclxuICA8L2Rpdj5cclxuPC9kaXY+Il19