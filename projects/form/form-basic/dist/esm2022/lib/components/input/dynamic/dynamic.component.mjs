import { NgIf, NgFor, NgClass, NgTemplateOutlet } from "@angular/common";
import { LocalIconComponent } from "@ta/icons";
import { Component, input } from "@angular/core";
import { TranslatePipe } from "@ta/translation";
import { ButtonComponent } from "@ta/ui";
import { TaBaseComponent } from "@ta/utils";
import * as i0 from "@angular/core";
export class DynamicComponent extends TaBaseComponent {
    // Getter for backward compatibility
    get input() {
        return this.inputModel();
    }
    constructor() {
        super();
        this.inputsTemplate = input.required();
        this.inputModel = input.required({ alias: 'input' });
        this.add = () => {
            this.input.add();
        };
        this.remove = (index) => {
            this.input.remove(index);
        };
    }
    canRemove(index) {
        return !isNaN(Number(index));
    }
    getKeys() {
        return Object.keys(this.input.inputsGroup);
    }
    getInputs(key) {
        return this.input.inputsGroup[key];
    }
    trackByFn(_, key) {
        return key;
    }
    trackInputByFn(_, input) {
        return input.key;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: DynamicComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.14", type: DynamicComponent, isStandalone: true, selector: "ta-input-dynamic", inputs: { inputsTemplate: { classPropertyName: "inputsTemplate", publicName: "inputsTemplate", isSignal: true, isRequired: true, transformFunction: null }, inputModel: { classPropertyName: "inputModel", publicName: "input", isSignal: true, isRequired: true, transformFunction: null } }, usesInheritance: true, ngImport: i0, template: "<div>\n  <div class=\"header\">\n    <h4>{{ input.label }}</h4>\n  </div>\n\n  @for (key of getKeys(); track trackByFn($index, key)) {\n  <div>\n    @if (this.canRemove(key)) {\n    <div class=\"remove-action\">\n      <ta-button\n        class=\"remove-action\"\n        [style]=\"'danger'\"\n        (action)=\"remove(key)\"\n      >\n        <ta-local-icon [type]=\"this.icon.DeleteLight\" size=\"xs\"></ta-local-icon>\n      </ta-button>\n    </div>\n    } @for (input of this.getInputs(key); track trackInputByFn($index, input)) {\n    @if (input) {\n    <div [ngClass]=\"input.class\">\n      <ng-container\n        [ngTemplateOutlet]=\"this.inputsTemplate()\"\n        [ngTemplateOutletContext]=\"{\n                input: input,\n              }\"\n      >\n      </ng-container>\n    </div>\n    } }\n  </div>\n  }\n  <ta-button (action)=\"add()\">{{ \"form.dynamic.add\" | translate }}</ta-button>\n</div>\n", styles: [".remove-action{position:absolute;margin-top:16px;right:8px}\n"], dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "component", type: LocalIconComponent, selector: "ta-local-icon", inputs: ["type", "size", "rotation"] }, { kind: "component", type: ButtonComponent, selector: "ta-button", inputs: ["state", "type", "size", "icon", "options", "stopPropagationActivation"], outputs: ["action"] }, { kind: "pipe", type: TranslatePipe, name: "translate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.14", ngImport: i0, type: DynamicComponent, decorators: [{
            type: Component,
            args: [{ selector: "ta-input-dynamic", standalone: true, imports: [
                        NgIf,
                        NgFor,
                        NgClass,
                        NgTemplateOutlet,
                        LocalIconComponent,
                        ButtonComponent,
                        TranslatePipe,
                    ], template: "<div>\n  <div class=\"header\">\n    <h4>{{ input.label }}</h4>\n  </div>\n\n  @for (key of getKeys(); track trackByFn($index, key)) {\n  <div>\n    @if (this.canRemove(key)) {\n    <div class=\"remove-action\">\n      <ta-button\n        class=\"remove-action\"\n        [style]=\"'danger'\"\n        (action)=\"remove(key)\"\n      >\n        <ta-local-icon [type]=\"this.icon.DeleteLight\" size=\"xs\"></ta-local-icon>\n      </ta-button>\n    </div>\n    } @for (input of this.getInputs(key); track trackInputByFn($index, input)) {\n    @if (input) {\n    <div [ngClass]=\"input.class\">\n      <ng-container\n        [ngTemplateOutlet]=\"this.inputsTemplate()\"\n        [ngTemplateOutletContext]=\"{\n                input: input,\n              }\"\n      >\n      </ng-container>\n    </div>\n    } }\n  </div>\n  }\n  <ta-button (action)=\"add()\">{{ \"form.dynamic.add\" | translate }}</ta-button>\n</div>\n", styles: [".remove-action{position:absolute;margin-top:16px;right:8px}\n"] }]
        }], ctorParameters: () => [] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pYy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvaW5wdXQvZHluYW1pYy9keW5hbWljLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvY29tcG9uZW50cy9pbnB1dC9keW5hbWljL2R5bmFtaWMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDekUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBQy9DLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFlLE1BQU0sZUFBZSxDQUFDO0FBRzlELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxXQUFXLENBQUM7O0FBaUI1QyxNQUFNLE9BQU8sZ0JBQWlCLFNBQVEsZUFBZTtJQUtuRCxvQ0FBb0M7SUFDcEMsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVEO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFWVixtQkFBYyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQW9CLENBQUM7UUFFcEQsZUFBVSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQWUsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztRQVd2RCxRQUFHLEdBQUcsR0FBRyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDbkIsQ0FBQyxDQUFDO1FBTUssV0FBTSxHQUFHLENBQUMsS0FBYSxFQUFFLEVBQUU7WUFDaEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDM0IsQ0FBQyxDQUFDO0lBWkYsQ0FBQztJQU1NLFNBQVMsQ0FBQyxLQUFhO1FBQzVCLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQU1NLE9BQU87UUFDWixPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRU0sU0FBUyxDQUFDLEdBQVc7UUFDMUIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBRU0sU0FBUyxDQUFDLENBQVMsRUFBRSxHQUFXO1FBQ3JDLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztJQUVNLGNBQWMsQ0FBQyxDQUFTLEVBQUUsS0FBcUI7UUFDcEQsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDO0lBQ25CLENBQUM7K0dBeENVLGdCQUFnQjttR0FBaEIsZ0JBQWdCLGtZQ3hCN0IsdTVCQWlDQSx1SERoQkksT0FBTyxvRkFDUCxnQkFBZ0Isb0pBQ2hCLGtCQUFrQixnR0FDbEIsZUFBZSx5SkFDZixhQUFhOzs0RkFHSixnQkFBZ0I7a0JBZjVCLFNBQVM7K0JBQ0Usa0JBQWtCLGNBR2hCLElBQUksV0FDUDt3QkFDUCxJQUFJO3dCQUNKLEtBQUs7d0JBQ0wsT0FBTzt3QkFDUCxnQkFBZ0I7d0JBQ2hCLGtCQUFrQjt3QkFDbEIsZUFBZTt3QkFDZixhQUFhO3FCQUNkIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmdJZiwgTmdGb3IsIE5nQ2xhc3MsIE5nVGVtcGxhdGVPdXRsZXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29tbW9uXCI7XG5pbXBvcnQgeyBMb2NhbEljb25Db21wb25lbnQgfSBmcm9tIFwiQHRhL2ljb25zXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIGlucHV0LCBUZW1wbGF0ZVJlZiB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5cbmltcG9ydCB7IElucHV0QmFzZSwgSW5wdXREeW5hbWljIH0gZnJvbSBcIkB0YS9mb3JtLW1vZGVsXCI7XG5pbXBvcnQgeyBUcmFuc2xhdGVQaXBlIH0gZnJvbSBcIkB0YS90cmFuc2xhdGlvblwiO1xuaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50IH0gZnJvbSBcIkB0YS91aVwiO1xuaW1wb3J0IHsgVGFCYXNlQ29tcG9uZW50IH0gZnJvbSBcIkB0YS91dGlsc1wiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6IFwidGEtaW5wdXQtZHluYW1pY1wiLFxuICB0ZW1wbGF0ZVVybDogXCIuL2R5bmFtaWMuY29tcG9uZW50Lmh0bWxcIixcbiAgc3R5bGVVcmxzOiBbXCIuL2R5bmFtaWMuY29tcG9uZW50LnNjc3NcIl0sXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBOZ0lmLFxuICAgIE5nRm9yLFxuICAgIE5nQ2xhc3MsXG4gICAgTmdUZW1wbGF0ZU91dGxldCxcbiAgICBMb2NhbEljb25Db21wb25lbnQsXG4gICAgQnV0dG9uQ29tcG9uZW50LFxuICAgIFRyYW5zbGF0ZVBpcGUsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIER5bmFtaWNDb21wb25lbnQgZXh0ZW5kcyBUYUJhc2VDb21wb25lbnQge1xuICBpbnB1dHNUZW1wbGF0ZSA9IGlucHV0LnJlcXVpcmVkPFRlbXBsYXRlUmVmPGFueT4+KCk7XG5cbiAgaW5wdXRNb2RlbCA9IGlucHV0LnJlcXVpcmVkPElucHV0RHluYW1pYz4oeyBhbGlhczogJ2lucHV0JyB9KTtcblxuICAvLyBHZXR0ZXIgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgZ2V0IGlucHV0KCk6IElucHV0RHluYW1pYyB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRNb2RlbCgpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGQgPSAoKSA9PiB7XG4gICAgdGhpcy5pbnB1dC5hZGQoKTtcbiAgfTtcblxuICBwdWJsaWMgY2FuUmVtb3ZlKGluZGV4OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcihpbmRleCkpO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZSA9IChpbmRleDogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5pbnB1dC5yZW1vdmUoaW5kZXgpO1xuICB9O1xuXG4gIHB1YmxpYyBnZXRLZXlzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5pbnB1dC5pbnB1dHNHcm91cCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5wdXRzKGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXQuaW5wdXRzR3JvdXBba2V5XTtcbiAgfVxuXG4gIHB1YmxpYyB0cmFja0J5Rm4oXzogbnVtYmVyLCBrZXk6IHN0cmluZykge1xuICAgIHJldHVybiBrZXk7XG4gIH1cblxuICBwdWJsaWMgdHJhY2tJbnB1dEJ5Rm4oXzogbnVtYmVyLCBpbnB1dDogSW5wdXRCYXNlPGFueT4pIHtcbiAgICByZXR1cm4gaW5wdXQua2V5O1xuICB9XG59XG4iLCI8ZGl2PlxuICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgPGg0Pnt7IGlucHV0LmxhYmVsIH19PC9oND5cbiAgPC9kaXY+XG5cbiAgQGZvciAoa2V5IG9mIGdldEtleXMoKTsgdHJhY2sgdHJhY2tCeUZuKCRpbmRleCwga2V5KSkge1xuICA8ZGl2PlxuICAgIEBpZiAodGhpcy5jYW5SZW1vdmUoa2V5KSkge1xuICAgIDxkaXYgY2xhc3M9XCJyZW1vdmUtYWN0aW9uXCI+XG4gICAgICA8dGEtYnV0dG9uXG4gICAgICAgIGNsYXNzPVwicmVtb3ZlLWFjdGlvblwiXG4gICAgICAgIFtzdHlsZV09XCInZGFuZ2VyJ1wiXG4gICAgICAgIChhY3Rpb24pPVwicmVtb3ZlKGtleSlcIlxuICAgICAgPlxuICAgICAgICA8dGEtbG9jYWwtaWNvbiBbdHlwZV09XCJ0aGlzLmljb24uRGVsZXRlTGlnaHRcIiBzaXplPVwieHNcIj48L3RhLWxvY2FsLWljb24+XG4gICAgICA8L3RhLWJ1dHRvbj5cbiAgICA8L2Rpdj5cbiAgICB9IEBmb3IgKGlucHV0IG9mIHRoaXMuZ2V0SW5wdXRzKGtleSk7IHRyYWNrIHRyYWNrSW5wdXRCeUZuKCRpbmRleCwgaW5wdXQpKSB7XG4gICAgQGlmIChpbnB1dCkge1xuICAgIDxkaXYgW25nQ2xhc3NdPVwiaW5wdXQuY2xhc3NcIj5cbiAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwidGhpcy5pbnB1dHNUZW1wbGF0ZSgpXCJcbiAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cIntcbiAgICAgICAgICAgICAgICBpbnB1dDogaW5wdXQsXG4gICAgICAgICAgICAgIH1cIlxuICAgICAgPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9kaXY+XG4gICAgfSB9XG4gIDwvZGl2PlxuICB9XG4gIDx0YS1idXR0b24gKGFjdGlvbik9XCJhZGQoKVwiPnt7IFwiZm9ybS5keW5hbWljLmFkZFwiIHwgdHJhbnNsYXRlIH19PC90YS1idXR0b24+XG48L2Rpdj5cbiJdfQ==