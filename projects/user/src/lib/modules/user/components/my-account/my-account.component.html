<div class="mx-space-sm" appStopPropagation>
  <cam-loader
    [isLoading]="this.requestState.isLoading()"
    *ngLet="this.profile$ | async as profile"
  >
    <cam-error
      [message]="this.requestState.getErrorMessage()"
      [code]="this.requestState.getErrorStatus()"
    >
      <cam-empty [isEmpty]="!profile">
        <div class="bdp-b color-border-primary">
          <div class="pt-space-xs m-xs">
            <cam-inline-profile-data
              [profile]="profile ?? {}"
              [userLogo]="this.userLogo$ | async"
              (click)="this.navigateToProfile()"
            ></cam-inline-profile-data>
            <div class="my-space-md" *ngIf="this.isEditable">
              <cam-button
                (action)="this.navigateToEditProfile()"
                [style]="'secondary'"
              >
                <div class="align-center button-content">
                  <cam-font-icon
                    name="modify"
                    class="mr-space-xs modify-icon"
                  ></cam-font-icon>
                  <div class="text">
                    {{ "user.modify" | translate }}
                  </div>
                </div>
              </cam-button>
            </div>
          </div>
        </div>
      </cam-empty>
    </cam-error>
  </cam-loader>

  <div *ngIf="this.profileMenu" class="bdp-b color-border-primary pt-space-xs">
    <cam-menu [menu]="this.profileMenu" [style]="'dark'"></cam-menu>
  </div>

  <div *ngIf="this.disconnectionMenu" class="bdp-b pt-space-xs">
    <cam-menu [menu]="this.disconnectionMenu" [style]="'dark'"></cam-menu>
  </div>
  <div class="ta-c">
    <small>{{ this.appVersion }}</small>
  </div>
</div>

<ng-template #languageTemplate>
  <cam-switch-language></cam-switch-language>
</ng-template>

<ng-template #infosTemplate>
  <div class="mx-space-sm info-panel" *ngIf="this.infosMenu">
    <cam-menu [menu]="this.infosMenu" [style]="'dark'"></cam-menu>
  </div>
</ng-template>
