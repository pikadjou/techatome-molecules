<div class="mx-space-sm" appStopPropagation>
  <ta-loader [isLoading]="this.requestState.isLoading()" *ngLet="this.profile$ | async as profile">
    <ta-error [message]="this.requestState.getErrorMessage()" [code]="this.requestState.getErrorStatus()">
      <ta-empty [isEmpty]="!profile">
        <div class="bdp-b color-border-primary">
          <div class="pt-space-xs m-xs">
            <ta-inline-profile-data
              [profile]="profile ?? {}"
              [userLogo]="this.userLogo$ | async"
              (click)="this.navigateToProfile()"
            ></ta-inline-profile-data>
            <div class="my-space-md" *ngIf="this.isEditable">
              <ta-button (action)="this.navigateToEditProfile()" [style]="'secondary'">
                <div class="align-center button-content">
                  <ta-font-icon name="modify" class="mr-space-xs modify-icon"></ta-font-icon>
                  <div class="text">
                    {{ 'user.modify' | translate }}
                  </div>
                </div>
              </ta-button>
            </div>
          </div>
        </div>
      </ta-empty>
    </ta-error>
  </ta-loader>

  <div *ngIf="this.profileMenu" class="bdp-b color-border-primary pt-space-xs">
    <ta-menu [menu]="this.profileMenu" [style]="'dark'"></ta-menu>
  </div>

  <div *ngIf="this.disconnectionMenu" class="bdp-b pt-space-xs">
    <ta-menu [menu]="this.disconnectionMenu" [style]="'dark'"></ta-menu>
  </div>
  <div class="ta-c">
    <small>{{ this.appVersion }}</small>
  </div>
</div>

<ng-template #languageTemplate>
  <ta-switch-language></ta-switch-language>
</ng-template>

<ng-template #infosTemplate>
  <div class="mx-space-sm info-panel" *ngIf="this.infosMenu">
    <ta-menu [menu]="this.infosMenu" [style]="'dark'"></ta-menu>
  </div>
</ng-template>
