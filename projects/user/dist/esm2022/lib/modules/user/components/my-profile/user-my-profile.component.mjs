import { AsyncPipe, NgFor, NgIf } from '@angular/common';
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { TranslatePipe } from '@ta/translation';
import { EmptyComponent, ErrorComponent, LinkComponent, ListContainerComponent, ListElementComponent, ListExtraInformationComponent, ListTitleComponent, LoaderComponent, TitleComponent, UiProfileDisplayComponent, } from '@ta/ui';
import { TaBaseComponent, fullName, sendMail } from '@ta/utils';
import * as i0 from "@angular/core";
import * as i1 from "../../services/users.service";
export class UserMyProfileComponent extends TaBaseComponent {
    get currentUser$() {
        return this._userService.currentUser.get$();
    }
    constructor(_userService) {
        super();
        this._userService = _userService;
        this.canModify = true;
        this.modifyAction = new EventEmitter();
        this.mailTo = sendMail;
        this.ctas = [
            {
                icon: 'modify',
                label: 'user.modify',
                callback: () => this._modifyProfile(),
            },
        ];
        this._fetch();
    }
    getFullName(firstName, lastName) {
        return fullName({ firstName: firstName, name: lastName });
    }
    getUserLogo(user) {
        return {
            userInfo: {
                profilePictureUrl: user.picture,
                naming: {
                    name: user.lastName,
                    firstName: user.firstName,
                    trigram: user.trigram,
                },
            },
        };
    }
    _fetch() {
        this.requestState.asked();
        this._userService.fetchCurrentUser$().subscribe({
            complete: () => this.requestState.completed(),
            error: (error) => {
                this.requestState.onError(error.status, error.statusText);
            },
        });
    }
    _modifyProfile() {
        this.modifyAction.emit();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: UserMyProfileComponent, deps: [{ token: i1.CamUsersService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: UserMyProfileComponent, isStandalone: true, selector: "ta-user-my-profile", inputs: { canModify: "canModify" }, outputs: { modifyAction: "modifyAction" }, usesInheritance: true, ngImport: i0, template: "<ta-loader [isLoading]=\"this.requestState.isLoading()\" *ngLet=\"this.currentUser$ | async as currentUser\">\n  <ta-error [message]=\"this.requestState.getErrorMessage()\" [code]=\"this.requestState.getErrorStatus()\">\n    <ta-empty [isEmpty]=\"!currentUser\">\n      @if (currentUser) {\n        <ta-ui-profile-display\n          [label]=\"this.getFullName(currentUser.firstName, currentUser.lastName)\"\n          [ctas]=\"this.canModify ? this.ctas : null\"\n          [userLogo]=\"this.getUserLogo(currentUser)\"\n        >\n          <div class=\"pt-space-xxl\">\n            <div class=\"pt-space-xs align-center\">\n              <ta-title class=\"m-a\" [level]=\"3\">\n                <ta-link (action)=\"this.mailTo(currentUser.userName)\">{{ currentUser.userName }}</ta-link>\n              </ta-title>\n            </div>\n            <div class=\"pt-space-xs align-center\">\n              <ta-title class=\"m-a\" [level]=\"3\">\n                {{ currentUser.phoneNumber }}\n              </ta-title>\n            </div>\n            @if (currentUser.tenantInformations.length === 1) {\n              <div class=\"align-center\">\n                <ta-title class=\"m-a\" [level]=\"3\">\n                  {{ 'user.clientnumber' | translate }}\n                  {{ currentUser.tenantInformations[0].customerId }}\n                </ta-title>\n              </div>\n            }\n            @if (currentUser.tenantInformations.length > 1) {\n              <div>\n                <div class=\"pt-space-xxl align-center\">\n                  <ta-title class=\"m-a\" [level]=\"3\">\n                    {{ 'user.tenantlisttitle' | translate }}\n                  </ta-title>\n                </div>\n                <div class=\"list\">\n                  <div class=\"tenant-list\">\n                    <ta-list-container>\n                      @for (tenantInformation of currentUser.tenantInformations; track tenantInformation) {\n                        <ta-list-element [withSeparator]=\"false\">\n                          <ta-list-title>\n                            <div>{{ tenantInformation.tenantName }}</div>\n                          </ta-list-title>\n                          <ta-list-extra-information>\n                            @if (tenantInformation.customerId) {\n                              <div class=\"align-center\">\n                                <div class=\"mr-space-sm\">\n                                  {{ tenantInformation.customerId }}\n                                </div>\n                                <!-- <ta-text-to-clipboard [value]=\"tenantInformation.customerId.toString()\" ></ta-text-to-clipboard> -->\n                              </div>\n                            }\n                          </ta-list-extra-information>\n                        </ta-list-element>\n                      }\n                    </ta-list-container>\n                  </div>\n                </div>\n              </div>\n            }\n          </div>\n        </ta-ui-profile-display>\n      }\n    </ta-empty>\n  </ta-error>\n</ta-loader>\n", styles: [".text{font-size:var(--ta-font-key-key-default-size);line-height:var(--ta-font-key-key-default-line);font-weight:var(--ta-font-key-key-default-weight);display:flex;justify-content:center;line-height:32px}.list{display:flex;justify-content:center}.list .tenant-list{min-width:240px}\n"], dependencies: [{ kind: "pipe", type: AsyncPipe, name: "async" }, { kind: "component", type: TitleComponent, selector: "ta-title", inputs: ["level", "isTheme", "isBold"] }, { kind: "component", type: ListContainerComponent, selector: "ta-list-container" }, { kind: "component", type: ListElementComponent, selector: "ta-list-element", inputs: ["withSeparator", "flexColumn"], outputs: ["action"] }, { kind: "component", type: ListTitleComponent, selector: "ta-list-title" }, { kind: "component", type: ListExtraInformationComponent, selector: "ta-list-extra-information" }, { kind: "component", type: LoaderComponent, selector: "ta-loader", inputs: ["isLoading", "skeleton"] }, { kind: "component", type: ErrorComponent, selector: "ta-error", inputs: ["message", "code"] }, { kind: "component", type: EmptyComponent, selector: "ta-empty", inputs: ["isEmpty", "isLight", "showMessage", "text", "type", "icon", "iconSize"] }, { kind: "component", type: UiProfileDisplayComponent, selector: "ta-ui-profile-display", inputs: ["label", "userLogo", "ctas", "sideIcon"] }, { kind: "component", type: LinkComponent, selector: "ta-link", inputs: ["state", "underline", "bold", "size", "icon"], outputs: ["action"] }, { kind: "pipe", type: TranslatePipe, name: "translate" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: UserMyProfileComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ta-user-my-profile', standalone: true, imports: [
                        NgIf,
                        NgFor,
                        AsyncPipe,
                        TitleComponent,
                        ListContainerComponent,
                        ListElementComponent,
                        ListTitleComponent,
                        ListExtraInformationComponent,
                        LoaderComponent,
                        ErrorComponent,
                        EmptyComponent,
                        UiProfileDisplayComponent,
                        LinkComponent,
                        TranslatePipe,
                    ], template: "<ta-loader [isLoading]=\"this.requestState.isLoading()\" *ngLet=\"this.currentUser$ | async as currentUser\">\n  <ta-error [message]=\"this.requestState.getErrorMessage()\" [code]=\"this.requestState.getErrorStatus()\">\n    <ta-empty [isEmpty]=\"!currentUser\">\n      @if (currentUser) {\n        <ta-ui-profile-display\n          [label]=\"this.getFullName(currentUser.firstName, currentUser.lastName)\"\n          [ctas]=\"this.canModify ? this.ctas : null\"\n          [userLogo]=\"this.getUserLogo(currentUser)\"\n        >\n          <div class=\"pt-space-xxl\">\n            <div class=\"pt-space-xs align-center\">\n              <ta-title class=\"m-a\" [level]=\"3\">\n                <ta-link (action)=\"this.mailTo(currentUser.userName)\">{{ currentUser.userName }}</ta-link>\n              </ta-title>\n            </div>\n            <div class=\"pt-space-xs align-center\">\n              <ta-title class=\"m-a\" [level]=\"3\">\n                {{ currentUser.phoneNumber }}\n              </ta-title>\n            </div>\n            @if (currentUser.tenantInformations.length === 1) {\n              <div class=\"align-center\">\n                <ta-title class=\"m-a\" [level]=\"3\">\n                  {{ 'user.clientnumber' | translate }}\n                  {{ currentUser.tenantInformations[0].customerId }}\n                </ta-title>\n              </div>\n            }\n            @if (currentUser.tenantInformations.length > 1) {\n              <div>\n                <div class=\"pt-space-xxl align-center\">\n                  <ta-title class=\"m-a\" [level]=\"3\">\n                    {{ 'user.tenantlisttitle' | translate }}\n                  </ta-title>\n                </div>\n                <div class=\"list\">\n                  <div class=\"tenant-list\">\n                    <ta-list-container>\n                      @for (tenantInformation of currentUser.tenantInformations; track tenantInformation) {\n                        <ta-list-element [withSeparator]=\"false\">\n                          <ta-list-title>\n                            <div>{{ tenantInformation.tenantName }}</div>\n                          </ta-list-title>\n                          <ta-list-extra-information>\n                            @if (tenantInformation.customerId) {\n                              <div class=\"align-center\">\n                                <div class=\"mr-space-sm\">\n                                  {{ tenantInformation.customerId }}\n                                </div>\n                                <!-- <ta-text-to-clipboard [value]=\"tenantInformation.customerId.toString()\" ></ta-text-to-clipboard> -->\n                              </div>\n                            }\n                          </ta-list-extra-information>\n                        </ta-list-element>\n                      }\n                    </ta-list-container>\n                  </div>\n                </div>\n              </div>\n            }\n          </div>\n        </ta-ui-profile-display>\n      }\n    </ta-empty>\n  </ta-error>\n</ta-loader>\n", styles: [".text{font-size:var(--ta-font-key-key-default-size);line-height:var(--ta-font-key-key-default-line);font-weight:var(--ta-font-key-key-default-weight);display:flex;justify-content:center;line-height:32px}.list{display:flex;justify-content:center}.list .tenant-list{min-width:240px}\n"] }]
        }], ctorParameters: () => [{ type: i1.CamUsersService }], propDecorators: { canModify: [{
                type: Input
            }], modifyAction: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1teS1wcm9maWxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvbW9kdWxlcy91c2VyL2NvbXBvbmVudHMvbXktcHJvZmlsZS91c2VyLW15LXByb2ZpbGUuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9tb2R1bGVzL3VzZXIvY29tcG9uZW50cy9teS1wcm9maWxlL3VzZXItbXktcHJvZmlsZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUV6RCxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXZFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNoRCxPQUFPLEVBQ0wsY0FBYyxFQUNkLGNBQWMsRUFDZCxhQUFhLEVBQ2Isc0JBQXNCLEVBQ3RCLG9CQUFvQixFQUNwQiw2QkFBNkIsRUFDN0Isa0JBQWtCLEVBQ2xCLGVBQWUsRUFDZixjQUFjLEVBQ2QseUJBQXlCLEdBQzFCLE1BQU0sUUFBUSxDQUFDO0FBQ2hCLE9BQU8sRUFBRSxlQUFlLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLFdBQVcsQ0FBQzs7O0FBMkJoRSxNQUFNLE9BQU8sc0JBQXVCLFNBQVEsZUFBZTtJQWdCekQsSUFBSSxZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUM5QyxDQUFDO0lBQ0QsWUFBb0IsWUFBNkI7UUFDL0MsS0FBSyxFQUFFLENBQUM7UUFEVSxpQkFBWSxHQUFaLFlBQVksQ0FBaUI7UUFqQmpELGNBQVMsR0FBWSxJQUFJLENBQUM7UUFHMUIsaUJBQVksR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRWxCLFdBQU0sR0FBRyxRQUFRLENBQUM7UUFFM0IsU0FBSSxHQUFHO1lBQ1o7Z0JBQ0UsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsS0FBSyxFQUFFLGFBQWE7Z0JBQ3BCLFFBQVEsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFO2FBQ3RDO1NBQ0YsQ0FBQztRQU1BLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBRU0sV0FBVyxDQUFDLFNBQWlCLEVBQUUsUUFBZ0I7UUFDcEQsT0FBTyxRQUFRLENBQUMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFTSxXQUFXLENBQUMsSUFBVTtRQUMzQixPQUFPO1lBQ0wsUUFBUSxFQUFFO2dCQUNSLGlCQUFpQixFQUFFLElBQUksQ0FBQyxPQUFPO2dCQUMvQixNQUFNLEVBQUU7b0JBQ04sSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRO29CQUNuQixTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7b0JBQ3pCLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztpQkFDdEI7YUFDRjtTQUNGLENBQUM7SUFDSixDQUFDO0lBRU8sTUFBTTtRQUNaLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLFNBQVMsQ0FBQztZQUM5QyxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUU7WUFDN0MsS0FBSyxFQUFFLENBQUMsS0FBd0IsRUFBRSxFQUFFO2dCQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM1RCxDQUFDO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVPLGNBQWM7UUFDcEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMzQixDQUFDOytHQXJEVSxzQkFBc0I7bUdBQXRCLHNCQUFzQixvTEM1Q25DLGlpR0FrRUEsK1VEcENJLFNBQVMsOENBQ1QsY0FBYyw2RkFDZCxzQkFBc0IsOERBQ3RCLG9CQUFvQiwwSEFDcEIsa0JBQWtCLDBEQUNsQiw2QkFBNkIsc0VBQzdCLGVBQWUseUZBQ2YsY0FBYyxrRkFDZCxjQUFjLHdJQUNkLHlCQUF5QixxSEFDekIsYUFBYSw0SEFDYixhQUFhOzs0RkFHSixzQkFBc0I7a0JBdEJsQyxTQUFTOytCQUNFLG9CQUFvQixjQUdsQixJQUFJLFdBQ1A7d0JBQ1AsSUFBSTt3QkFDSixLQUFLO3dCQUNMLFNBQVM7d0JBQ1QsY0FBYzt3QkFDZCxzQkFBc0I7d0JBQ3RCLG9CQUFvQjt3QkFDcEIsa0JBQWtCO3dCQUNsQiw2QkFBNkI7d0JBQzdCLGVBQWU7d0JBQ2YsY0FBYzt3QkFDZCxjQUFjO3dCQUNkLHlCQUF5Qjt3QkFDekIsYUFBYTt3QkFDYixhQUFhO3FCQUNkO29GQUlELFNBQVM7c0JBRFIsS0FBSztnQkFJTixZQUFZO3NCQURYLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY1BpcGUsIE5nRm9yLCBOZ0lmIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEh0dHBFcnJvclJlc3BvbnNlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgVHJhbnNsYXRlUGlwZSB9IGZyb20gJ0B0YS90cmFuc2xhdGlvbic7XG5pbXBvcnQge1xuICBFbXB0eUNvbXBvbmVudCxcbiAgRXJyb3JDb21wb25lbnQsXG4gIExpbmtDb21wb25lbnQsXG4gIExpc3RDb250YWluZXJDb21wb25lbnQsXG4gIExpc3RFbGVtZW50Q29tcG9uZW50LFxuICBMaXN0RXh0cmFJbmZvcm1hdGlvbkNvbXBvbmVudCxcbiAgTGlzdFRpdGxlQ29tcG9uZW50LFxuICBMb2FkZXJDb21wb25lbnQsXG4gIFRpdGxlQ29tcG9uZW50LFxuICBVaVByb2ZpbGVEaXNwbGF5Q29tcG9uZW50LFxufSBmcm9tICdAdGEvdWknO1xuaW1wb3J0IHsgVGFCYXNlQ29tcG9uZW50LCBmdWxsTmFtZSwgc2VuZE1haWwgfSBmcm9tICdAdGEvdXRpbHMnO1xuXG5pbXBvcnQgeyBDYW1Vc2Vyc1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy91c2Vycy5zZXJ2aWNlJztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy91c2Vycy9kdG8vdXNlcic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RhLXVzZXItbXktcHJvZmlsZScsXG4gIHRlbXBsYXRlVXJsOiAnLi91c2VyLW15LXByb2ZpbGUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi91c2VyLW15LXByb2ZpbGUuY29tcG9uZW50LnNjc3MnXSxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW1xuICAgIE5nSWYsXG4gICAgTmdGb3IsXG4gICAgQXN5bmNQaXBlLFxuICAgIFRpdGxlQ29tcG9uZW50LFxuICAgIExpc3RDb250YWluZXJDb21wb25lbnQsXG4gICAgTGlzdEVsZW1lbnRDb21wb25lbnQsXG4gICAgTGlzdFRpdGxlQ29tcG9uZW50LFxuICAgIExpc3RFeHRyYUluZm9ybWF0aW9uQ29tcG9uZW50LFxuICAgIExvYWRlckNvbXBvbmVudCxcbiAgICBFcnJvckNvbXBvbmVudCxcbiAgICBFbXB0eUNvbXBvbmVudCxcbiAgICBVaVByb2ZpbGVEaXNwbGF5Q29tcG9uZW50LFxuICAgIExpbmtDb21wb25lbnQsXG4gICAgVHJhbnNsYXRlUGlwZSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgVXNlck15UHJvZmlsZUNvbXBvbmVudCBleHRlbmRzIFRhQmFzZUNvbXBvbmVudCB7XG4gIEBJbnB1dCgpXG4gIGNhbk1vZGlmeTogYm9vbGVhbiA9IHRydWU7XG5cbiAgQE91dHB1dCgpXG4gIG1vZGlmeUFjdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgbWFpbFRvID0gc2VuZE1haWw7XG5cbiAgcHVibGljIGN0YXMgPSBbXG4gICAge1xuICAgICAgaWNvbjogJ21vZGlmeScsXG4gICAgICBsYWJlbDogJ3VzZXIubW9kaWZ5JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLl9tb2RpZnlQcm9maWxlKCksXG4gICAgfSxcbiAgXTtcbiAgZ2V0IGN1cnJlbnRVc2VyJCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlclNlcnZpY2UuY3VycmVudFVzZXIuZ2V0JCgpO1xuICB9XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3VzZXJTZXJ2aWNlOiBDYW1Vc2Vyc1NlcnZpY2UpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2ZldGNoKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0RnVsbE5hbWUoZmlyc3ROYW1lOiBzdHJpbmcsIGxhc3ROYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gZnVsbE5hbWUoeyBmaXJzdE5hbWU6IGZpcnN0TmFtZSwgbmFtZTogbGFzdE5hbWUgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0VXNlckxvZ28odXNlcjogVXNlcikge1xuICAgIHJldHVybiB7XG4gICAgICB1c2VySW5mbzoge1xuICAgICAgICBwcm9maWxlUGljdHVyZVVybDogdXNlci5waWN0dXJlLFxuICAgICAgICBuYW1pbmc6IHtcbiAgICAgICAgICBuYW1lOiB1c2VyLmxhc3ROYW1lLFxuICAgICAgICAgIGZpcnN0TmFtZTogdXNlci5maXJzdE5hbWUsXG4gICAgICAgICAgdHJpZ3JhbTogdXNlci50cmlncmFtLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfZmV0Y2goKSB7XG4gICAgdGhpcy5yZXF1ZXN0U3RhdGUuYXNrZWQoKTtcbiAgICB0aGlzLl91c2VyU2VydmljZS5mZXRjaEN1cnJlbnRVc2VyJCgpLnN1YnNjcmliZSh7XG4gICAgICBjb21wbGV0ZTogKCkgPT4gdGhpcy5yZXF1ZXN0U3RhdGUuY29tcGxldGVkKCksXG4gICAgICBlcnJvcjogKGVycm9yOiBIdHRwRXJyb3JSZXNwb25zZSkgPT4ge1xuICAgICAgICB0aGlzLnJlcXVlc3RTdGF0ZS5vbkVycm9yKGVycm9yLnN0YXR1cywgZXJyb3Iuc3RhdHVzVGV4dCk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfbW9kaWZ5UHJvZmlsZSgpIHtcbiAgICB0aGlzLm1vZGlmeUFjdGlvbi5lbWl0KCk7XG4gIH1cbn1cbiIsIjx0YS1sb2FkZXIgW2lzTG9hZGluZ109XCJ0aGlzLnJlcXVlc3RTdGF0ZS5pc0xvYWRpbmcoKVwiICpuZ0xldD1cInRoaXMuY3VycmVudFVzZXIkIHwgYXN5bmMgYXMgY3VycmVudFVzZXJcIj5cbiAgPHRhLWVycm9yIFttZXNzYWdlXT1cInRoaXMucmVxdWVzdFN0YXRlLmdldEVycm9yTWVzc2FnZSgpXCIgW2NvZGVdPVwidGhpcy5yZXF1ZXN0U3RhdGUuZ2V0RXJyb3JTdGF0dXMoKVwiPlxuICAgIDx0YS1lbXB0eSBbaXNFbXB0eV09XCIhY3VycmVudFVzZXJcIj5cbiAgICAgIEBpZiAoY3VycmVudFVzZXIpIHtcbiAgICAgICAgPHRhLXVpLXByb2ZpbGUtZGlzcGxheVxuICAgICAgICAgIFtsYWJlbF09XCJ0aGlzLmdldEZ1bGxOYW1lKGN1cnJlbnRVc2VyLmZpcnN0TmFtZSwgY3VycmVudFVzZXIubGFzdE5hbWUpXCJcbiAgICAgICAgICBbY3Rhc109XCJ0aGlzLmNhbk1vZGlmeSA/IHRoaXMuY3RhcyA6IG51bGxcIlxuICAgICAgICAgIFt1c2VyTG9nb109XCJ0aGlzLmdldFVzZXJMb2dvKGN1cnJlbnRVc2VyKVwiXG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicHQtc3BhY2UteHhsXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHQtc3BhY2UteHMgYWxpZ24tY2VudGVyXCI+XG4gICAgICAgICAgICAgIDx0YS10aXRsZSBjbGFzcz1cIm0tYVwiIFtsZXZlbF09XCIzXCI+XG4gICAgICAgICAgICAgICAgPHRhLWxpbmsgKGFjdGlvbik9XCJ0aGlzLm1haWxUbyhjdXJyZW50VXNlci51c2VyTmFtZSlcIj57eyBjdXJyZW50VXNlci51c2VyTmFtZSB9fTwvdGEtbGluaz5cbiAgICAgICAgICAgICAgPC90YS10aXRsZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInB0LXNwYWNlLXhzIGFsaWduLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8dGEtdGl0bGUgY2xhc3M9XCJtLWFcIiBbbGV2ZWxdPVwiM1wiPlxuICAgICAgICAgICAgICAgIHt7IGN1cnJlbnRVc2VyLnBob25lTnVtYmVyIH19XG4gICAgICAgICAgICAgIDwvdGEtdGl0bGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIEBpZiAoY3VycmVudFVzZXIudGVuYW50SW5mb3JtYXRpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxpZ24tY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPHRhLXRpdGxlIGNsYXNzPVwibS1hXCIgW2xldmVsXT1cIjNcIj5cbiAgICAgICAgICAgICAgICAgIHt7ICd1c2VyLmNsaWVudG51bWJlcicgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgICAgICAgICAgIHt7IGN1cnJlbnRVc2VyLnRlbmFudEluZm9ybWF0aW9uc1swXS5jdXN0b21lcklkIH19XG4gICAgICAgICAgICAgICAgPC90YS10aXRsZT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBAaWYgKGN1cnJlbnRVc2VyLnRlbmFudEluZm9ybWF0aW9ucy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInB0LXNwYWNlLXh4bCBhbGlnbi1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIDx0YS10aXRsZSBjbGFzcz1cIm0tYVwiIFtsZXZlbF09XCIzXCI+XG4gICAgICAgICAgICAgICAgICAgIHt7ICd1c2VyLnRlbmFudGxpc3R0aXRsZScgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgICAgICAgICAgIDwvdGEtdGl0bGU+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxpc3RcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZW5hbnQtbGlzdFwiPlxuICAgICAgICAgICAgICAgICAgICA8dGEtbGlzdC1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgQGZvciAodGVuYW50SW5mb3JtYXRpb24gb2YgY3VycmVudFVzZXIudGVuYW50SW5mb3JtYXRpb25zOyB0cmFjayB0ZW5hbnRJbmZvcm1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgPHRhLWxpc3QtZWxlbWVudCBbd2l0aFNlcGFyYXRvcl09XCJmYWxzZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8dGEtbGlzdC10aXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pnt7IHRlbmFudEluZm9ybWF0aW9uLnRlbmFudE5hbWUgfX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YS1saXN0LXRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8dGEtbGlzdC1leHRyYS1pbmZvcm1hdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBAaWYgKHRlbmFudEluZm9ybWF0aW9uLmN1c3RvbWVySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbGlnbi1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1yLXNwYWNlLXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgdGVuYW50SW5mb3JtYXRpb24uY3VzdG9tZXJJZCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSA8dGEtdGV4dC10by1jbGlwYm9hcmQgW3ZhbHVlXT1cInRlbmFudEluZm9ybWF0aW9uLmN1c3RvbWVySWQudG9TdHJpbmcoKVwiID48L3RhLXRleHQtdG8tY2xpcGJvYXJkPiAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YS1saXN0LWV4dHJhLWluZm9ybWF0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90YS1saXN0LWVsZW1lbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L3RhLWxpc3QtY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3RhLXVpLXByb2ZpbGUtZGlzcGxheT5cbiAgICAgIH1cbiAgICA8L3RhLWVtcHR5PlxuICA8L3RhLWVycm9yPlxuPC90YS1sb2FkZXI+XG4iXX0=