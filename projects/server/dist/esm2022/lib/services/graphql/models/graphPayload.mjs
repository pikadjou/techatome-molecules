import { gql } from '@apollo/client/core';
import { capitalizeFirstLetter } from '@ta/utils';
import { graphQlTake } from '../helpers/queries';
export function createQuery(name, input) {
    const capName = capitalizeFirstLetter(name);
    const capPrefixType = input.prefixType ? capitalizeFirstLetter(input.prefixType) : '';
    // Construire dynamiquement les paramÃ¨tres de la query
    const queryParams = [];
    const queryArgs = [];
    const variables = {};
    if (input.where) {
        queryParams.push(`$where: ${capPrefixType}FilterInput`);
        queryArgs.push('where: $where');
        variables.where = input.where;
    }
    if (input.order) {
        queryParams.push(`$order: [${capPrefixType}SortInput!]`);
        queryArgs.push('order: $order');
        variables.order = input.order;
    }
    if (input.take) {
        const takeClause = graphQlTake(input.take);
        if (takeClause) {
            queryArgs.push(takeClause);
        }
    }
    const queryParamsStr = queryParams.length > 0 ? `(${queryParams.join(', ')})` : '';
    const queryArgsStr = queryArgs.length > 0 ? `(${queryArgs.join(', ')})` : '';
    return {
        name: name,
        query: gql `
          query ${capName}${queryParamsStr} {
            ${name}${queryArgsStr} {
              ${input.props}
            }
          }
        `,
        variables,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhQYXlsb2FkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9zZXJ2aWNlcy9ncmFwaHFsL21vZGVscy9ncmFwaFBheWxvYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRzFDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUVsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUE4Q2pELE1BQU0sVUFBVSxXQUFXLENBQUksSUFBWSxFQUFFLEtBQXlCO0lBQ3BFLE1BQU0sT0FBTyxHQUFHLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRXRGLHNEQUFzRDtJQUN0RCxNQUFNLFdBQVcsR0FBYSxFQUFFLENBQUM7SUFDakMsTUFBTSxTQUFTLEdBQWEsRUFBRSxDQUFDO0lBQy9CLE1BQU0sU0FBUyxHQUFRLEVBQUUsQ0FBQztJQUUxQixJQUFJLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNoQixXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsYUFBYSxhQUFhLENBQUMsQ0FBQztRQUN4RCxTQUFTLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ2hDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUNoQyxDQUFDO0lBRUQsSUFBSSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDaEIsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLGFBQWEsYUFBYSxDQUFDLENBQUM7UUFDekQsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNoQyxTQUFTLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2YsTUFBTSxVQUFVLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM3QixDQUFDO0lBQ0gsQ0FBQztJQUVELE1BQU0sY0FBYyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ25GLE1BQU0sWUFBWSxHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRTdFLE9BQU87UUFDTCxJQUFJLEVBQUUsSUFBSTtRQUNWLEtBQUssRUFBRSxHQUFHLENBQUE7a0JBQ0ksT0FBTyxHQUFHLGNBQWM7Y0FDNUIsSUFBSSxHQUFHLFlBQVk7Z0JBQ2pCLEtBQUssQ0FBQyxLQUFLOzs7U0FHbEI7UUFDTCxTQUFTO0tBQ1YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBncWwgfSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcclxuaW1wb3J0IHsgVHlwZWREb2N1bWVudE5vZGUgfSBmcm9tICdhcG9sbG8tYW5ndWxhcic7XHJcblxyXG5pbXBvcnQgeyBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgfSBmcm9tICdAdGEvdXRpbHMnO1xyXG5cclxuaW1wb3J0IHsgZ3JhcGhRbFRha2UgfSBmcm9tICcuLi9oZWxwZXJzL3F1ZXJpZXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQYWdlSW5mbyB7XHJcbiAgaGFzTmV4dFBhZ2U6IGJvb2xlYW47XHJcbiAgaGFzUHJldmlvdXNQYWdlOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBHcmFwaFJlcG9uc2VQYWdlZDxUPiA9IHtcclxuICBwYWdlSW5mbz86IFBhZ2VJbmZvO1xyXG4gIHRvdGFsQ291bnQ6IG51bWJlcjtcclxuICBpdGVtcz86IFRbXTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIE9yZGVyVHlwZTxUPiA9IHtcclxuICBbaW5kZXggaW4ga2V5b2YgVF06ICdBU0MnIHwgJ0RFU0MnO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgV2hlcmVUeXBlPFQ+ID0ge1xyXG4gIFtpbmRleCBpbiBrZXlvZiBQYXJ0aWFsPFQ+XTpcclxuICAgIHwgV2hlcmVUeXBlPFRbaW5kZXhdPlxyXG4gICAgfCBXaGVyZVR5cGU8VD5bXVxyXG4gICAgfCB7XHJcbiAgICAgICAgW29wOiBzdHJpbmddOiBzdHJpbmcgfCBzdHJpbmdbXSB8IG51bWJlciB8IGJvb2xlYW4gfCBEYXRlIHwgbnVsbDtcclxuICAgICAgfTtcclxufTtcclxuZXhwb3J0IGludGVyZmFjZSBHcmFwaFF1ZXJ5SW5wdXQ8VCA9IGFueT4ge1xyXG4gIHByb3BzOiBzdHJpbmc7XHJcbiAgd2hlcmU/OiBXaGVyZVR5cGU8VD4gfCBudWxsO1xyXG4gIG9yZGVyPzogT3JkZXJUeXBlPFQ+IHwgbnVsbDtcclxuICB0YWtlPzogbnVtYmVyO1xyXG4gIHByZWZpeFR5cGU/OiBzdHJpbmc7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBHcmFwaFF1ZXJ5UGF5bG9hZCB7XHJcbiAgcXVlcnk6IGFueTtcclxuICB2YXJpYWJsZXM6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHcmFwaFBheWxvYWQgZXh0ZW5kcyBHcmFwaFF1ZXJ5UGF5bG9hZCB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdyYXBoTXV0YXRpb25QYXlsb2FkIHtcclxuICBtdXRhdGlvbjogVHlwZWREb2N1bWVudE5vZGU8dW5rbm93biwgdW5rbm93bj47XHJcbiAgdmFyaWFibGVzOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVRdWVyeTxUPihuYW1lOiBzdHJpbmcsIGlucHV0OiBHcmFwaFF1ZXJ5SW5wdXQ8VD4pOiBHcmFwaFBheWxvYWQge1xyXG4gIGNvbnN0IGNhcE5hbWUgPSBjYXBpdGFsaXplRmlyc3RMZXR0ZXIobmFtZSk7XHJcbiAgY29uc3QgY2FwUHJlZml4VHlwZSA9IGlucHV0LnByZWZpeFR5cGUgPyBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoaW5wdXQucHJlZml4VHlwZSkgOiAnJztcclxuXHJcbiAgLy8gQ29uc3RydWlyZSBkeW5hbWlxdWVtZW50IGxlcyBwYXJhbcOodHJlcyBkZSBsYSBxdWVyeVxyXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvbnN0IHF1ZXJ5QXJnczogc3RyaW5nW10gPSBbXTtcclxuICBjb25zdCB2YXJpYWJsZXM6IGFueSA9IHt9O1xyXG5cclxuICBpZiAoaW5wdXQud2hlcmUpIHtcclxuICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCR3aGVyZTogJHtjYXBQcmVmaXhUeXBlfUZpbHRlcklucHV0YCk7XHJcbiAgICBxdWVyeUFyZ3MucHVzaCgnd2hlcmU6ICR3aGVyZScpO1xyXG4gICAgdmFyaWFibGVzLndoZXJlID0gaW5wdXQud2hlcmU7XHJcbiAgfVxyXG5cclxuICBpZiAoaW5wdXQub3JkZXIpIHtcclxuICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCRvcmRlcjogWyR7Y2FwUHJlZml4VHlwZX1Tb3J0SW5wdXQhXWApO1xyXG4gICAgcXVlcnlBcmdzLnB1c2goJ29yZGVyOiAkb3JkZXInKTtcclxuICAgIHZhcmlhYmxlcy5vcmRlciA9IGlucHV0Lm9yZGVyO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlucHV0LnRha2UpIHtcclxuICAgIGNvbnN0IHRha2VDbGF1c2UgPSBncmFwaFFsVGFrZShpbnB1dC50YWtlKTtcclxuICAgIGlmICh0YWtlQ2xhdXNlKSB7XHJcbiAgICAgIHF1ZXJ5QXJncy5wdXNoKHRha2VDbGF1c2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgcXVlcnlQYXJhbXNTdHIgPSBxdWVyeVBhcmFtcy5sZW5ndGggPiAwID8gYCgke3F1ZXJ5UGFyYW1zLmpvaW4oJywgJyl9KWAgOiAnJztcclxuICBjb25zdCBxdWVyeUFyZ3NTdHIgPSBxdWVyeUFyZ3MubGVuZ3RoID4gMCA/IGAoJHtxdWVyeUFyZ3Muam9pbignLCAnKX0pYCA6ICcnO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbmFtZTogbmFtZSxcclxuICAgIHF1ZXJ5OiBncWxgXHJcbiAgICAgICAgICBxdWVyeSAke2NhcE5hbWV9JHtxdWVyeVBhcmFtc1N0cn0ge1xyXG4gICAgICAgICAgICAke25hbWV9JHtxdWVyeUFyZ3NTdHJ9IHtcclxuICAgICAgICAgICAgICAke2lucHV0LnByb3BzfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgYCxcclxuICAgIHZhcmlhYmxlcyxcclxuICB9O1xyXG59XHJcbiJdfQ==