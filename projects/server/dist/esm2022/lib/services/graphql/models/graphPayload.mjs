import { gql } from '@apollo/client/core';
import { capitalizeFirstLetter } from '@ta/utils';
import { graphQlTake } from '../helpers/queries';
export function createQuery(name, input) {
    const capName = capitalizeFirstLetter(name);
    const capPrefixType = input.prefixType ? capitalizeFirstLetter(input.prefixType) : '';
    // Construire dynamiquement les paramÃ¨tres de la query
    const queryParams = [];
    const queryArgs = [];
    const variables = {};
    if (input.where) {
        queryParams.push(`$where: ${capPrefixType}FilterInput`);
        queryArgs.push('where: $where');
        variables.where = input.where;
    }
    if (input.order) {
        queryParams.push(`$order: [${capPrefixType}SortInput!]`);
        queryArgs.push('order: $order');
        variables.order = input.order;
    }
    if (input.take) {
        const takeClause = graphQlTake(input.take);
        if (takeClause) {
            queryArgs.push(takeClause);
        }
    }
    const queryParamsStr = queryParams.length > 0 ? `(${queryParams.join(', ')})` : '';
    const queryArgsStr = queryArgs.length > 0 ? `(${queryArgs.join(', ')})` : '';
    return {
        name: name,
        query: gql `
          query ${capName}${queryParamsStr} {
            ${name}${queryArgsStr} {
              ${input.props}
            }
          }
        `,
        variables,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhQYXlsb2FkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9zZXJ2aWNlcy9ncmFwaHFsL21vZGVscy9ncmFwaFBheWxvYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRzFDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUVsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUE4Q2pELE1BQU0sVUFBVSxXQUFXLENBQUksSUFBWSxFQUFFLEtBQXlCO0lBQ3BFLE1BQU0sT0FBTyxHQUFHLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRXRGLHNEQUFzRDtJQUN0RCxNQUFNLFdBQVcsR0FBYSxFQUFFLENBQUM7SUFDakMsTUFBTSxTQUFTLEdBQWEsRUFBRSxDQUFDO0lBQy9CLE1BQU0sU0FBUyxHQUFRLEVBQUUsQ0FBQztJQUUxQixJQUFJLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNoQixXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsYUFBYSxhQUFhLENBQUMsQ0FBQztRQUN4RCxTQUFTLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ2hDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUNoQyxDQUFDO0lBRUQsSUFBSSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDaEIsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLGFBQWEsYUFBYSxDQUFDLENBQUM7UUFDekQsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNoQyxTQUFTLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2YsTUFBTSxVQUFVLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM3QixDQUFDO0lBQ0gsQ0FBQztJQUVELE1BQU0sY0FBYyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ25GLE1BQU0sWUFBWSxHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRTdFLE9BQU87UUFDTCxJQUFJLEVBQUUsSUFBSTtRQUNWLEtBQUssRUFBRSxHQUFHLENBQUE7a0JBQ0ksT0FBTyxHQUFHLGNBQWM7Y0FDNUIsSUFBSSxHQUFHLFlBQVk7Z0JBQ2pCLEtBQUssQ0FBQyxLQUFLOzs7U0FHbEI7UUFDTCxTQUFTO0tBQ1YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBncWwgfSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcbmltcG9ydCB7IFR5cGVkRG9jdW1lbnROb2RlIH0gZnJvbSAnYXBvbGxvLWFuZ3VsYXInO1xuXG5pbXBvcnQgeyBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgfSBmcm9tICdAdGEvdXRpbHMnO1xuXG5pbXBvcnQgeyBncmFwaFFsVGFrZSB9IGZyb20gJy4uL2hlbHBlcnMvcXVlcmllcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZUluZm8ge1xuICBoYXNOZXh0UGFnZTogYm9vbGVhbjtcbiAgaGFzUHJldmlvdXNQYWdlOiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBHcmFwaFJlcG9uc2VQYWdlZDxUPiA9IHtcbiAgcGFnZUluZm8/OiBQYWdlSW5mbztcbiAgdG90YWxDb3VudDogbnVtYmVyO1xuICBpdGVtcz86IFRbXTtcbn07XG5cbmV4cG9ydCB0eXBlIE9yZGVyVHlwZTxUPiA9IHtcbiAgW2luZGV4IGluIGtleW9mIFRdOiAnQVNDJyB8ICdERVNDJztcbn07XG5cbmV4cG9ydCB0eXBlIFdoZXJlVHlwZTxUPiA9IHtcbiAgW2luZGV4IGluIGtleW9mIFBhcnRpYWw8VD5dOlxuICAgIHwgV2hlcmVUeXBlPFQ+XG4gICAgfCBXaGVyZVR5cGU8VD5bXVxuICAgIHwge1xuICAgICAgICBbb3A6IHN0cmluZ106IHN0cmluZyB8IHN0cmluZ1tdIHwgbnVtYmVyIHwgYm9vbGVhbiB8IERhdGUgfCBudWxsO1xuICAgICAgfTtcbn07XG5leHBvcnQgaW50ZXJmYWNlIEdyYXBoUXVlcnlJbnB1dDxUID0gYW55PiB7XG4gIHByb3BzOiBzdHJpbmc7XG4gIHdoZXJlPzogV2hlcmVUeXBlPFQ+IHwgbnVsbDtcbiAgb3JkZXI/OiBPcmRlclR5cGU8VD4gfCBudWxsO1xuICB0YWtlPzogbnVtYmVyO1xuICBwcmVmaXhUeXBlPzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBHcmFwaFF1ZXJ5UGF5bG9hZCB7XG4gIHF1ZXJ5OiBhbnk7XG4gIHZhcmlhYmxlczogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyYXBoUGF5bG9hZCBleHRlbmRzIEdyYXBoUXVlcnlQYXlsb2FkIHtcbiAgbmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyYXBoTXV0YXRpb25QYXlsb2FkIHtcbiAgbXV0YXRpb246IFR5cGVkRG9jdW1lbnROb2RlPHVua25vd24sIHVua25vd24+O1xuICB2YXJpYWJsZXM6IGFueTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVF1ZXJ5PFQ+KG5hbWU6IHN0cmluZywgaW5wdXQ6IEdyYXBoUXVlcnlJbnB1dDxUPik6IEdyYXBoUGF5bG9hZCB7XG4gIGNvbnN0IGNhcE5hbWUgPSBjYXBpdGFsaXplRmlyc3RMZXR0ZXIobmFtZSk7XG4gIGNvbnN0IGNhcFByZWZpeFR5cGUgPSBpbnB1dC5wcmVmaXhUeXBlID8gY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKGlucHV0LnByZWZpeFR5cGUpIDogJyc7XG5cbiAgLy8gQ29uc3RydWlyZSBkeW5hbWlxdWVtZW50IGxlcyBwYXJhbcOodHJlcyBkZSBsYSBxdWVyeVxuICBjb25zdCBxdWVyeVBhcmFtczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3QgcXVlcnlBcmdzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCB2YXJpYWJsZXM6IGFueSA9IHt9O1xuXG4gIGlmIChpbnB1dC53aGVyZSkge1xuICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCR3aGVyZTogJHtjYXBQcmVmaXhUeXBlfUZpbHRlcklucHV0YCk7XG4gICAgcXVlcnlBcmdzLnB1c2goJ3doZXJlOiAkd2hlcmUnKTtcbiAgICB2YXJpYWJsZXMud2hlcmUgPSBpbnB1dC53aGVyZTtcbiAgfVxuXG4gIGlmIChpbnB1dC5vcmRlcikge1xuICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCRvcmRlcjogWyR7Y2FwUHJlZml4VHlwZX1Tb3J0SW5wdXQhXWApO1xuICAgIHF1ZXJ5QXJncy5wdXNoKCdvcmRlcjogJG9yZGVyJyk7XG4gICAgdmFyaWFibGVzLm9yZGVyID0gaW5wdXQub3JkZXI7XG4gIH1cblxuICBpZiAoaW5wdXQudGFrZSkge1xuICAgIGNvbnN0IHRha2VDbGF1c2UgPSBncmFwaFFsVGFrZShpbnB1dC50YWtlKTtcbiAgICBpZiAodGFrZUNsYXVzZSkge1xuICAgICAgcXVlcnlBcmdzLnB1c2godGFrZUNsYXVzZSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcXVlcnlQYXJhbXNTdHIgPSBxdWVyeVBhcmFtcy5sZW5ndGggPiAwID8gYCgke3F1ZXJ5UGFyYW1zLmpvaW4oJywgJyl9KWAgOiAnJztcbiAgY29uc3QgcXVlcnlBcmdzU3RyID0gcXVlcnlBcmdzLmxlbmd0aCA+IDAgPyBgKCR7cXVlcnlBcmdzLmpvaW4oJywgJyl9KWAgOiAnJztcblxuICByZXR1cm4ge1xuICAgIG5hbWU6IG5hbWUsXG4gICAgcXVlcnk6IGdxbGBcbiAgICAgICAgICBxdWVyeSAke2NhcE5hbWV9JHtxdWVyeVBhcmFtc1N0cn0ge1xuICAgICAgICAgICAgJHtuYW1lfSR7cXVlcnlBcmdzU3RyfSB7XG4gICAgICAgICAgICAgICR7aW5wdXQucHJvcHN9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBgLFxuICAgIHZhcmlhYmxlcyxcbiAgfTtcbn1cbiJdfQ==