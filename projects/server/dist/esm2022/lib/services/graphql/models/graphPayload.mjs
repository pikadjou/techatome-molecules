import { gql } from '@apollo/client/core';
import { capitalizeFirstLetter } from '@ta/utils';
import { graphQlTake } from '../helpers/queries';
export function createQuery(name, input) {
    const capName = capitalizeFirstLetter(name);
    const capPrefixType = input?.prefixType ? capitalizeFirstLetter(input.prefixType) : '';
    // Construire dynamiquement les paramÃ¨tres de la query
    const queryParams = [];
    const queryArgs = [];
    const variables = {};
    if (input?.where) {
        queryParams.push(`$where: ${capPrefixType}FilterInput`);
        queryArgs.push('where: $where');
        variables.where = input.where;
    }
    if (input?.order) {
        queryParams.push(`$order: [${capPrefixType}SortInput!]`);
        queryArgs.push('order: $order');
        variables.order = input.order;
    }
    if (input?.take) {
        const takeClause = graphQlTake(input.take);
        if (takeClause) {
            queryArgs.push(takeClause);
        }
    }
    const queryParamsStr = queryParams.length > 0 ? `(${queryParams.join(', ')})` : '';
    const queryArgsStr = queryArgs.length > 0 ? `(${queryArgs.join(', ')})` : '';
    const propsStr = input?.props ? ` { ${input?.props} }` : '';
    return {
        name: name,
        query: gql `
          query ${capName}${queryParamsStr} {
            ${name}${queryArgsStr}  ${propsStr}
          }
        `,
        variables,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhQYXlsb2FkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9zZXJ2aWNlcy9ncmFwaHFsL21vZGVscy9ncmFwaFBheWxvYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRzFDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUVsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUE4Q2pELE1BQU0sVUFBVSxXQUFXLENBQUksSUFBWSxFQUFFLEtBQTBCO0lBQ3JFLE1BQU0sT0FBTyxHQUFHLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLE1BQU0sYUFBYSxHQUFHLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRXZGLHNEQUFzRDtJQUN0RCxNQUFNLFdBQVcsR0FBYSxFQUFFLENBQUM7SUFDakMsTUFBTSxTQUFTLEdBQWEsRUFBRSxDQUFDO0lBQy9CLE1BQU0sU0FBUyxHQUFRLEVBQUUsQ0FBQztJQUUxQixJQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQztRQUNqQixXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsYUFBYSxhQUFhLENBQUMsQ0FBQztRQUN4RCxTQUFTLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ2hDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUNoQyxDQUFDO0lBRUQsSUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUM7UUFDakIsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLGFBQWEsYUFBYSxDQUFDLENBQUM7UUFDekQsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNoQyxTQUFTLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDO1FBQ2hCLE1BQU0sVUFBVSxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNmLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDN0IsQ0FBQztJQUNILENBQUM7SUFFRCxNQUFNLGNBQWMsR0FBRyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNuRixNQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUM3RSxNQUFNLFFBQVEsR0FBRyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssRUFBRSxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRTVELE9BQU87UUFDTCxJQUFJLEVBQUUsSUFBSTtRQUNWLEtBQUssRUFBRSxHQUFHLENBQUE7a0JBQ0ksT0FBTyxHQUFHLGNBQWM7Y0FDNUIsSUFBSSxHQUFHLFlBQVksS0FBSyxRQUFROztTQUVyQztRQUNMLFNBQVM7S0FDVixDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdxbCB9IGZyb20gJ0BhcG9sbG8vY2xpZW50L2NvcmUnO1xyXG5pbXBvcnQgeyBUeXBlZERvY3VtZW50Tm9kZSB9IGZyb20gJ2Fwb2xsby1hbmd1bGFyJztcclxuXHJcbmltcG9ydCB7IGNhcGl0YWxpemVGaXJzdExldHRlciB9IGZyb20gJ0B0YS91dGlscyc7XHJcblxyXG5pbXBvcnQgeyBncmFwaFFsVGFrZSB9IGZyb20gJy4uL2hlbHBlcnMvcXVlcmllcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2VJbmZvIHtcclxuICBoYXNOZXh0UGFnZTogYm9vbGVhbjtcclxuICBoYXNQcmV2aW91c1BhZ2U6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEdyYXBoUmVwb25zZVBhZ2VkPFQ+ID0ge1xyXG4gIHBhZ2VJbmZvPzogUGFnZUluZm87XHJcbiAgdG90YWxDb3VudDogbnVtYmVyO1xyXG4gIGl0ZW1zPzogVFtdO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgT3JkZXJUeXBlPFQ+ID0ge1xyXG4gIFtpbmRleCBpbiBrZXlvZiBQYXJ0aWFsPFQ+XTogJ0FTQycgfCAnREVTQyc7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBXaGVyZVR5cGU8VD4gPSB7XHJcbiAgW2luZGV4IGluIGtleW9mIFBhcnRpYWw8VD5dOlxyXG4gICAgfCBXaGVyZVR5cGU8VFtpbmRleF0+XHJcbiAgICB8IFdoZXJlVHlwZTxUPltdXHJcbiAgICB8IHtcclxuICAgICAgICBbb3A6IHN0cmluZ106IFdoZXJlVHlwZTxUW2luZGV4XT4gfCBzdHJpbmcgfCBzdHJpbmdbXSB8IG51bWJlciB8IGJvb2xlYW4gfCBEYXRlIHwgbnVsbDtcclxuICAgICAgfTtcclxufTtcclxuZXhwb3J0IGludGVyZmFjZSBHcmFwaFF1ZXJ5SW5wdXQ8VCA9IGFueT4ge1xyXG4gIHByb3BzOiBzdHJpbmc7XHJcbiAgd2hlcmU/OiBXaGVyZVR5cGU8VD4gfCBudWxsO1xyXG4gIG9yZGVyPzogT3JkZXJUeXBlPFQ+IHwgbnVsbDtcclxuICB0YWtlPzogbnVtYmVyO1xyXG4gIHByZWZpeFR5cGU/OiBzdHJpbmc7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBHcmFwaFF1ZXJ5UGF5bG9hZCB7XHJcbiAgcXVlcnk6IGFueTtcclxuICB2YXJpYWJsZXM6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHcmFwaFBheWxvYWQgZXh0ZW5kcyBHcmFwaFF1ZXJ5UGF5bG9hZCB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdyYXBoTXV0YXRpb25QYXlsb2FkIHtcclxuICBtdXRhdGlvbjogVHlwZWREb2N1bWVudE5vZGU8dW5rbm93biwgdW5rbm93bj47XHJcbiAgdmFyaWFibGVzOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVRdWVyeTxUPihuYW1lOiBzdHJpbmcsIGlucHV0PzogR3JhcGhRdWVyeUlucHV0PFQ+KTogR3JhcGhQYXlsb2FkIHtcclxuICBjb25zdCBjYXBOYW1lID0gY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKG5hbWUpO1xyXG4gIGNvbnN0IGNhcFByZWZpeFR5cGUgPSBpbnB1dD8ucHJlZml4VHlwZSA/IGNhcGl0YWxpemVGaXJzdExldHRlcihpbnB1dC5wcmVmaXhUeXBlKSA6ICcnO1xyXG5cclxuICAvLyBDb25zdHJ1aXJlIGR5bmFtaXF1ZW1lbnQgbGVzIHBhcmFtw6h0cmVzIGRlIGxhIHF1ZXJ5XHJcbiAgY29uc3QgcXVlcnlQYXJhbXM6IHN0cmluZ1tdID0gW107XHJcbiAgY29uc3QgcXVlcnlBcmdzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvbnN0IHZhcmlhYmxlczogYW55ID0ge307XHJcblxyXG4gIGlmIChpbnB1dD8ud2hlcmUpIHtcclxuICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCR3aGVyZTogJHtjYXBQcmVmaXhUeXBlfUZpbHRlcklucHV0YCk7XHJcbiAgICBxdWVyeUFyZ3MucHVzaCgnd2hlcmU6ICR3aGVyZScpO1xyXG4gICAgdmFyaWFibGVzLndoZXJlID0gaW5wdXQud2hlcmU7XHJcbiAgfVxyXG5cclxuICBpZiAoaW5wdXQ/Lm9yZGVyKSB7XHJcbiAgICBxdWVyeVBhcmFtcy5wdXNoKGAkb3JkZXI6IFske2NhcFByZWZpeFR5cGV9U29ydElucHV0IV1gKTtcclxuICAgIHF1ZXJ5QXJncy5wdXNoKCdvcmRlcjogJG9yZGVyJyk7XHJcbiAgICB2YXJpYWJsZXMub3JkZXIgPSBpbnB1dC5vcmRlcjtcclxuICB9XHJcblxyXG4gIGlmIChpbnB1dD8udGFrZSkge1xyXG4gICAgY29uc3QgdGFrZUNsYXVzZSA9IGdyYXBoUWxUYWtlKGlucHV0LnRha2UpO1xyXG4gICAgaWYgKHRha2VDbGF1c2UpIHtcclxuICAgICAgcXVlcnlBcmdzLnB1c2godGFrZUNsYXVzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBxdWVyeVBhcmFtc1N0ciA9IHF1ZXJ5UGFyYW1zLmxlbmd0aCA+IDAgPyBgKCR7cXVlcnlQYXJhbXMuam9pbignLCAnKX0pYCA6ICcnO1xyXG4gIGNvbnN0IHF1ZXJ5QXJnc1N0ciA9IHF1ZXJ5QXJncy5sZW5ndGggPiAwID8gYCgke3F1ZXJ5QXJncy5qb2luKCcsICcpfSlgIDogJyc7XHJcbiAgY29uc3QgcHJvcHNTdHIgPSBpbnB1dD8ucHJvcHMgPyBgIHsgJHtpbnB1dD8ucHJvcHN9IH1gIDogJyc7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBuYW1lOiBuYW1lLFxyXG4gICAgcXVlcnk6IGdxbGBcclxuICAgICAgICAgIHF1ZXJ5ICR7Y2FwTmFtZX0ke3F1ZXJ5UGFyYW1zU3RyfSB7XHJcbiAgICAgICAgICAgICR7bmFtZX0ke3F1ZXJ5QXJnc1N0cn0gICR7cHJvcHNTdHJ9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgYCxcclxuICAgIHZhcmlhYmxlcyxcclxuICB9O1xyXG59XHJcbiJdfQ==