import { gql } from '@apollo/client/core';
import { capitalizeFirstLetter } from '@ta/utils';
import { graphQlTake } from '../helpers/queries';
export function createQuery(name, input) {
    const capName = capitalizeFirstLetter(name);
    const capPrefixType = input?.prefixType ? capitalizeFirstLetter(input.prefixType) : '';
    // Construire dynamiquement les paramÃ¨tres de la query
    const queryParams = [];
    const queryArgs = [];
    const variables = {};
    if (input?.where) {
        queryParams.push(`$where: ${capPrefixType}FilterInput`);
        queryArgs.push('where: $where');
        variables.where = input.where;
    }
    if (input?.order) {
        queryParams.push(`$order: [${capPrefixType}SortInput!]`);
        queryArgs.push('order: $order');
        variables.order = input.order;
    }
    if (input?.take) {
        const takeClause = graphQlTake(input.take);
        if (takeClause) {
            queryArgs.push(takeClause);
        }
    }
    const queryParamsStr = queryParams.length > 0 ? `(${queryParams.join(', ')})` : '';
    const queryArgsStr = queryArgs.length > 0 ? `(${queryArgs.join(', ')})` : '';
    const propsStr = input?.props ? ` { ${input?.props} }` : '';
    return {
        name: name,
        query: gql `
          query ${capName}${queryParamsStr} {
            ${name}${queryArgsStr}  ${propsStr}
          }
        `,
        variables,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhQYXlsb2FkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9zZXJ2aWNlcy9ncmFwaHFsL21vZGVscy9ncmFwaFBheWxvYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRzFDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUVsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUE4Q2pELE1BQU0sVUFBVSxXQUFXLENBQUksSUFBWSxFQUFFLEtBQTBCO0lBQ3JFLE1BQU0sT0FBTyxHQUFHLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLE1BQU0sYUFBYSxHQUFHLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRXZGLHNEQUFzRDtJQUN0RCxNQUFNLFdBQVcsR0FBYSxFQUFFLENBQUM7SUFDakMsTUFBTSxTQUFTLEdBQWEsRUFBRSxDQUFDO0lBQy9CLE1BQU0sU0FBUyxHQUFRLEVBQUUsQ0FBQztJQUUxQixJQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQztRQUNqQixXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsYUFBYSxhQUFhLENBQUMsQ0FBQztRQUN4RCxTQUFTLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ2hDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUNoQyxDQUFDO0lBRUQsSUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUM7UUFDakIsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLGFBQWEsYUFBYSxDQUFDLENBQUM7UUFDekQsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNoQyxTQUFTLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDO1FBQ2hCLE1BQU0sVUFBVSxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNmLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDN0IsQ0FBQztJQUNILENBQUM7SUFFRCxNQUFNLGNBQWMsR0FBRyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNuRixNQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUM3RSxNQUFNLFFBQVEsR0FBRyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssRUFBRSxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRTVELE9BQU87UUFDTCxJQUFJLEVBQUUsSUFBSTtRQUNWLEtBQUssRUFBRSxHQUFHLENBQUE7a0JBQ0ksT0FBTyxHQUFHLGNBQWM7Y0FDNUIsSUFBSSxHQUFHLFlBQVksS0FBSyxRQUFROztTQUVyQztRQUNMLFNBQVM7S0FDVixDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdxbCB9IGZyb20gJ0BhcG9sbG8vY2xpZW50L2NvcmUnO1xyXG5pbXBvcnQgeyBUeXBlZERvY3VtZW50Tm9kZSB9IGZyb20gJ2Fwb2xsby1hbmd1bGFyJztcclxuXHJcbmltcG9ydCB7IGNhcGl0YWxpemVGaXJzdExldHRlciB9IGZyb20gJ0B0YS91dGlscyc7XHJcblxyXG5pbXBvcnQgeyBncmFwaFFsVGFrZSB9IGZyb20gJy4uL2hlbHBlcnMvcXVlcmllcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2VJbmZvIHtcclxuICBoYXNOZXh0UGFnZTogYm9vbGVhbjtcclxuICBoYXNQcmV2aW91c1BhZ2U6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEdyYXBoUmVwb25zZVBhZ2VkPFQ+ID0ge1xyXG4gIHBhZ2VJbmZvPzogUGFnZUluZm87XHJcbiAgdG90YWxDb3VudDogbnVtYmVyO1xyXG4gIGl0ZW1zPzogVFtdO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgT3JkZXJUeXBlPFQ+ID0ge1xyXG4gIFtpbmRleCBpbiBrZXlvZiBQYXJ0aWFsPFQ+XTogJ0FTQycgfCAnREVTQyc7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBXaGVyZVR5cGU8VD4gPSB7XHJcbiAgW2luZGV4IGluIGtleW9mIFBhcnRpYWw8VD5dOlxyXG4gICAgfCBXaGVyZVR5cGU8VFtpbmRleF0+XHJcbiAgICB8IFdoZXJlVHlwZTxUPltdXHJcbiAgICB8IHtcclxuICAgICAgICBbb3A6IHN0cmluZ106IHN0cmluZyB8IHN0cmluZ1tdIHwgbnVtYmVyIHwgYm9vbGVhbiB8IERhdGUgfCBudWxsO1xyXG4gICAgICB9O1xyXG59O1xyXG5leHBvcnQgaW50ZXJmYWNlIEdyYXBoUXVlcnlJbnB1dDxUID0gYW55PiB7XHJcbiAgcHJvcHM6IHN0cmluZztcclxuICB3aGVyZT86IFdoZXJlVHlwZTxUPiB8IG51bGw7XHJcbiAgb3JkZXI/OiBPcmRlclR5cGU8VD4gfCBudWxsO1xyXG4gIHRha2U/OiBudW1iZXI7XHJcbiAgcHJlZml4VHlwZT86IHN0cmluZztcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIEdyYXBoUXVlcnlQYXlsb2FkIHtcclxuICBxdWVyeTogYW55O1xyXG4gIHZhcmlhYmxlczogYW55O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdyYXBoUGF5bG9hZCBleHRlbmRzIEdyYXBoUXVlcnlQYXlsb2FkIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR3JhcGhNdXRhdGlvblBheWxvYWQge1xyXG4gIG11dGF0aW9uOiBUeXBlZERvY3VtZW50Tm9kZTx1bmtub3duLCB1bmtub3duPjtcclxuICB2YXJpYWJsZXM6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVF1ZXJ5PFQ+KG5hbWU6IHN0cmluZywgaW5wdXQ/OiBHcmFwaFF1ZXJ5SW5wdXQ8VD4pOiBHcmFwaFBheWxvYWQge1xyXG4gIGNvbnN0IGNhcE5hbWUgPSBjYXBpdGFsaXplRmlyc3RMZXR0ZXIobmFtZSk7XHJcbiAgY29uc3QgY2FwUHJlZml4VHlwZSA9IGlucHV0Py5wcmVmaXhUeXBlID8gY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKGlucHV0LnByZWZpeFR5cGUpIDogJyc7XHJcblxyXG4gIC8vIENvbnN0cnVpcmUgZHluYW1pcXVlbWVudCBsZXMgcGFyYW3DqHRyZXMgZGUgbGEgcXVlcnlcclxuICBjb25zdCBxdWVyeVBhcmFtczogc3RyaW5nW10gPSBbXTtcclxuICBjb25zdCBxdWVyeUFyZ3M6IHN0cmluZ1tdID0gW107XHJcbiAgY29uc3QgdmFyaWFibGVzOiBhbnkgPSB7fTtcclxuXHJcbiAgaWYgKGlucHV0Py53aGVyZSkge1xyXG4gICAgcXVlcnlQYXJhbXMucHVzaChgJHdoZXJlOiAke2NhcFByZWZpeFR5cGV9RmlsdGVySW5wdXRgKTtcclxuICAgIHF1ZXJ5QXJncy5wdXNoKCd3aGVyZTogJHdoZXJlJyk7XHJcbiAgICB2YXJpYWJsZXMud2hlcmUgPSBpbnB1dC53aGVyZTtcclxuICB9XHJcblxyXG4gIGlmIChpbnB1dD8ub3JkZXIpIHtcclxuICAgIHF1ZXJ5UGFyYW1zLnB1c2goYCRvcmRlcjogWyR7Y2FwUHJlZml4VHlwZX1Tb3J0SW5wdXQhXWApO1xyXG4gICAgcXVlcnlBcmdzLnB1c2goJ29yZGVyOiAkb3JkZXInKTtcclxuICAgIHZhcmlhYmxlcy5vcmRlciA9IGlucHV0Lm9yZGVyO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlucHV0Py50YWtlKSB7XHJcbiAgICBjb25zdCB0YWtlQ2xhdXNlID0gZ3JhcGhRbFRha2UoaW5wdXQudGFrZSk7XHJcbiAgICBpZiAodGFrZUNsYXVzZSkge1xyXG4gICAgICBxdWVyeUFyZ3MucHVzaCh0YWtlQ2xhdXNlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zU3RyID0gcXVlcnlQYXJhbXMubGVuZ3RoID4gMCA/IGAoJHtxdWVyeVBhcmFtcy5qb2luKCcsICcpfSlgIDogJyc7XHJcbiAgY29uc3QgcXVlcnlBcmdzU3RyID0gcXVlcnlBcmdzLmxlbmd0aCA+IDAgPyBgKCR7cXVlcnlBcmdzLmpvaW4oJywgJyl9KWAgOiAnJztcclxuICBjb25zdCBwcm9wc1N0ciA9IGlucHV0Py5wcm9wcyA/IGAgeyAke2lucHV0Py5wcm9wc30gfWAgOiAnJztcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIG5hbWU6IG5hbWUsXHJcbiAgICBxdWVyeTogZ3FsYFxyXG4gICAgICAgICAgcXVlcnkgJHtjYXBOYW1lfSR7cXVlcnlQYXJhbXNTdHJ9IHtcclxuICAgICAgICAgICAgJHtuYW1lfSR7cXVlcnlBcmdzU3RyfSAgJHtwcm9wc1N0cn1cclxuICAgICAgICAgIH1cclxuICAgICAgICBgLFxyXG4gICAgdmFyaWFibGVzLFxyXG4gIH07XHJcbn1cclxuIl19