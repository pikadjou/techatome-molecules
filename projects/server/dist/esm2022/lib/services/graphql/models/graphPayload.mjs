import { gql } from '@apollo/client/core';
import { capitalizeFirstLetter } from '@ta/utils';
import { graphQlTake } from '../helpers/queries';
export function createQuery(name, input) {
    const capName = capitalizeFirstLetter(name);
    const capPrefixType = input.prefixType ? capitalizeFirstLetter(input.prefixType) : '';
    // Construire dynamiquement les paramÃ¨tres de la query
    const queryParams = [];
    const queryArgs = [];
    const variables = {};
    if (input.where) {
        queryParams.push(`$where: ${capPrefixType}FilterInput`);
        queryArgs.push('where: $where');
        variables.where = input.where;
    }
    if (input.order) {
        queryParams.push(`$order: [${capPrefixType}SortInput!]`);
        queryArgs.push('order: $order');
        variables.order = input.order;
    }
    if (input.take) {
        const takeClause = graphQlTake(input.take);
        if (takeClause) {
            queryArgs.push(takeClause);
        }
    }
    const queryParamsStr = queryParams.length > 0 ? `(${queryParams.join(', ')})` : '';
    const queryArgsStr = queryArgs.length > 0 ? `(${queryArgs.join(', ')})` : '';
    return {
        name: name,
        query: gql `
          query ${capName}${queryParamsStr} {
            ${name}${queryArgsStr} {
              ${input.props}
            }
          }
        `,
        variables,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhQYXlsb2FkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9zZXJ2aWNlcy9ncmFwaHFsL21vZGVscy9ncmFwaFBheWxvYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRzFDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUVsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUE4Q2pELE1BQU0sVUFBVSxXQUFXLENBQUksSUFBWSxFQUFFLEtBQXlCO0lBQ3BFLE1BQU0sT0FBTyxHQUFHLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRXRGLHNEQUFzRDtJQUN0RCxNQUFNLFdBQVcsR0FBYSxFQUFFLENBQUM7SUFDakMsTUFBTSxTQUFTLEdBQWEsRUFBRSxDQUFDO0lBQy9CLE1BQU0sU0FBUyxHQUFRLEVBQUUsQ0FBQztJQUUxQixJQUFJLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNoQixXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsYUFBYSxhQUFhLENBQUMsQ0FBQztRQUN4RCxTQUFTLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ2hDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUNoQyxDQUFDO0lBRUQsSUFBSSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDaEIsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLGFBQWEsYUFBYSxDQUFDLENBQUM7UUFDekQsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNoQyxTQUFTLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUVELElBQUksS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2YsTUFBTSxVQUFVLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2YsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM3QixDQUFDO0lBQ0gsQ0FBQztJQUVELE1BQU0sY0FBYyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ25GLE1BQU0sWUFBWSxHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRTdFLE9BQU87UUFDTCxJQUFJLEVBQUUsSUFBSTtRQUNWLEtBQUssRUFBRSxHQUFHLENBQUE7a0JBQ0ksT0FBTyxHQUFHLGNBQWM7Y0FDNUIsSUFBSSxHQUFHLFlBQVk7Z0JBQ2pCLEtBQUssQ0FBQyxLQUFLOzs7U0FHbEI7UUFDTCxTQUFTO0tBQ1YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBncWwgfSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcbmltcG9ydCB7IFR5cGVkRG9jdW1lbnROb2RlIH0gZnJvbSAnYXBvbGxvLWFuZ3VsYXInO1xuXG5pbXBvcnQgeyBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgfSBmcm9tICdAdGEvdXRpbHMnO1xuXG5pbXBvcnQgeyBncmFwaFFsVGFrZSB9IGZyb20gJy4uL2hlbHBlcnMvcXVlcmllcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZUluZm8ge1xuICBoYXNOZXh0UGFnZTogYm9vbGVhbjtcbiAgaGFzUHJldmlvdXNQYWdlOiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBHcmFwaFJlcG9uc2VQYWdlZDxUPiA9IHtcbiAgcGFnZUluZm8/OiBQYWdlSW5mbztcbiAgdG90YWxDb3VudDogbnVtYmVyO1xuICBpdGVtcz86IFRbXTtcbn07XG5cbmV4cG9ydCB0eXBlIE9yZGVyVHlwZTxUPiA9IHtcbiAgW2luZGV4IGluIGtleW9mIFRdOiAnQVNDJyB8ICdERVNDJztcbn07XG5cbmV4cG9ydCB0eXBlIFdoZXJlVHlwZTxUPiA9IHtcbiAgW2luZGV4IGluIGtleW9mIFBhcnRpYWw8VD5dOlxuICAgIHwgV2hlcmVUeXBlPFRbaW5kZXhdPlxuICAgIHwgV2hlcmVUeXBlPFQ+W11cbiAgICB8IHtcbiAgICAgICAgW29wOiBzdHJpbmddOiBzdHJpbmcgfCBzdHJpbmdbXSB8IG51bWJlciB8IGJvb2xlYW4gfCBEYXRlIHwgbnVsbDtcbiAgICAgIH07XG59O1xuZXhwb3J0IGludGVyZmFjZSBHcmFwaFF1ZXJ5SW5wdXQ8VCA9IGFueT4ge1xuICBwcm9wczogc3RyaW5nO1xuICB3aGVyZT86IFdoZXJlVHlwZTxUPiB8IG51bGw7XG4gIG9yZGVyPzogT3JkZXJUeXBlPFQ+IHwgbnVsbDtcbiAgdGFrZT86IG51bWJlcjtcbiAgcHJlZml4VHlwZT86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgR3JhcGhRdWVyeVBheWxvYWQge1xuICBxdWVyeTogYW55O1xuICB2YXJpYWJsZXM6IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHcmFwaFBheWxvYWQgZXh0ZW5kcyBHcmFwaFF1ZXJ5UGF5bG9hZCB7XG4gIG5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHcmFwaE11dGF0aW9uUGF5bG9hZCB7XG4gIG11dGF0aW9uOiBUeXBlZERvY3VtZW50Tm9kZTx1bmtub3duLCB1bmtub3duPjtcbiAgdmFyaWFibGVzOiBhbnk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVRdWVyeTxUPihuYW1lOiBzdHJpbmcsIGlucHV0OiBHcmFwaFF1ZXJ5SW5wdXQ8VD4pOiBHcmFwaFBheWxvYWQge1xuICBjb25zdCBjYXBOYW1lID0gY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKG5hbWUpO1xuICBjb25zdCBjYXBQcmVmaXhUeXBlID0gaW5wdXQucHJlZml4VHlwZSA/IGNhcGl0YWxpemVGaXJzdExldHRlcihpbnB1dC5wcmVmaXhUeXBlKSA6ICcnO1xuXG4gIC8vIENvbnN0cnVpcmUgZHluYW1pcXVlbWVudCBsZXMgcGFyYW3DqHRyZXMgZGUgbGEgcXVlcnlcbiAgY29uc3QgcXVlcnlQYXJhbXM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IHF1ZXJ5QXJnczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3QgdmFyaWFibGVzOiBhbnkgPSB7fTtcblxuICBpZiAoaW5wdXQud2hlcmUpIHtcbiAgICBxdWVyeVBhcmFtcy5wdXNoKGAkd2hlcmU6ICR7Y2FwUHJlZml4VHlwZX1GaWx0ZXJJbnB1dGApO1xuICAgIHF1ZXJ5QXJncy5wdXNoKCd3aGVyZTogJHdoZXJlJyk7XG4gICAgdmFyaWFibGVzLndoZXJlID0gaW5wdXQud2hlcmU7XG4gIH1cblxuICBpZiAoaW5wdXQub3JkZXIpIHtcbiAgICBxdWVyeVBhcmFtcy5wdXNoKGAkb3JkZXI6IFske2NhcFByZWZpeFR5cGV9U29ydElucHV0IV1gKTtcbiAgICBxdWVyeUFyZ3MucHVzaCgnb3JkZXI6ICRvcmRlcicpO1xuICAgIHZhcmlhYmxlcy5vcmRlciA9IGlucHV0Lm9yZGVyO1xuICB9XG5cbiAgaWYgKGlucHV0LnRha2UpIHtcbiAgICBjb25zdCB0YWtlQ2xhdXNlID0gZ3JhcGhRbFRha2UoaW5wdXQudGFrZSk7XG4gICAgaWYgKHRha2VDbGF1c2UpIHtcbiAgICAgIHF1ZXJ5QXJncy5wdXNoKHRha2VDbGF1c2UpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zU3RyID0gcXVlcnlQYXJhbXMubGVuZ3RoID4gMCA/IGAoJHtxdWVyeVBhcmFtcy5qb2luKCcsICcpfSlgIDogJyc7XG4gIGNvbnN0IHF1ZXJ5QXJnc1N0ciA9IHF1ZXJ5QXJncy5sZW5ndGggPiAwID8gYCgke3F1ZXJ5QXJncy5qb2luKCcsICcpfSlgIDogJyc7XG5cbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBuYW1lLFxuICAgIHF1ZXJ5OiBncWxgXG4gICAgICAgICAgcXVlcnkgJHtjYXBOYW1lfSR7cXVlcnlQYXJhbXNTdHJ9IHtcbiAgICAgICAgICAgICR7bmFtZX0ke3F1ZXJ5QXJnc1N0cn0ge1xuICAgICAgICAgICAgICAke2lucHV0LnByb3BzfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgYCxcbiAgICB2YXJpYWJsZXMsXG4gIH07XG59XG4iXX0=