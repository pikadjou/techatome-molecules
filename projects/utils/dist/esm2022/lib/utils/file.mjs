import { Camera } from "@capacitor/camera";
import Compressor from "compressorjs";
import { newGuid } from "./identifier";
export const octetsToMo = (octets) => {
    return octets / (1024 * 1024);
};
export const extractExtension = (name) => {
    // Séparer le nom du fichier en parties en fonction du point (.)
    var parties = name.split(".");
    // Récupérer la dernière partie (qui est l'extension)
    var extension = parties[parties.length - 1];
    return extension;
};
export const getBase64FromFile = (file) => {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onloadend = () => {
            if (reader.result) {
                resolve(reader.result.toString());
            }
            reject(null);
        };
        reader.readAsDataURL(file);
    });
};
export const getBlobImage = async (base64) => {
    const blob = await fetch(base64).then((res) => res.blob());
    return await compressImage(blob);
};
export const compressImage = async (blob) => {
    return new Promise((resolve, reject) => {
        new Compressor(blob, {
            quality: 0.4,
            convertSize: 1000000, // 1MB
            success: (blob) => {
                resolve(blob);
            },
            error: (error) => {
                reject(error);
            },
        });
    });
};
export const downloadFile = (url) => {
    const imageRegex = /\.(jpg|jpeg|png|gif|bmp|webp|svg)$/i;
    if (imageRegex.test(url)) {
        window.open(url, "_blank");
    }
    else {
        window.open("https://docs.google.com/a/google.com/viewer?url=" +
            url.replaceAll("&", "%26") +
            "&embedded=false", "_blank");
    }
};
export const pickImages = async () => {
    const gallery = await Camera.pickImages({
        quality: 60,
    });
    const pics = [];
    for (let pic of gallery.photos) {
        const file = {
            file: await pathToFile(pic),
            localUrl: pic.webPath,
        };
        if (!file.file) {
            continue;
        }
        pics.push(file);
    }
    return pics;
};
export const pathToFile = async (pic) => {
    if (!pic.webPath)
        return null;
    const response = await fetch(pic.webPath);
    const blob = await compressImage(await response.blob());
    return new File([blob], newGuid(), { type: blob.type });
};
/**
 * Calculates the proper height of an image with a custom width, preserving the original aspect ratio.
 *
 * @param originalHeight
 * @param originalWidth
 * @param newWidth
 */
export const determineNewHeight = (originalHeight, originalWidth, newWidth) => {
    return (originalHeight / originalWidth) * newWidth;
};
/**
 * Calculates the proper width of an image with a custom height, preserving the original aspect ratio.
 *
 * @param originalWidth
 * @param originalHeight
 * @param newWidth
 */
export const determineNewWidth = (originalWidth, originalHeight, newHeight) => {
    return (originalWidth / originalHeight) * newHeight;
};
/**
 * Calculates the proper height of an image with a custom width, preserving the original aspect ratio.
 *
 * @param originalHeight
 * @param originalWidth
 * @param newWidth
 */
export const determineNewSize = (originalHeight, originalWidth, newWidth, newHeight) => {
    if (newHeight < originalHeight || newWidth < originalWidth) {
        var ratio = Math.min(newWidth / originalWidth, newHeight / originalHeight);
        return { width: originalWidth * ratio, height: originalHeight * ratio };
    }
    return { width: originalWidth, height: originalHeight };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9saWIvdXRpbHMvZmlsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDM0MsT0FBTyxVQUFVLE1BQU0sY0FBYyxDQUFDO0FBR3RDLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFFdkMsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLENBQUMsTUFBYyxFQUFFLEVBQUU7SUFDM0MsT0FBTyxNQUFNLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDaEMsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sZ0JBQWdCLEdBQUcsQ0FDOUIsSUFBWSxFQUNzQixFQUFFO0lBQ3BDLGdFQUFnRTtJQUNoRSxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzlCLHFEQUFxRDtJQUNyRCxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUM1QyxPQUFPLFNBQVMsQ0FBQztBQUNuQixDQUFDLENBQUM7QUFDRixNQUFNLENBQUMsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLElBQVUsRUFBbUIsRUFBRTtJQUMvRCxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1FBQ3JDLE1BQU0sTUFBTSxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7UUFDaEMsTUFBTSxDQUFDLFNBQVMsR0FBRyxHQUFHLEVBQUU7WUFDdEIsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQ2xCLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7WUFDcEMsQ0FBQztZQUNELE1BQU0sQ0FBQyxJQUFJLENB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QyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUMxRCxDQUFDLENBQUM7QUFFRjs7Ozs7O0dBTUc7QUFDSCxNQUFNLENBQUMsTUFBTSxrQkFBa0IsR0FBRyxDQUNoQyxjQUFzQixFQUN0QixhQUFxQixFQUNyQixRQUFnQixFQUNoQixFQUFFO0lBQ0YsT0FBTyxDQUFDLGNBQWMsR0FBRyxhQUFhLENBQUMsR0FBRyxRQUFRLENBQUM7QUFDckQsQ0FBQyxDQUFDO0FBRUY7Ozs7OztHQU1HO0FBQ0gsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsQ0FDL0IsYUFBcUIsRUFDckIsY0FBc0IsRUFDdEIsU0FBaUIsRUFDakIsRUFBRTtJQUNGLE9BQU8sQ0FBQyxhQUFhLEdBQUcsY0FBYyxDQUFDLEdBQUcsU0FBUyxDQUFDO0FBQ3RELENBQUMsQ0FBQztBQUVGOzs7Ozs7R0FNRztBQUNILE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLENBQzlCLGNBQXNCLEVBQ3RCLGFBQXFCLEVBQ3JCLFFBQWdCLEVBQ2hCLFNBQWlCLEVBQ2tCLEVBQUU7SUFDckMsSUFBSSxTQUFTLEdBQUcsY0FBYyxJQUFJLFFBQVEsR0FBRyxhQUFhLEVBQUUsQ0FBQztRQUMzRCxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxhQUFhLEVBQUUsU0FBUyxHQUFHLGNBQWMsQ0FBQyxDQUFDO1FBRTNFLE9BQU8sRUFBRSxLQUFLLEVBQUUsYUFBYSxHQUFHLEtBQUssRUFBRSxNQUFNLEVBQUUsY0FBYyxHQUFHLEtBQUssRUFBRSxDQUFDO0lBQzFFLENBQUM7SUFFRCxPQUFPLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFFLENBQUM7QUFDMUQsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIkBjYXBhY2l0b3IvY2FtZXJhXCI7XG5pbXBvcnQgQ29tcHJlc3NvciBmcm9tIFwiY29tcHJlc3NvcmpzXCI7XG5cbmltcG9ydCB7IEZpbGVTdHJ1Y3R1cmUgfSBmcm9tIFwiLi4vdHlwZXMvZmlsZXMvdGVtcG9yYXJ5LWZpbGVzXCI7XG5pbXBvcnQgeyBuZXdHdWlkIH0gZnJvbSBcIi4vaWRlbnRpZmllclwiO1xuXG5leHBvcnQgY29uc3Qgb2N0ZXRzVG9NbyA9IChvY3RldHM6IG51bWJlcikgPT4ge1xuICByZXR1cm4gb2N0ZXRzIC8gKDEwMjQgKiAxMDI0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBleHRyYWN0RXh0ZW5zaW9uID0gKFxuICBuYW1lOiBzdHJpbmdcbik6IFwiZG9jeFwiIHwgXCJwZGZcIiB8IFwieGxzeFwiIHwgc3RyaW5nID0+IHtcbiAgLy8gU8OpcGFyZXIgbGUgbm9tIGR1IGZpY2hpZXIgZW4gcGFydGllcyBlbiBmb25jdGlvbiBkdSBwb2ludCAoLilcbiAgdmFyIHBhcnRpZXMgPSBuYW1lLnNwbGl0KFwiLlwiKTtcbiAgLy8gUsOpY3Vww6lyZXIgbGEgZGVybmnDqHJlIHBhcnRpZSAocXVpIGVzdCBsJ2V4dGVuc2lvbilcbiAgdmFyIGV4dGVuc2lvbiA9IHBhcnRpZXNbcGFydGllcy5sZW5ndGggLSAxXTtcbiAgcmV0dXJuIGV4dGVuc2lvbjtcbn07XG5leHBvcnQgY29uc3QgZ2V0QmFzZTY0RnJvbUZpbGUgPSAoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4ge1xuICAgICAgaWYgKHJlYWRlci5yZXN1bHQpIHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgICAgcmVqZWN0KG51bGwpO1xuICAgIH07XG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEJsb2JJbWFnZSA9IGFzeW5jIChiYXNlNjQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBibG9iID0gYXdhaXQgZmV0Y2goYmFzZTY0KS50aGVuKChyZXMpID0+IHJlcy5ibG9iKCkpO1xuICByZXR1cm4gYXdhaXQgY29tcHJlc3NJbWFnZShibG9iKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb21wcmVzc0ltYWdlID0gYXN5bmMgKGJsb2I6IEJsb2IpOiBQcm9taXNlPEJsb2I+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBuZXcgQ29tcHJlc3NvcihibG9iLCB7XG4gICAgICBxdWFsaXR5OiAwLjQsXG4gICAgICBjb252ZXJ0U2l6ZTogMTAwMDAwMCwgLy8gMU1CXG4gICAgICBzdWNjZXNzOiAoYmxvYjogQmxvYikgPT4ge1xuICAgICAgICByZXNvbHZlKGJsb2IpO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiAoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBkb3dubG9hZEZpbGUgPSAodXJsOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgaW1hZ2VSZWdleCA9IC9cXC4oanBnfGpwZWd8cG5nfGdpZnxibXB8d2VicHxzdmcpJC9pO1xuXG4gIGlmIChpbWFnZVJlZ2V4LnRlc3QodXJsKSkge1xuICAgIHdpbmRvdy5vcGVuKHVybCwgXCJfYmxhbmtcIik7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lm9wZW4oXG4gICAgICBcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2EvZ29vZ2xlLmNvbS92aWV3ZXI/dXJsPVwiICtcbiAgICAgICAgdXJsLnJlcGxhY2VBbGwoXCImXCIsIFwiJTI2XCIpICtcbiAgICAgICAgXCImZW1iZWRkZWQ9ZmFsc2VcIixcbiAgICAgIFwiX2JsYW5rXCJcbiAgICApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcGlja0ltYWdlcyA9IGFzeW5jICgpOiBQcm9taXNlPEZpbGVTdHJ1Y3R1cmVbXT4gPT4ge1xuICBjb25zdCBnYWxsZXJ5ID0gYXdhaXQgQ2FtZXJhLnBpY2tJbWFnZXMoe1xuICAgIHF1YWxpdHk6IDYwLFxuICB9KTtcblxuICBjb25zdCBwaWNzID0gW107XG4gIGZvciAobGV0IHBpYyBvZiBnYWxsZXJ5LnBob3Rvcykge1xuICAgIGNvbnN0IGZpbGU6IEZpbGVTdHJ1Y3R1cmUgPSB7XG4gICAgICBmaWxlOiBhd2FpdCBwYXRoVG9GaWxlKHBpYyksXG4gICAgICBsb2NhbFVybDogcGljLndlYlBhdGgsXG4gICAgfTtcblxuICAgIGlmICghZmlsZS5maWxlKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcGljcy5wdXNoKGZpbGUpO1xuICB9XG5cbiAgcmV0dXJuIHBpY3M7XG59O1xuXG5leHBvcnQgY29uc3QgcGF0aFRvRmlsZSA9IGFzeW5jIChwaWM6IHtcbiAgd2ViUGF0aD86IHN0cmluZztcbiAgZm9ybWF0OiBzdHJpbmc7XG59KTogUHJvbWlzZTxGaWxlIHwgbnVsbD4gPT4ge1xuICBpZiAoIXBpYy53ZWJQYXRoKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHBpYy53ZWJQYXRoKTtcblxuICBjb25zdCBibG9iID0gYXdhaXQgY29tcHJlc3NJbWFnZShhd2FpdCByZXNwb25zZS5ibG9iKCkpO1xuICByZXR1cm4gbmV3IEZpbGUoW2Jsb2JdLCBuZXdHdWlkKCksIHsgdHlwZTogYmxvYi50eXBlIH0pO1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBwcm9wZXIgaGVpZ2h0IG9mIGFuIGltYWdlIHdpdGggYSBjdXN0b20gd2lkdGgsIHByZXNlcnZpbmcgdGhlIG9yaWdpbmFsIGFzcGVjdCByYXRpby5cbiAqXG4gKiBAcGFyYW0gb3JpZ2luYWxIZWlnaHRcbiAqIEBwYXJhbSBvcmlnaW5hbFdpZHRoXG4gKiBAcGFyYW0gbmV3V2lkdGhcbiAqL1xuZXhwb3J0IGNvbnN0IGRldGVybWluZU5ld0hlaWdodCA9IChcbiAgb3JpZ2luYWxIZWlnaHQ6IG51bWJlcixcbiAgb3JpZ2luYWxXaWR0aDogbnVtYmVyLFxuICBuZXdXaWR0aDogbnVtYmVyXG4pID0+IHtcbiAgcmV0dXJuIChvcmlnaW5hbEhlaWdodCAvIG9yaWdpbmFsV2lkdGgpICogbmV3V2lkdGg7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHByb3BlciB3aWR0aCBvZiBhbiBpbWFnZSB3aXRoIGEgY3VzdG9tIGhlaWdodCwgcHJlc2VydmluZyB0aGUgb3JpZ2luYWwgYXNwZWN0IHJhdGlvLlxuICpcbiAqIEBwYXJhbSBvcmlnaW5hbFdpZHRoXG4gKiBAcGFyYW0gb3JpZ2luYWxIZWlnaHRcbiAqIEBwYXJhbSBuZXdXaWR0aFxuICovXG5leHBvcnQgY29uc3QgZGV0ZXJtaW5lTmV3V2lkdGggPSAoXG4gIG9yaWdpbmFsV2lkdGg6IG51bWJlcixcbiAgb3JpZ2luYWxIZWlnaHQ6IG51bWJlcixcbiAgbmV3SGVpZ2h0OiBudW1iZXJcbikgPT4ge1xuICByZXR1cm4gKG9yaWdpbmFsV2lkdGggLyBvcmlnaW5hbEhlaWdodCkgKiBuZXdIZWlnaHQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHByb3BlciBoZWlnaHQgb2YgYW4gaW1hZ2Ugd2l0aCBhIGN1c3RvbSB3aWR0aCwgcHJlc2VydmluZyB0aGUgb3JpZ2luYWwgYXNwZWN0IHJhdGlvLlxuICpcbiAqIEBwYXJhbSBvcmlnaW5hbEhlaWdodFxuICogQHBhcmFtIG9yaWdpbmFsV2lkdGhcbiAqIEBwYXJhbSBuZXdXaWR0aFxuICovXG5leHBvcnQgY29uc3QgZGV0ZXJtaW5lTmV3U2l6ZSA9IChcbiAgb3JpZ2luYWxIZWlnaHQ6IG51bWJlcixcbiAgb3JpZ2luYWxXaWR0aDogbnVtYmVyLFxuICBuZXdXaWR0aDogbnVtYmVyLFxuICBuZXdIZWlnaHQ6IG51bWJlclxuKTogeyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9ID0+IHtcbiAgaWYgKG5ld0hlaWdodCA8IG9yaWdpbmFsSGVpZ2h0IHx8IG5ld1dpZHRoIDwgb3JpZ2luYWxXaWR0aCkge1xuICAgIHZhciByYXRpbyA9IE1hdGgubWluKG5ld1dpZHRoIC8gb3JpZ2luYWxXaWR0aCwgbmV3SGVpZ2h0IC8gb3JpZ2luYWxIZWlnaHQpO1xuXG4gICAgcmV0dXJuIHsgd2lkdGg6IG9yaWdpbmFsV2lkdGggKiByYXRpbywgaGVpZ2h0OiBvcmlnaW5hbEhlaWdodCAqIHJhdGlvIH07XG4gIH1cblxuICByZXR1cm4geyB3aWR0aDogb3JpZ2luYWxXaWR0aCwgaGVpZ2h0OiBvcmlnaW5hbEhlaWdodCB9O1xufTtcbiJdfQ==